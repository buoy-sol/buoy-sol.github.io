var Fv=Object.defineProperty;var jv=(o,p,i)=>p in o?Fv(o,p,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[p]=i;var Gu=(o,p,i)=>jv(o,typeof p!="symbol"?p+"":p,i);(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}})();function Gv(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ku={exports:{}},Gr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function kv(){if(eg)return Gr;eg=1;var o=Symbol.for("react.transitional.element"),p=Symbol.for("react.fragment");function i(a,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:o,type:a,key:u,ref:s!==void 0?s:null,props:l}}return Gr.Fragment=p,Gr.jsx=i,Gr.jsxs=i,Gr}var tg;function Vv(){return tg||(tg=1,ku.exports=kv()),ku.exports}var F=Vv(),Vu={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function qv(){if(ig)return qe;ig=1;var o=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,b={};function C(L,ee,ve){this.props=L,this.context=ee,this.refs=b,this.updater=ve||w}C.prototype.isReactComponent={},C.prototype.setState=function(L,ee){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ee,"setState")},C.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function A(){}A.prototype=C.prototype;function z(L,ee,ve){this.props=L,this.context=ee,this.refs=b,this.updater=ve||w}var H=z.prototype=new A;H.constructor=z,_(H,C.prototype),H.isPureReactComponent=!0;var ae=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function pe(L,ee,ve,J,Ee,Ve){return ve=Ve.ref,{$$typeof:o,type:L,key:ee,ref:ve!==void 0?ve:null,props:Ve}}function ye(L,ee){return pe(L.type,ee,void 0,void 0,void 0,L.props)}function ge(L){return typeof L=="object"&&L!==null&&L.$$typeof===o}function Ge(L){var ee={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ve){return ee[ve]})}var ce=/\/+/g;function ue(L,ee){return typeof L=="object"&&L!==null&&L.key!=null?Ge(""+L.key):ee.toString(36)}function de(){}function Pe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(de,de):(L.status="pending",L.then(function(ee){L.status==="pending"&&(L.status="fulfilled",L.value=ee)},function(ee){L.status==="pending"&&(L.status="rejected",L.reason=ee)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function ze(L,ee,ve,J,Ee){var Ve=typeof L;(Ve==="undefined"||Ve==="boolean")&&(L=null);var Ce=!1;if(L===null)Ce=!0;else switch(Ve){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(L.$$typeof){case o:case p:Ce=!0;break;case g:return Ce=L._init,ze(Ce(L._payload),ee,ve,J,Ee)}}if(Ce)return Ee=Ee(L),Ce=J===""?"."+ue(L,0):J,ae(Ee)?(ve="",Ce!=null&&(ve=Ce.replace(ce,"$&/")+"/"),ze(Ee,ee,ve,"",function(Yt){return Yt})):Ee!=null&&(ge(Ee)&&(Ee=ye(Ee,ve+(Ee.key==null||L&&L.key===Ee.key?"":(""+Ee.key).replace(ce,"$&/")+"/")+Ce)),ee.push(Ee)),1;Ce=0;var Et=J===""?".":J+":";if(ae(L))for(var lt=0;lt<L.length;lt++)J=L[lt],Ve=Et+ue(J,lt),Ce+=ze(J,ee,ve,Ve,Ee);else if(lt=y(L),typeof lt=="function")for(L=lt.call(L),lt=0;!(J=L.next()).done;)J=J.value,Ve=Et+ue(J,lt++),Ce+=ze(J,ee,ve,Ve,Ee);else if(Ve==="object"){if(typeof L.then=="function")return ze(Pe(L),ee,ve,J,Ee);throw ee=String(L),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function k(L,ee,ve){if(L==null)return L;var J=[],Ee=0;return ze(L,J,"","",function(Ve){return ee.call(ve,Ve,Ee++)}),J}function oe(L){if(L._status===-1){var ee=L._result;ee=ee(),ee.then(function(ve){(L._status===0||L._status===-1)&&(L._status=1,L._result=ve)},function(ve){(L._status===0||L._status===-1)&&(L._status=2,L._result=ve)}),L._status===-1&&(L._status=0,L._result=ee)}if(L._status===1)return L._result.default;throw L._result}var me=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Le(){}return qe.Children={map:k,forEach:function(L,ee,ve){k(L,function(){ee.apply(this,arguments)},ve)},count:function(L){var ee=0;return k(L,function(){ee++}),ee},toArray:function(L){return k(L,function(ee){return ee})||[]},only:function(L){if(!ge(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},qe.Component=C,qe.Fragment=i,qe.Profiler=s,qe.PureComponent=z,qe.StrictMode=a,qe.Suspense=h,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,qe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return Q.H.useMemoCache(L)}},qe.cache=function(L){return function(){return L.apply(null,arguments)}},qe.cloneElement=function(L,ee,ve){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var J=_({},L.props),Ee=L.key,Ve=void 0;if(ee!=null)for(Ce in ee.ref!==void 0&&(Ve=void 0),ee.key!==void 0&&(Ee=""+ee.key),ee)!U.call(ee,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&ee.ref===void 0||(J[Ce]=ee[Ce]);var Ce=arguments.length-2;if(Ce===1)J.children=ve;else if(1<Ce){for(var Et=Array(Ce),lt=0;lt<Ce;lt++)Et[lt]=arguments[lt+2];J.children=Et}return pe(L.type,Ee,void 0,void 0,Ve,J)},qe.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},qe.createElement=function(L,ee,ve){var J,Ee={},Ve=null;if(ee!=null)for(J in ee.key!==void 0&&(Ve=""+ee.key),ee)U.call(ee,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(Ee[J]=ee[J]);var Ce=arguments.length-2;if(Ce===1)Ee.children=ve;else if(1<Ce){for(var Et=Array(Ce),lt=0;lt<Ce;lt++)Et[lt]=arguments[lt+2];Ee.children=Et}if(L&&L.defaultProps)for(J in Ce=L.defaultProps,Ce)Ee[J]===void 0&&(Ee[J]=Ce[J]);return pe(L,Ve,void 0,void 0,null,Ee)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(L){return{$$typeof:d,render:L}},qe.isValidElement=ge,qe.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:oe}},qe.memo=function(L,ee){return{$$typeof:c,type:L,compare:ee===void 0?null:ee}},qe.startTransition=function(L){var ee=Q.T,ve={};Q.T=ve;try{var J=L(),Ee=Q.S;Ee!==null&&Ee(ve,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Le,me)}catch(Ve){me(Ve)}finally{Q.T=ee}},qe.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},qe.use=function(L){return Q.H.use(L)},qe.useActionState=function(L,ee,ve){return Q.H.useActionState(L,ee,ve)},qe.useCallback=function(L,ee){return Q.H.useCallback(L,ee)},qe.useContext=function(L){return Q.H.useContext(L)},qe.useDebugValue=function(){},qe.useDeferredValue=function(L,ee){return Q.H.useDeferredValue(L,ee)},qe.useEffect=function(L,ee,ve){var J=Q.H;if(typeof ve=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(L,ee)},qe.useId=function(){return Q.H.useId()},qe.useImperativeHandle=function(L,ee,ve){return Q.H.useImperativeHandle(L,ee,ve)},qe.useInsertionEffect=function(L,ee){return Q.H.useInsertionEffect(L,ee)},qe.useLayoutEffect=function(L,ee){return Q.H.useLayoutEffect(L,ee)},qe.useMemo=function(L,ee){return Q.H.useMemo(L,ee)},qe.useOptimistic=function(L,ee){return Q.H.useOptimistic(L,ee)},qe.useReducer=function(L,ee,ve){return Q.H.useReducer(L,ee,ve)},qe.useRef=function(L){return Q.H.useRef(L)},qe.useState=function(L){return Q.H.useState(L)},qe.useSyncExternalStore=function(L,ee,ve){return Q.H.useSyncExternalStore(L,ee,ve)},qe.useTransition=function(){return Q.H.useTransition()},qe.version="19.1.0",qe}var ng;function uc(){return ng||(ng=1,Vu.exports=qv()),Vu.exports}var j=uc(),qu={exports:{}},kr={},Iu={exports:{}},Zu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function Iv(){return ag||(ag=1,function(o){function p(k,oe){var me=k.length;k.push(oe);e:for(;0<me;){var Le=me-1>>>1,L=k[Le];if(0<s(L,oe))k[Le]=oe,k[me]=L,me=Le;else break e}}function i(k){return k.length===0?null:k[0]}function a(k){if(k.length===0)return null;var oe=k[0],me=k.pop();if(me!==oe){k[0]=me;e:for(var Le=0,L=k.length,ee=L>>>1;Le<ee;){var ve=2*(Le+1)-1,J=k[ve],Ee=ve+1,Ve=k[Ee];if(0>s(J,me))Ee<L&&0>s(Ve,J)?(k[Le]=Ve,k[Ee]=me,Le=Ee):(k[Le]=J,k[ve]=me,Le=ve);else if(Ee<L&&0>s(Ve,me))k[Le]=Ve,k[Ee]=me,Le=Ee;else break e}}return oe}function s(k,oe){var me=k.sortIndex-oe.sortIndex;return me!==0?me:k.id-oe.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;o.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();o.unstable_now=function(){return u.now()-d}}var h=[],c=[],g=1,v=null,y=3,w=!1,_=!1,b=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function ae(k){for(var oe=i(c);oe!==null;){if(oe.callback===null)a(c);else if(oe.startTime<=k)a(c),oe.sortIndex=oe.expirationTime,p(h,oe);else break;oe=i(c)}}function Q(k){if(b=!1,ae(k),!_)if(i(h)!==null)_=!0,U||(U=!0,ue());else{var oe=i(c);oe!==null&&ze(Q,oe.startTime-k)}}var U=!1,pe=-1,ye=5,ge=-1;function Ge(){return C?!0:!(o.unstable_now()-ge<ye)}function ce(){if(C=!1,U){var k=o.unstable_now();ge=k;var oe=!0;try{e:{_=!1,b&&(b=!1,z(pe),pe=-1),w=!0;var me=y;try{t:{for(ae(k),v=i(h);v!==null&&!(v.expirationTime>k&&Ge());){var Le=v.callback;if(typeof Le=="function"){v.callback=null,y=v.priorityLevel;var L=Le(v.expirationTime<=k);if(k=o.unstable_now(),typeof L=="function"){v.callback=L,ae(k),oe=!0;break t}v===i(h)&&a(h),ae(k)}else a(h);v=i(h)}if(v!==null)oe=!0;else{var ee=i(c);ee!==null&&ze(Q,ee.startTime-k),oe=!1}}break e}finally{v=null,y=me,w=!1}oe=void 0}}finally{oe?ue():U=!1}}}var ue;if(typeof H=="function")ue=function(){H(ce)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Pe=de.port2;de.port1.onmessage=ce,ue=function(){Pe.postMessage(null)}}else ue=function(){A(ce,0)};function ze(k,oe){pe=A(function(){k(o.unstable_now())},oe)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(k){k.callback=null},o.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<k?Math.floor(1e3/k):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_next=function(k){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var me=y;y=oe;try{return k()}finally{y=me}},o.unstable_requestPaint=function(){C=!0},o.unstable_runWithPriority=function(k,oe){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var me=y;y=k;try{return oe()}finally{y=me}},o.unstable_scheduleCallback=function(k,oe,me){var Le=o.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Le+me:Le):me=Le,k){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=me+L,k={id:g++,callback:oe,priorityLevel:k,startTime:me,expirationTime:L,sortIndex:-1},me>Le?(k.sortIndex=me,p(c,k),i(h)===null&&k===i(c)&&(b?(z(pe),pe=-1):b=!0,ze(Q,me-Le))):(k.sortIndex=L,p(h,k),_||w||(_=!0,U||(U=!0,ue()))),k},o.unstable_shouldYield=Ge,o.unstable_wrapCallback=function(k){var oe=y;return function(){var me=y;y=oe;try{return k.apply(this,arguments)}finally{y=me}}}}(Zu)),Zu}var rg;function Zv(){return rg||(rg=1,Iu.exports=Iv()),Iu.exports}var Yu={exports:{}},Vt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg;function Yv(){if(lg)return Vt;lg=1;var o=uc();function p(h){var c="https://react.dev/errors/"+h;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(p(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(h,c,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:h,containerInfo:c,implementation:g}}var u=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,c){if(h==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Vt.createPortal=function(h,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(p(299));return l(h,c,null,g)},Vt.flushSync=function(h){var c=u.T,g=a.p;try{if(u.T=null,a.p=2,h)return h()}finally{u.T=c,a.p=g,a.d.f()}},Vt.preconnect=function(h,c){typeof h=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,a.d.C(h,c))},Vt.prefetchDNS=function(h){typeof h=="string"&&a.d.D(h)},Vt.preinit=function(h,c){if(typeof h=="string"&&c&&typeof c.as=="string"){var g=c.as,v=d(g,c.crossOrigin),y=typeof c.integrity=="string"?c.integrity:void 0,w=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;g==="style"?a.d.S(h,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:w}):g==="script"&&a.d.X(h,{crossOrigin:v,integrity:y,fetchPriority:w,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Vt.preinitModule=function(h,c){if(typeof h=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var g=d(c.as,c.crossOrigin);a.d.M(h,{crossOrigin:g,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&a.d.M(h)},Vt.preload=function(h,c){if(typeof h=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var g=c.as,v=d(g,c.crossOrigin);a.d.L(h,g,{crossOrigin:v,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Vt.preloadModule=function(h,c){if(typeof h=="string")if(c){var g=d(c.as,c.crossOrigin);a.d.m(h,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:g,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else a.d.m(h)},Vt.requestFormReset=function(h){a.d.r(h)},Vt.unstable_batchedUpdates=function(h,c){return h(c)},Vt.useFormState=function(h,c,g){return u.H.useFormState(h,c,g)},Vt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Vt.version="19.1.0",Vt}var sg;function Xg(){if(sg)return Yu.exports;sg=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(p){console.error(p)}}return o(),Yu.exports=Yv(),Yu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function Wv(){if(og)return kr;og=1;var o=Zv(),p=uc(),i=Xg();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var f=n.return;if(f===null)break;var m=f.alternate;if(m===null){if(r=f.return,r!==null){n=r;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===n)return d(f),e;if(m===r)return d(f),t;m=m.sibling}throw Error(a(188))}if(n.return!==r.return)n=f,r=m;else{for(var E=!1,R=f.child;R;){if(R===n){E=!0,n=f,r=m;break}if(R===r){E=!0,r=f,n=m;break}R=R.sibling}if(!E){for(R=m.child;R;){if(R===n){E=!0,n=m,r=f;break}if(R===r){E=!0,r=m,n=f;break}R=R.sibling}if(!E)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?e:t}function c(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=c(e),t!==null)return t;e=e.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),H=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),ge=Symbol.for("react.activity"),Ge=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function ue(e){return e===null||typeof e!="object"?null:(e=ce&&e[ce]||e["@@iterator"],typeof e=="function"?e:null)}var de=Symbol.for("react.client.reference");function Pe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===de?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case C:return"Profiler";case b:return"StrictMode";case Q:return"Suspense";case U:return"SuspenseList";case ge:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case H:return(e.displayName||"Context")+".Provider";case z:return(e._context.displayName||"Context")+".Consumer";case ae:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pe:return t=e.displayName||null,t!==null?t:Pe(e.type)||"Memo";case ye:t=e._payload,e=e._init;try{return Pe(e(t))}catch{}}return null}var ze=Array.isArray,k=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Le=[],L=-1;function ee(e){return{current:e}}function ve(e){0>L||(e.current=Le[L],Le[L]=null,L--)}function J(e,t){L++,Le[L]=e.current,e.current=t}var Ee=ee(null),Ve=ee(null),Ce=ee(null),Et=ee(null);function lt(e,t){switch(J(Ce,t),J(Ve,e),J(Ee,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Dd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Dd(t),e=Ad(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ve(Ee),J(Ee,e)}function Yt(){ve(Ee),ve(Ve),ve(Ce)}function vt(e){e.memoizedState!==null&&J(Et,e);var t=Ee.current,n=Ad(t,e.type);t!==n&&(J(Ve,e),J(Ee,n))}function jt(e){Ve.current===e&&(ve(Ee),ve(Ve)),Et.current===e&&(ve(Et),Br._currentValue=me)}var Ai=Object.prototype.hasOwnProperty,Oi=o.unstable_scheduleCallback,qt=o.unstable_cancelCallback,Gi=o.unstable_shouldYield,Mi=o.unstable_requestPaint,T=o.unstable_now,O=o.unstable_getCurrentPriorityLevel,I=o.unstable_ImmediatePriority,le=o.unstable_UserBlockingPriority,fe=o.unstable_NormalPriority,we=o.unstable_LowPriority,ie=o.unstable_IdlePriority,Ue=o.log,$e=o.unstable_setDisableYieldValue,Ie=null,Te=null;function it(e){if(typeof Ue=="function"&&$e(e),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(Ie,e)}catch{}}var S=Math.clz32?Math.clz32:M,x=Math.log,D=Math.LN2;function M(e){return e>>>=0,e===0?32:31-(x(e)/D|0)|0}var K=256,se=4194304;function _e(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qe(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var f=0,m=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var R=r&134217727;return R!==0?(r=R&~m,r!==0?f=_e(r):(E&=R,E!==0?f=_e(E):n||(n=R&~e,n!==0&&(f=_e(n))))):(R=r&~m,R!==0?f=_e(R):E!==0?f=_e(E):n||(n=r&~e,n!==0&&(f=_e(n)))),f===0?0:t!==0&&t!==f&&(t&m)===0&&(m=f&-f,n=t&-t,m>=n||m===32&&(n&4194048)!==0)?t:f}function be(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Pt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pt(){var e=K;return K<<=1,(K&4194048)===0&&(K=256),e}function xi(){var e=se;return se<<=1,(se&62914560)===0&&(se=4194304),e}function ki(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pi(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Hn(e,t,n,r,f,m){var E=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var R=e.entanglements,P=e.expirationTimes,Z=e.hiddenUpdates;for(n=E&~n;0<n;){var $=31-S(n),ne=1<<$;R[$]=0,P[$]=-1;var Y=Z[$];if(Y!==null)for(Z[$]=null,$=0;$<Y.length;$++){var W=Y[$];W!==null&&(W.lane&=-536870913)}n&=~ne}r!==0&&Un(e,r,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(E&~t))}function Un(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-S(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&4194090}function Fn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-S(n),f=1<<r;f&t|e[r]&t&&(e[r]|=t),n&=~f}}function Ia(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Za(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function N(){var e=oe.p;return e!==0?e:(e=window.event,e===void 0?32:Wd(e.type))}function V(e,t){var n=oe.p;try{return oe.p=e,t()}finally{oe.p=n}}var X=Math.random().toString(36).slice(2),re="__reactFiber$"+X,he="__reactProps$"+X,Re="__reactContainer$"+X,Ne="__reactEvents$"+X,xe="__reactListeners$"+X,Oe="__reactHandles$"+X,Me="__reactResources$"+X,Fe="__reactMarker$"+X;function De(e){delete e[re],delete e[he],delete e[Ne],delete e[xe],delete e[Oe]}function ke(e){var t=e[re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[re]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=zd(e);e!==null;){if(n=e[re])return n;e=zd(e)}return t}e=n,n=e.parentNode}return null}function nt(e){if(e=e[re]||e[Re]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function mt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function wt(e){var t=e[Me];return t||(t=e[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function at(e){e[Fe]=!0}var et=new Set,ln={};function It(e,t){ui(e,t),ui(e+"Capture",t)}function ui(e,t){for(ln[e]=t,e=0;e<t.length;e++)et.add(t[e])}var Wt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sn={},on={};function Ya(e){return Ai.call(on,e)?!0:Ai.call(sn,e)?!1:Wt.test(e)?on[e]=!0:(sn[e]=!0,!1)}function ci(e,t,n){if(Ya(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Vi(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ye(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}var Gt,Ei;function Si(e){if(Gt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gt=t&&t[1]||"",Ei=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gt+e+Ei}var jn=!1;function yt(e,t){if(!e||jn)return"";jn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(W){var Y=W}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(W){Y=W}e.call(ne.prototype)}}else{try{throw Error()}catch(W){Y=W}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=r.DetermineComponentFrameRoot(),E=m[0],R=m[1];if(E&&R){var P=E.split(`
`),Z=R.split(`
`);for(f=r=0;r<P.length&&!P[r].includes("DetermineComponentFrameRoot");)r++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(r===P.length||f===Z.length)for(r=P.length-1,f=Z.length-1;1<=r&&0<=f&&P[r]!==Z[f];)f--;for(;1<=r&&0<=f;r--,f--)if(P[r]!==Z[f]){if(r!==1||f!==1)do if(r--,f--,0>f||P[r]!==Z[f]){var $=`
`+P[r].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=r&&0<=f);break}}}finally{jn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Si(n):""}function un(e){switch(e.tag){case 26:case 27:case 5:return Si(e.type);case 16:return Si("Lazy");case 13:return Si("Suspense");case 19:return Si("SuspenseList");case 0:case 15:return yt(e.type,!1);case 11:return yt(e.type.render,!1);case 1:return yt(e.type,!0);case 31:return Si("Activity");default:return""}}function Wa(e){try{var t="";do t+=un(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ec(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lp(e){var t=Ec(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var f=n.get,m=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return f.call(this)},set:function(E){r=""+E,m.call(this,E)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(E){r=""+E},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tl(e){e._valueTracker||(e._valueTracker=Lp(e))}function Sc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ec(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function il(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Np=/[\n"\\]/g;function hi(e){return e.replace(Np,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Hs(e,t,n,r,f,m,E,R){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),t!=null?E==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Xt(t)):e.value!==""+Xt(t)&&(e.value=""+Xt(t)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),t!=null?Us(e,E,Xt(t)):n!=null?Us(e,E,Xt(n)):r!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?e.name=""+Xt(R):e.removeAttribute("name")}function _c(e,t,n,r,f,m,E,R){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),t!=null||n!=null){if(!(m!=="submit"&&m!=="reset"||t!=null))return;n=n!=null?""+Xt(n):"",t=t!=null?""+Xt(t):n,R||t===e.value||(e.value=t),e.defaultValue=t}r=r??f,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=R?e.checked:!!r,e.defaultChecked=!!r,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E)}function Us(e,t,n){t==="number"&&il(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function sa(e,t,n,r){if(e=e.options,t){t={};for(var f=0;f<n.length;f++)t["$"+n[f]]=!0;for(n=0;n<e.length;n++)f=t.hasOwnProperty("$"+e[n].value),e[n].selected!==f&&(e[n].selected=f),f&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Xt(n),t=null,f=0;f<e.length;f++){if(e[f].value===n){e[f].selected=!0,r&&(e[f].defaultSelected=!0);return}t!==null||e[f].disabled||(t=e[f])}t!==null&&(t.selected=!0)}}function bc(e,t,n){if(t!=null&&(t=""+Xt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Xt(n):""}function Rc(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(a(92));if(ze(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=Xt(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r)}function oa(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cc(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||Bp.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Dc(e,t,n){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var f in t)r=t[f],t.hasOwnProperty(f)&&n[f]!==r&&Cc(e,f,r)}else for(var m in t)t.hasOwnProperty(m)&&Cc(e,m,t[m])}function Fs(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Up=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nl(e){return Up.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var js=null;function Gs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ua=null,ca=null;function Ac(e){var t=nt(e);if(t&&(e=t.stateNode)){var n=e[he]||null;e:switch(e=t.stateNode,t.type){case"input":if(Hs(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hi(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var f=r[he]||null;if(!f)throw Error(a(90));Hs(r,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Sc(r)}break e;case"textarea":bc(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&sa(e,!!n.multiple,t,!1)}}}var ks=!1;function Oc(e,t,n){if(ks)return e(t,n);ks=!0;try{var r=e(t);return r}finally{if(ks=!1,(ua!==null||ca!==null)&&(kl(),ua&&(t=ua,e=ca,ca=ua=null,Ac(t),e)))for(t=0;t<e.length;t++)Ac(e[t])}}function Xa(e,t){var n=e.stateNode;if(n===null)return null;var r=n[he]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(a(231,t,typeof n));return n}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vs=!1;if(qi)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){Vs=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{Vs=!1}var cn=null,qs=null,al=null;function Mc(){if(al)return al;var e,t=qs,n=t.length,r,f="value"in cn?cn.value:cn.textContent,m=f.length;for(e=0;e<n&&t[e]===f[e];e++);var E=n-e;for(r=1;r<=E&&t[n-r]===f[m-r];r++);return al=f.slice(e,1<r?1-r:void 0)}function rl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ll(){return!0}function Pc(){return!1}function Qt(e){function t(n,r,f,m,E){this._reactName=n,this._targetInst=f,this.type=r,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var R in e)e.hasOwnProperty(R)&&(n=e[R],this[R]=n?n(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ll:Pc,this.isPropagationStopped=Pc,this}return g(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ll)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ll)},persist:function(){},isPersistent:ll}),t}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=Qt(Gn),Ka=g({},Gn,{view:0,detail:0}),Fp=Qt(Ka),Is,Zs,Ja,ol=g({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ja&&(Ja&&e.type==="mousemove"?(Is=e.screenX-Ja.screenX,Zs=e.screenY-Ja.screenY):Zs=Is=0,Ja=e),Is)},movementY:function(e){return"movementY"in e?e.movementY:Zs}}),zc=Qt(ol),jp=g({},ol,{dataTransfer:0}),Gp=Qt(jp),kp=g({},Ka,{relatedTarget:0}),Ys=Qt(kp),Vp=g({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),qp=Qt(Vp),Ip=g({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zp=Qt(Ip),Yp=g({},Gn,{data:0}),Lc=Qt(Yp),Wp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Qp[e])?!!t[e]:!1}function Ws(){return Kp}var Jp=g({},Ka,{key:function(e){if(e.key){var t=Wp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(e){return e.type==="keypress"?rl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$p=Qt(Jp),em=g({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nc=Qt(em),tm=g({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),im=Qt(tm),nm=g({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),am=Qt(nm),rm=g({},ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lm=Qt(rm),sm=g({},Gn,{newState:0,oldState:0}),om=Qt(sm),um=[9,13,27,32],Xs=qi&&"CompositionEvent"in window,$a=null;qi&&"documentMode"in document&&($a=document.documentMode);var cm=qi&&"TextEvent"in window&&!$a,Bc=qi&&(!Xs||$a&&8<$a&&11>=$a),Hc=" ",Uc=!1;function Fc(e,t){switch(e){case"keyup":return um.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ha=!1;function hm(e,t){switch(e){case"compositionend":return jc(t);case"keypress":return t.which!==32?null:(Uc=!0,Hc);case"textInput":return e=t.data,e===Hc&&Uc?null:e;default:return null}}function fm(e,t){if(ha)return e==="compositionend"||!Xs&&Fc(e,t)?(e=Mc(),al=qs=cn=null,ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bc&&t.locale!=="ko"?null:t.data;default:return null}}var dm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dm[e.type]:t==="textarea"}function kc(e,t,n,r){ua?ca?ca.push(r):ca=[r]:ua=r,t=Wl(t,"onChange"),0<t.length&&(n=new sl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var er=null,tr=null;function gm(e){Sd(e,0)}function ul(e){var t=mt(e);if(Sc(t))return e}function Vc(e,t){if(e==="change")return t}var qc=!1;if(qi){var Qs;if(qi){var Ks="oninput"in document;if(!Ks){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),Ks=typeof Ic.oninput=="function"}Qs=Ks}else Qs=!1;qc=Qs&&(!document.documentMode||9<document.documentMode)}function Zc(){er&&(er.detachEvent("onpropertychange",Yc),tr=er=null)}function Yc(e){if(e.propertyName==="value"&&ul(tr)){var t=[];kc(t,tr,e,Gs(e)),Oc(gm,t)}}function pm(e,t,n){e==="focusin"?(Zc(),er=t,tr=n,er.attachEvent("onpropertychange",Yc)):e==="focusout"&&Zc()}function mm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ul(tr)}function vm(e,t){if(e==="click")return ul(t)}function ym(e,t){if(e==="input"||e==="change")return ul(t)}function Tm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ei=typeof Object.is=="function"?Object.is:Tm;function ir(e,t){if(ei(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var f=n[r];if(!Ai.call(t,f)||!ei(e[f],t[f]))return!1}return!0}function Wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xc(e,t){var n=Wc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wc(n)}}function Qc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=il(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=il(e.document)}return t}function Js(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wm=qi&&"documentMode"in document&&11>=document.documentMode,fa=null,$s=null,nr=null,eo=!1;function Jc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eo||fa==null||fa!==il(r)||(r=fa,"selectionStart"in r&&Js(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nr&&ir(nr,r)||(nr=r,r=Wl($s,"onSelect"),0<r.length&&(t=new sl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fa)))}function kn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var da={animationend:kn("Animation","AnimationEnd"),animationiteration:kn("Animation","AnimationIteration"),animationstart:kn("Animation","AnimationStart"),transitionrun:kn("Transition","TransitionRun"),transitionstart:kn("Transition","TransitionStart"),transitioncancel:kn("Transition","TransitionCancel"),transitionend:kn("Transition","TransitionEnd")},to={},$c={};qi&&($c=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Vn(e){if(to[e])return to[e];if(!da[e])return e;var t=da[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $c)return to[e]=t[n];return e}var eh=Vn("animationend"),th=Vn("animationiteration"),ih=Vn("animationstart"),xm=Vn("transitionrun"),Em=Vn("transitionstart"),Sm=Vn("transitioncancel"),nh=Vn("transitionend"),ah=new Map,io="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");io.push("scrollEnd");function _i(e,t){ah.set(e,t),It(t,[e])}var rh=new WeakMap;function fi(e,t){if(typeof e=="object"&&e!==null){var n=rh.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Wa(t)},rh.set(e,t),t)}return{value:e,source:t,stack:Wa(t)}}var di=[],ga=0,no=0;function cl(){for(var e=ga,t=no=ga=0;t<e;){var n=di[t];di[t++]=null;var r=di[t];di[t++]=null;var f=di[t];di[t++]=null;var m=di[t];if(di[t++]=null,r!==null&&f!==null){var E=r.pending;E===null?f.next=f:(f.next=E.next,E.next=f),r.pending=f}m!==0&&lh(n,f,m)}}function hl(e,t,n,r){di[ga++]=e,di[ga++]=t,di[ga++]=n,di[ga++]=r,no|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function ao(e,t,n,r){return hl(e,t,n,r),fl(e)}function pa(e,t){return hl(e,null,null,t),fl(e)}function lh(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var f=!1,m=e.return;m!==null;)m.childLanes|=n,r=m.alternate,r!==null&&(r.childLanes|=n),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&t!==null&&(f=31-S(n),e=m.hiddenUpdates,r=e[f],r===null?e[f]=[t]:r.push(t),t.lane=n|536870912),m):null}function fl(e){if(50<Dr)throw Dr=0,hu=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ma={};function _m(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(e,t,n,r){return new _m(e,t,n,r)}function ro(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ii(e,t){var n=e.alternate;return n===null?(n=ti(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function sh(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function dl(e,t,n,r,f,m){var E=0;if(r=e,typeof e=="function")ro(e)&&(E=1);else if(typeof e=="string")E=Rv(e,n,Ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ge:return e=ti(31,n,t,f),e.elementType=ge,e.lanes=m,e;case _:return qn(n.children,f,m,t);case b:E=8,f|=24;break;case C:return e=ti(12,n,t,f|2),e.elementType=C,e.lanes=m,e;case Q:return e=ti(13,n,t,f),e.elementType=Q,e.lanes=m,e;case U:return e=ti(19,n,t,f),e.elementType=U,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:case H:E=10;break e;case z:E=9;break e;case ae:E=11;break e;case pe:E=14;break e;case ye:E=16,r=null;break e}E=29,n=Error(a(130,e===null?"null":typeof e,"")),r=null}return t=ti(E,n,t,f),t.elementType=e,t.type=r,t.lanes=m,t}function qn(e,t,n,r){return e=ti(7,e,r,t),e.lanes=n,e}function lo(e,t,n){return e=ti(6,e,null,t),e.lanes=n,e}function so(e,t,n){return t=ti(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var va=[],ya=0,gl=null,pl=0,gi=[],pi=0,In=null,Zi=1,Yi="";function Zn(e,t){va[ya++]=pl,va[ya++]=gl,gl=e,pl=t}function oh(e,t,n){gi[pi++]=Zi,gi[pi++]=Yi,gi[pi++]=In,In=e;var r=Zi;e=Yi;var f=32-S(r)-1;r&=~(1<<f),n+=1;var m=32-S(t)+f;if(30<m){var E=f-f%5;m=(r&(1<<E)-1).toString(32),r>>=E,f-=E,Zi=1<<32-S(t)+f|n<<f|r,Yi=m+e}else Zi=1<<m|n<<f|r,Yi=e}function oo(e){e.return!==null&&(Zn(e,1),oh(e,1,0))}function uo(e){for(;e===gl;)gl=va[--ya],va[ya]=null,pl=va[--ya],va[ya]=null;for(;e===In;)In=gi[--pi],gi[pi]=null,Yi=gi[--pi],gi[pi]=null,Zi=gi[--pi],gi[pi]=null}var Zt=null,St=null,st=!1,Yn=null,zi=!1,co=Error(a(519));function Wn(e){var t=Error(a(418,""));throw lr(fi(t,e)),co}function uh(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[re]=e,t[he]=r,n){case"dialog":Je("cancel",t),Je("close",t);break;case"iframe":case"object":case"embed":Je("load",t);break;case"video":case"audio":for(n=0;n<Or.length;n++)Je(Or[n],t);break;case"source":Je("error",t);break;case"img":case"image":case"link":Je("error",t),Je("load",t);break;case"details":Je("toggle",t);break;case"input":Je("invalid",t),_c(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),tl(t);break;case"select":Je("invalid",t);break;case"textarea":Je("invalid",t),Rc(t,r.value,r.defaultValue,r.children),tl(t)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||Cd(t.textContent,n)?(r.popover!=null&&(Je("beforetoggle",t),Je("toggle",t)),r.onScroll!=null&&Je("scroll",t),r.onScrollEnd!=null&&Je("scrollend",t),r.onClick!=null&&(t.onclick=Xl),t=!0):t=!1,t||Wn(e)}function ch(e){for(Zt=e.return;Zt;)switch(Zt.tag){case 5:case 13:zi=!1;return;case 27:case 3:zi=!0;return;default:Zt=Zt.return}}function ar(e){if(e!==Zt)return!1;if(!st)return ch(e),st=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Cu(e.type,e.memoizedProps)),n=!n),n&&St&&Wn(e),ch(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){St=Ri(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}St=null}}else t===27?(t=St,Rn(e.type)?(e=Mu,Mu=null,St=e):St=t):St=Zt?Ri(e.stateNode.nextSibling):null;return!0}function rr(){St=Zt=null,st=!1}function hh(){var e=Yn;return e!==null&&($t===null?$t=e:$t.push.apply($t,e),Yn=null),e}function lr(e){Yn===null?Yn=[e]:Yn.push(e)}var ho=ee(null),Xn=null,Wi=null;function hn(e,t,n){J(ho,t._currentValue),t._currentValue=n}function Xi(e){e._currentValue=ho.current,ve(ho)}function fo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function go(e,t,n,r){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;e:for(;m!==null;){var R=m;m=f;for(var P=0;P<t.length;P++)if(R.context===t[P]){m.lanes|=n,R=m.alternate,R!==null&&(R.lanes|=n),fo(m.return,n,e),r||(E=null);break e}m=R.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(a(341));E.lanes|=n,m=E.alternate,m!==null&&(m.lanes|=n),fo(E,n,e),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===e){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function sr(e,t,n,r){e=null;for(var f=t,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var R=f.type;ei(f.pendingProps.value,E.value)||(e!==null?e.push(R):e=[R])}}else if(f===Et.current){if(E=f.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Br):e=[Br])}f=f.return}e!==null&&go(t,e,n,r),t.flags|=262144}function ml(e){for(e=e.firstContext;e!==null;){if(!ei(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qn(e){Xn=e,Wi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function kt(e){return fh(Xn,e)}function vl(e,t){return Xn===null&&Qn(e),fh(e,t)}function fh(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Wi===null){if(e===null)throw Error(a(308));Wi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wi=Wi.next=t;return n}var bm=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Rm=o.unstable_scheduleCallback,Cm=o.unstable_NormalPriority,Ot={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function po(){return{controller:new bm,data:new Map,refCount:0}}function or(e){e.refCount--,e.refCount===0&&Rm(Cm,function(){e.controller.abort()})}var ur=null,mo=0,Ta=0,wa=null;function Dm(e,t){if(ur===null){var n=ur=[];mo=0,Ta=yu(),wa={status:"pending",value:void 0,then:function(r){n.push(r)}}}return mo++,t.then(dh,dh),t}function dh(){if(--mo===0&&ur!==null){wa!==null&&(wa.status="fulfilled");var e=ur;ur=null,Ta=0,wa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Am(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(f){n.push(f)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var f=0;f<n.length;f++)(0,n[f])(t)},function(f){for(r.status="rejected",r.reason=f,f=0;f<n.length;f++)(0,n[f])(void 0)}),r}var gh=k.S;k.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Dm(e,t),gh!==null&&gh(e,t)};var Kn=ee(null);function vo(){var e=Kn.current;return e!==null?e:gt.pooledCache}function yl(e,t){t===null?J(Kn,Kn.current):J(Kn,t.pool)}function ph(){var e=vo();return e===null?null:{parent:Ot._currentValue,pool:e}}var cr=Error(a(460)),mh=Error(a(474)),Tl=Error(a(542)),yo={then:function(){}};function vh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function wl(){}function yh(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(wl,wl),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wh(e),e;default:if(typeof t.status=="string")t.then(wl,wl);else{if(e=gt,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var f=t;f.status="fulfilled",f.value=r}},function(r){if(t.status==="pending"){var f=t;f.status="rejected",f.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wh(e),e}throw hr=t,cr}}var hr=null;function Th(){if(hr===null)throw Error(a(459));var e=hr;return hr=null,e}function wh(e){if(e===cr||e===Tl)throw Error(a(483))}var fn=!1;function To(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function dn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ot&2)!==0){var f=r.pending;return f===null?t.next=t:(t.next=f.next,f.next=t),r.pending=t,t=fl(e),lh(e,null,n),t}return hl(e,r,t,n),fl(e)}function fr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fn(e,n)}}function xo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var f=null,m=null;if(n=n.firstBaseUpdate,n!==null){do{var E={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,n=n.next}while(n!==null);m===null?f=m=t:m=m.next=t}else f=m=t;n={baseState:r.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Eo=!1;function dr(){if(Eo){var e=wa;if(e!==null)throw e}}function gr(e,t,n,r){Eo=!1;var f=e.updateQueue;fn=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var P=R,Z=P.next;P.next=null,E===null?m=Z:E.next=Z,E=P;var $=e.alternate;$!==null&&($=$.updateQueue,R=$.lastBaseUpdate,R!==E&&(R===null?$.firstBaseUpdate=Z:R.next=Z,$.lastBaseUpdate=P))}if(m!==null){var ne=f.baseState;E=0,$=Z=P=null,R=m;do{var Y=R.lane&-536870913,W=Y!==R.lane;if(W?(tt&Y)===Y:(r&Y)===Y){Y!==0&&Y===Ta&&(Eo=!0),$!==null&&($=$.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var je=e,Be=R;Y=t;var ft=n;switch(Be.tag){case 1:if(je=Be.payload,typeof je=="function"){ne=je.call(ft,ne,Y);break e}ne=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Be.payload,Y=typeof je=="function"?je.call(ft,ne,Y):je,Y==null)break e;ne=g({},ne,Y);break e;case 2:fn=!0}}Y=R.callback,Y!==null&&(e.flags|=64,W&&(e.flags|=8192),W=f.callbacks,W===null?f.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},$===null?(Z=$=W,P=ne):$=$.next=W,E|=Y;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;W=R,R=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);$===null&&(P=ne),f.baseState=P,f.firstBaseUpdate=Z,f.lastBaseUpdate=$,m===null&&(f.shared.lanes=0),En|=E,e.lanes=E,e.memoizedState=ne}}function xh(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function Eh(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xh(n[e],t)}var xa=ee(null),xl=ee(0);function Sh(e,t){e=nn,J(xl,e),J(xa,t),nn=e|t.baseLanes}function So(){J(xl,nn),J(xa,xa.current)}function _o(){nn=xl.current,ve(xa),ve(xl)}var pn=0,Ze=null,ct=null,Dt=null,El=!1,Ea=!1,Jn=!1,Sl=0,pr=0,Sa=null,Om=0;function Rt(){throw Error(a(321))}function bo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ei(e[n],t[n]))return!1;return!0}function Ro(e,t,n,r,f,m){return pn=m,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=e===null||e.memoizedState===null?sf:of,Jn=!1,m=n(r,f),Jn=!1,Ea&&(m=bh(t,n,r,f)),_h(e),m}function _h(e){k.H=Al;var t=ct!==null&&ct.next!==null;if(pn=0,Dt=ct=Ze=null,El=!1,pr=0,Sa=null,t)throw Error(a(300));e===null||zt||(e=e.dependencies,e!==null&&ml(e)&&(zt=!0))}function bh(e,t,n,r){Ze=e;var f=0;do{if(Ea&&(Sa=null),pr=0,Ea=!1,25<=f)throw Error(a(301));if(f+=1,Dt=ct=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=Hm,m=t(n,r)}while(Ea);return m}function Mm(){var e=k.H,t=e.useState()[0];return t=typeof t.then=="function"?mr(t):t,e=e.useState()[0],(ct!==null?ct.memoizedState:null)!==e&&(Ze.flags|=1024),t}function Co(){var e=Sl!==0;return Sl=0,e}function Do(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ao(e){if(El){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}El=!1}pn=0,Dt=ct=Ze=null,Ea=!1,pr=Sl=0,Sa=null}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ze.memoizedState=Dt=e:Dt=Dt.next=e,Dt}function At(){if(ct===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=Dt===null?Ze.memoizedState:Dt.next;if(t!==null)Dt=t,ct=e;else{if(e===null)throw Ze.alternate===null?Error(a(467)):Error(a(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Dt===null?Ze.memoizedState=Dt=e:Dt=Dt.next=e}return Dt}function Oo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mr(e){var t=pr;return pr+=1,Sa===null&&(Sa=[]),e=yh(Sa,e,t),t=Ze,(Dt===null?t.memoizedState:Dt.next)===null&&(t=t.alternate,k.H=t===null||t.memoizedState===null?sf:of),e}function _l(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return mr(e);if(e.$$typeof===H)return kt(e)}throw Error(a(438,String(e)))}function Mo(e){var t=null,n=Ze.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=Ze.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(f){return f.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Oo(),Ze.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=Ge;return t.index++,n}function Qi(e,t){return typeof t=="function"?t(e):t}function bl(e){var t=At();return Po(t,ct,e)}function Po(e,t,n){var r=e.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=n;var f=e.baseQueue,m=r.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}t.baseQueue=f=m,r.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{t=f.next;var R=E=null,P=null,Z=t,$=!1;do{var ne=Z.lane&-536870913;if(ne!==Z.lane?(tt&ne)===ne:(pn&ne)===ne){var Y=Z.revertLane;if(Y===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ne===Ta&&($=!0);else if((pn&Y)===Y){Z=Z.next,Y===Ta&&($=!0);continue}else ne={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},P===null?(R=P=ne,E=m):P=P.next=ne,Ze.lanes|=Y,En|=Y;ne=Z.action,Jn&&n(m,ne),m=Z.hasEagerState?Z.eagerState:n(m,ne)}else Y={lane:ne,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},P===null?(R=P=Y,E=m):P=P.next=Y,Ze.lanes|=ne,En|=ne;Z=Z.next}while(Z!==null&&Z!==t);if(P===null?E=m:P.next=R,!ei(m,e.memoizedState)&&(zt=!0,$&&(n=wa,n!==null)))throw n;e.memoizedState=m,e.baseState=E,e.baseQueue=P,r.lastRenderedState=m}return f===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function zo(e){var t=At(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,f=n.pending,m=t.memoizedState;if(f!==null){n.pending=null;var E=f=f.next;do m=e(m,E.action),E=E.next;while(E!==f);ei(m,t.memoizedState)||(zt=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),n.lastRenderedState=m}return[m,r]}function Rh(e,t,n){var r=Ze,f=At(),m=st;if(m){if(n===void 0)throw Error(a(407));n=n()}else n=t();var E=!ei((ct||f).memoizedState,n);E&&(f.memoizedState=n,zt=!0),f=f.queue;var R=Ah.bind(null,r,f,e);if(vr(2048,8,R,[e]),f.getSnapshot!==t||E||Dt!==null&&Dt.memoizedState.tag&1){if(r.flags|=2048,_a(9,Rl(),Dh.bind(null,r,f,n,t),null),gt===null)throw Error(a(349));m||(pn&124)!==0||Ch(r,t,n)}return n}function Ch(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t=Oo(),Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Dh(e,t,n,r){t.value=n,t.getSnapshot=r,Oh(t)&&Mh(e)}function Ah(e,t,n){return n(function(){Oh(t)&&Mh(e)})}function Oh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ei(e,n)}catch{return!0}}function Mh(e){var t=pa(e,2);t!==null&&li(t,e,2)}function Lo(e){var t=Kt();if(typeof e=="function"){var n=e;if(e=n(),Jn){it(!0);try{n()}finally{it(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:e},t}function Ph(e,t,n,r){return e.baseState=n,Po(e,ct,typeof r=="function"?r:Qi)}function Pm(e,t,n,r,f){if(Dl(e))throw Error(a(485));if(e=t.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};k.T!==null?n(!0):m.isTransition=!1,r(m),n=t.pending,n===null?(m.next=t.pending=m,zh(t,m)):(m.next=n.next,t.pending=n.next=m)}}function zh(e,t){var n=t.action,r=t.payload,f=e.state;if(t.isTransition){var m=k.T,E={};k.T=E;try{var R=n(f,r),P=k.S;P!==null&&P(E,R),Lh(e,t,R)}catch(Z){No(e,t,Z)}finally{k.T=m}}else try{m=n(f,r),Lh(e,t,m)}catch(Z){No(e,t,Z)}}function Lh(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){Nh(e,t,r)},function(r){return No(e,t,r)}):Nh(e,t,n)}function Nh(e,t,n){t.status="fulfilled",t.value=n,Bh(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,zh(e,n)))}function No(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,Bh(t),t=t.next;while(t!==r)}e.action=null}function Bh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Hh(e,t){return t}function Uh(e,t){if(st){var n=gt.formState;if(n!==null){e:{var r=Ze;if(st){if(St){t:{for(var f=St,m=zi;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ri(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){St=Ri(f.nextSibling),r=f.data==="F!";break e}}Wn(r)}r=!1}r&&(t=n[0])}}return n=Kt(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hh,lastRenderedState:t},n.queue=r,n=af.bind(null,Ze,r),r.dispatch=n,r=Lo(!1),m=jo.bind(null,Ze,!1,r.queue),r=Kt(),f={state:t,dispatch:null,action:e,pending:null},r.queue=f,n=Pm.bind(null,Ze,f,m,n),f.dispatch=n,r.memoizedState=e,[t,n,!1]}function Fh(e){var t=At();return jh(t,ct,e)}function jh(e,t,n){if(t=Po(e,t,Hh)[0],e=bl(Qi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=mr(t)}catch(E){throw E===cr?Tl:E}else r=t;t=At();var f=t.queue,m=f.dispatch;return n!==t.memoizedState&&(Ze.flags|=2048,_a(9,Rl(),zm.bind(null,f,n),null)),[r,m,e]}function zm(e,t){e.action=t}function Gh(e){var t=At(),n=ct;if(n!==null)return jh(t,n,e);At(),t=t.memoizedState,n=At();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function _a(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=Ze.updateQueue,t===null&&(t=Oo(),Ze.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rl(){return{destroy:void 0,resource:void 0}}function kh(){return At().memoizedState}function Cl(e,t,n,r){var f=Kt();r=r===void 0?null:r,Ze.flags|=e,f.memoizedState=_a(1|t,Rl(),n,r)}function vr(e,t,n,r){var f=At();r=r===void 0?null:r;var m=f.memoizedState.inst;ct!==null&&r!==null&&bo(r,ct.memoizedState.deps)?f.memoizedState=_a(t,m,n,r):(Ze.flags|=e,f.memoizedState=_a(1|t,m,n,r))}function Vh(e,t){Cl(8390656,8,e,t)}function qh(e,t){vr(2048,8,e,t)}function Ih(e,t){return vr(4,2,e,t)}function Zh(e,t){return vr(4,4,e,t)}function Yh(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wh(e,t,n){n=n!=null?n.concat([e]):null,vr(4,4,Yh.bind(null,t,e),n)}function Bo(){}function Xh(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qh(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&bo(t,r[1]))return r[0];if(r=e(),Jn){it(!0);try{e()}finally{it(!1)}}return n.memoizedState=[r,t],r}function Ho(e,t,n){return n===void 0||(pn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=ed(),Ze.lanes|=e,En|=e,n)}function Kh(e,t,n,r){return ei(n,t)?n:xa.current!==null?(e=Ho(e,n,r),ei(e,t)||(zt=!0),e):(pn&42)===0?(zt=!0,e.memoizedState=n):(e=ed(),Ze.lanes|=e,En|=e,t)}function Jh(e,t,n,r,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var E=k.T,R={};k.T=R,jo(e,!1,t,n);try{var P=f(),Z=k.S;if(Z!==null&&Z(R,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var $=Am(P,r);yr(e,t,$,ri(e))}else yr(e,t,r,ri(e))}catch(ne){yr(e,t,{then:function(){},status:"rejected",reason:ne},ri())}finally{oe.p=m,k.T=E}}function Lm(){}function Uo(e,t,n,r){if(e.tag!==5)throw Error(a(476));var f=$h(e).queue;Jh(e,f,t,me,n===null?Lm:function(){return ef(e),n(r)})}function $h(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:me},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ef(e){var t=$h(e).next.queue;yr(e,t,{},ri())}function Fo(){return kt(Br)}function tf(){return At().memoizedState}function nf(){return At().memoizedState}function Nm(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ri();e=dn(n);var r=gn(t,e,n);r!==null&&(li(r,t,n),fr(r,t,n)),t={cache:po()},e.payload=t;return}t=t.return}}function Bm(e,t,n){var r=ri();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Dl(e)?rf(t,n):(n=ao(e,t,n,r),n!==null&&(li(n,e,r),lf(n,t,r)))}function af(e,t,n){var r=ri();yr(e,t,n,r)}function yr(e,t,n,r){var f={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dl(e))rf(t,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var E=t.lastRenderedState,R=m(E,n);if(f.hasEagerState=!0,f.eagerState=R,ei(R,E))return hl(e,t,f,0),gt===null&&cl(),!1}catch{}finally{}if(n=ao(e,t,f,r),n!==null)return li(n,e,r),lf(n,t,r),!0}return!1}function jo(e,t,n,r){if(r={lane:2,revertLane:yu(),action:r,hasEagerState:!1,eagerState:null,next:null},Dl(e)){if(t)throw Error(a(479))}else t=ao(e,n,r,2),t!==null&&li(t,e,2)}function Dl(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function rf(e,t){Ea=El=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lf(e,t,n){if((n&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fn(e,n)}}var Al={readContext:kt,use:_l,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},sf={readContext:kt,use:_l,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:Vh,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Cl(4194308,4,Yh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cl(4194308,4,e,t)},useInsertionEffect:function(e,t){Cl(4,2,e,t)},useMemo:function(e,t){var n=Kt();t=t===void 0?null:t;var r=e();if(Jn){it(!0);try{e()}finally{it(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Kt();if(n!==void 0){var f=n(t);if(Jn){it(!0);try{n(t)}finally{it(!1)}}}else f=t;return r.memoizedState=r.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},r.queue=e,e=e.dispatch=Bm.bind(null,Ze,e),[r.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:function(e){e=Lo(e);var t=e.queue,n=af.bind(null,Ze,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Bo,useDeferredValue:function(e,t){var n=Kt();return Ho(n,e,t)},useTransition:function(){var e=Lo(!1);return e=Jh.bind(null,Ze,e.queue,!0,!1),Kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Ze,f=Kt();if(st){if(n===void 0)throw Error(a(407));n=n()}else{if(n=t(),gt===null)throw Error(a(349));(tt&124)!==0||Ch(r,t,n)}f.memoizedState=n;var m={value:n,getSnapshot:t};return f.queue=m,Vh(Ah.bind(null,r,m,e),[e]),r.flags|=2048,_a(9,Rl(),Dh.bind(null,r,m,n,t),null),n},useId:function(){var e=Kt(),t=gt.identifierPrefix;if(st){var n=Yi,r=Zi;n=(r&~(1<<32-S(r)-1)).toString(32)+n,t=""+t+"R"+n,n=Sl++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=Om++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Fo,useFormState:Uh,useActionState:Uh,useOptimistic:function(e){var t=Kt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=jo.bind(null,Ze,!0,n),n.dispatch=t,[e,t]},useMemoCache:Mo,useCacheRefresh:function(){return Kt().memoizedState=Nm.bind(null,Ze)}},of={readContext:kt,use:_l,useCallback:Xh,useContext:kt,useEffect:qh,useImperativeHandle:Wh,useInsertionEffect:Ih,useLayoutEffect:Zh,useMemo:Qh,useReducer:bl,useRef:kh,useState:function(){return bl(Qi)},useDebugValue:Bo,useDeferredValue:function(e,t){var n=At();return Kh(n,ct.memoizedState,e,t)},useTransition:function(){var e=bl(Qi)[0],t=At().memoizedState;return[typeof e=="boolean"?e:mr(e),t]},useSyncExternalStore:Rh,useId:tf,useHostTransitionStatus:Fo,useFormState:Fh,useActionState:Fh,useOptimistic:function(e,t){var n=At();return Ph(n,ct,e,t)},useMemoCache:Mo,useCacheRefresh:nf},Hm={readContext:kt,use:_l,useCallback:Xh,useContext:kt,useEffect:qh,useImperativeHandle:Wh,useInsertionEffect:Ih,useLayoutEffect:Zh,useMemo:Qh,useReducer:zo,useRef:kh,useState:function(){return zo(Qi)},useDebugValue:Bo,useDeferredValue:function(e,t){var n=At();return ct===null?Ho(n,e,t):Kh(n,ct.memoizedState,e,t)},useTransition:function(){var e=zo(Qi)[0],t=At().memoizedState;return[typeof e=="boolean"?e:mr(e),t]},useSyncExternalStore:Rh,useId:tf,useHostTransitionStatus:Fo,useFormState:Gh,useActionState:Gh,useOptimistic:function(e,t){var n=At();return ct!==null?Ph(n,ct,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Mo,useCacheRefresh:nf},ba=null,Tr=0;function Ol(e){var t=Tr;return Tr+=1,ba===null&&(ba=[]),yh(ba,e,t)}function wr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ml(e,t){throw t.$$typeof===v?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function uf(e){var t=e._init;return t(e._payload)}function cf(e){function t(G,B){if(e){var q=G.deletions;q===null?(G.deletions=[B],G.flags|=16):q.push(B)}}function n(G,B){if(!e)return null;for(;B!==null;)t(G,B),B=B.sibling;return null}function r(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function f(G,B){return G=Ii(G,B),G.index=0,G.sibling=null,G}function m(G,B,q){return G.index=q,e?(q=G.alternate,q!==null?(q=q.index,q<B?(G.flags|=67108866,B):q):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function E(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function R(G,B,q,te){return B===null||B.tag!==6?(B=lo(q,G.mode,te),B.return=G,B):(B=f(B,q),B.return=G,B)}function P(G,B,q,te){var Se=q.type;return Se===_?$(G,B,q.props.children,te,q.key):B!==null&&(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===ye&&uf(Se)===B.type)?(B=f(B,q.props),wr(B,q),B.return=G,B):(B=dl(q.type,q.key,q.props,null,G.mode,te),wr(B,q),B.return=G,B)}function Z(G,B,q,te){return B===null||B.tag!==4||B.stateNode.containerInfo!==q.containerInfo||B.stateNode.implementation!==q.implementation?(B=so(q,G.mode,te),B.return=G,B):(B=f(B,q.children||[]),B.return=G,B)}function $(G,B,q,te,Se){return B===null||B.tag!==7?(B=qn(q,G.mode,te,Se),B.return=G,B):(B=f(B,q),B.return=G,B)}function ne(G,B,q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=lo(""+B,G.mode,q),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case y:return q=dl(B.type,B.key,B.props,null,G.mode,q),wr(q,B),q.return=G,q;case w:return B=so(B,G.mode,q),B.return=G,B;case ye:var te=B._init;return B=te(B._payload),ne(G,B,q)}if(ze(B)||ue(B))return B=qn(B,G.mode,q,null),B.return=G,B;if(typeof B.then=="function")return ne(G,Ol(B),q);if(B.$$typeof===H)return ne(G,vl(G,B),q);Ml(G,B)}return null}function Y(G,B,q,te){var Se=B!==null?B.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Se!==null?null:R(G,B,""+q,te);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case y:return q.key===Se?P(G,B,q,te):null;case w:return q.key===Se?Z(G,B,q,te):null;case ye:return Se=q._init,q=Se(q._payload),Y(G,B,q,te)}if(ze(q)||ue(q))return Se!==null?null:$(G,B,q,te,null);if(typeof q.then=="function")return Y(G,B,Ol(q),te);if(q.$$typeof===H)return Y(G,B,vl(G,q),te);Ml(G,q)}return null}function W(G,B,q,te,Se){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return G=G.get(q)||null,R(B,G,""+te,Se);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return G=G.get(te.key===null?q:te.key)||null,P(B,G,te,Se);case w:return G=G.get(te.key===null?q:te.key)||null,Z(B,G,te,Se);case ye:var We=te._init;return te=We(te._payload),W(G,B,q,te,Se)}if(ze(te)||ue(te))return G=G.get(q)||null,$(B,G,te,Se,null);if(typeof te.then=="function")return W(G,B,q,Ol(te),Se);if(te.$$typeof===H)return W(G,B,q,vl(B,te),Se);Ml(B,te)}return null}function je(G,B,q,te){for(var Se=null,We=null,Ae=B,He=B=0,Nt=null;Ae!==null&&He<q.length;He++){Ae.index>He?(Nt=Ae,Ae=null):Nt=Ae.sibling;var rt=Y(G,Ae,q[He],te);if(rt===null){Ae===null&&(Ae=Nt);break}e&&Ae&&rt.alternate===null&&t(G,Ae),B=m(rt,B,He),We===null?Se=rt:We.sibling=rt,We=rt,Ae=Nt}if(He===q.length)return n(G,Ae),st&&Zn(G,He),Se;if(Ae===null){for(;He<q.length;He++)Ae=ne(G,q[He],te),Ae!==null&&(B=m(Ae,B,He),We===null?Se=Ae:We.sibling=Ae,We=Ae);return st&&Zn(G,He),Se}for(Ae=r(Ae);He<q.length;He++)Nt=W(Ae,G,He,q[He],te),Nt!==null&&(e&&Nt.alternate!==null&&Ae.delete(Nt.key===null?He:Nt.key),B=m(Nt,B,He),We===null?Se=Nt:We.sibling=Nt,We=Nt);return e&&Ae.forEach(function(Mn){return t(G,Mn)}),st&&Zn(G,He),Se}function Be(G,B,q,te){if(q==null)throw Error(a(151));for(var Se=null,We=null,Ae=B,He=B=0,Nt=null,rt=q.next();Ae!==null&&!rt.done;He++,rt=q.next()){Ae.index>He?(Nt=Ae,Ae=null):Nt=Ae.sibling;var Mn=Y(G,Ae,rt.value,te);if(Mn===null){Ae===null&&(Ae=Nt);break}e&&Ae&&Mn.alternate===null&&t(G,Ae),B=m(Mn,B,He),We===null?Se=Mn:We.sibling=Mn,We=Mn,Ae=Nt}if(rt.done)return n(G,Ae),st&&Zn(G,He),Se;if(Ae===null){for(;!rt.done;He++,rt=q.next())rt=ne(G,rt.value,te),rt!==null&&(B=m(rt,B,He),We===null?Se=rt:We.sibling=rt,We=rt);return st&&Zn(G,He),Se}for(Ae=r(Ae);!rt.done;He++,rt=q.next())rt=W(Ae,G,He,rt.value,te),rt!==null&&(e&&rt.alternate!==null&&Ae.delete(rt.key===null?He:rt.key),B=m(rt,B,He),We===null?Se=rt:We.sibling=rt,We=rt);return e&&Ae.forEach(function(Uv){return t(G,Uv)}),st&&Zn(G,He),Se}function ft(G,B,q,te){if(typeof q=="object"&&q!==null&&q.type===_&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case y:e:{for(var Se=q.key;B!==null;){if(B.key===Se){if(Se=q.type,Se===_){if(B.tag===7){n(G,B.sibling),te=f(B,q.props.children),te.return=G,G=te;break e}}else if(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===ye&&uf(Se)===B.type){n(G,B.sibling),te=f(B,q.props),wr(te,q),te.return=G,G=te;break e}n(G,B);break}else t(G,B);B=B.sibling}q.type===_?(te=qn(q.props.children,G.mode,te,q.key),te.return=G,G=te):(te=dl(q.type,q.key,q.props,null,G.mode,te),wr(te,q),te.return=G,G=te)}return E(G);case w:e:{for(Se=q.key;B!==null;){if(B.key===Se)if(B.tag===4&&B.stateNode.containerInfo===q.containerInfo&&B.stateNode.implementation===q.implementation){n(G,B.sibling),te=f(B,q.children||[]),te.return=G,G=te;break e}else{n(G,B);break}else t(G,B);B=B.sibling}te=so(q,G.mode,te),te.return=G,G=te}return E(G);case ye:return Se=q._init,q=Se(q._payload),ft(G,B,q,te)}if(ze(q))return je(G,B,q,te);if(ue(q)){if(Se=ue(q),typeof Se!="function")throw Error(a(150));return q=Se.call(q),Be(G,B,q,te)}if(typeof q.then=="function")return ft(G,B,Ol(q),te);if(q.$$typeof===H)return ft(G,B,vl(G,q),te);Ml(G,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,B!==null&&B.tag===6?(n(G,B.sibling),te=f(B,q),te.return=G,G=te):(n(G,B),te=lo(q,G.mode,te),te.return=G,G=te),E(G)):n(G,B)}return function(G,B,q,te){try{Tr=0;var Se=ft(G,B,q,te);return ba=null,Se}catch(Ae){if(Ae===cr||Ae===Tl)throw Ae;var We=ti(29,Ae,null,G.mode);return We.lanes=te,We.return=G,We}finally{}}}var Ra=cf(!0),hf=cf(!1),mi=ee(null),Li=null;function mn(e){var t=e.alternate;J(Mt,Mt.current&1),J(mi,e),Li===null&&(t===null||xa.current!==null||t.memoizedState!==null)&&(Li=e)}function ff(e){if(e.tag===22){if(J(Mt,Mt.current),J(mi,e),Li===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Li=e)}}else vn()}function vn(){J(Mt,Mt.current),J(mi,mi.current)}function Ki(e){ve(mi),Li===e&&(Li=null),ve(Mt)}var Mt=ee(0);function Pl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Ou(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Go(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:g({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ko={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ri(),f=dn(r);f.payload=t,n!=null&&(f.callback=n),t=gn(e,f,r),t!==null&&(li(t,e,r),fr(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ri(),f=dn(r);f.tag=1,f.payload=t,n!=null&&(f.callback=n),t=gn(e,f,r),t!==null&&(li(t,e,r),fr(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ri(),r=dn(n);r.tag=2,t!=null&&(r.callback=t),t=gn(e,r,n),t!==null&&(li(t,e,n),fr(t,e,n))}};function df(e,t,n,r,f,m,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,m,E):t.prototype&&t.prototype.isPureReactComponent?!ir(n,r)||!ir(f,m):!0}function gf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ko.enqueueReplaceState(t,t.state,null)}function $n(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=g({},n));for(var f in e)n[f]===void 0&&(n[f]=e[f])}return n}var zl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function pf(e){zl(e)}function mf(e){console.error(e)}function vf(e){zl(e)}function Ll(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function yf(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Vo(e,t,n){return n=dn(n),n.tag=3,n.payload={element:null},n.callback=function(){Ll(e,t)},n}function Tf(e){return e=dn(e),e.tag=3,e}function wf(e,t,n,r){var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var m=r.value;e.payload=function(){return f(m)},e.callback=function(){yf(t,n,r)}}var E=n.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){yf(t,n,r),typeof f!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var R=r.stack;this.componentDidCatch(r.value,{componentStack:R!==null?R:""})})}function Um(e,t,n,r,f){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&sr(t,n,f,!0),n=mi.current,n!==null){switch(n.tag){case 13:return Li===null?du():n.alternate===null&&_t===0&&(_t=3),n.flags&=-257,n.flags|=65536,n.lanes=f,r===yo?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),pu(e,r,f)),!1;case 22:return n.flags|=65536,r===yo?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),pu(e,r,f)),!1}throw Error(a(435,n.tag))}return pu(e,r,f),du(),!1}if(st)return t=mi.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=f,r!==co&&(e=Error(a(422),{cause:r}),lr(fi(e,n)))):(r!==co&&(t=Error(a(423),{cause:r}),lr(fi(t,n))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,r=fi(r,n),f=Vo(e.stateNode,r,f),xo(e,f),_t!==4&&(_t=2)),!1;var m=Error(a(520),{cause:r});if(m=fi(m,n),Cr===null?Cr=[m]:Cr.push(m),_t!==4&&(_t=2),t===null)return!0;r=fi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=f&-f,n.lanes|=e,e=Vo(n.stateNode,r,e),xo(n,e),!1;case 1:if(t=n.type,m=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Sn===null||!Sn.has(m))))return n.flags|=65536,f&=-f,n.lanes|=f,f=Tf(f),wf(f,e,n,r),xo(n,f),!1}n=n.return}while(n!==null);return!1}var xf=Error(a(461)),zt=!1;function Bt(e,t,n,r){t.child=e===null?hf(t,null,n,r):Ra(t,e.child,n,r)}function Ef(e,t,n,r,f){n=n.render;var m=t.ref;if("ref"in r){var E={};for(var R in r)R!=="ref"&&(E[R]=r[R])}else E=r;return Qn(t),r=Ro(e,t,n,E,m,f),R=Co(),e!==null&&!zt?(Do(e,t,f),Ji(e,t,f)):(st&&R&&oo(t),t.flags|=1,Bt(e,t,r,f),t.child)}function Sf(e,t,n,r,f){if(e===null){var m=n.type;return typeof m=="function"&&!ro(m)&&m.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=m,_f(e,t,m,r,f)):(e=dl(n.type,null,r,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!Ko(e,f)){var E=m.memoizedProps;if(n=n.compare,n=n!==null?n:ir,n(E,r)&&e.ref===t.ref)return Ji(e,t,f)}return t.flags|=1,e=Ii(m,r),e.ref=t.ref,e.return=t,t.child=e}function _f(e,t,n,r,f){if(e!==null){var m=e.memoizedProps;if(ir(m,r)&&e.ref===t.ref)if(zt=!1,t.pendingProps=r=m,Ko(e,f))(e.flags&131072)!==0&&(zt=!0);else return t.lanes=e.lanes,Ji(e,t,f)}return qo(e,t,n,r,f)}function bf(e,t,n){var r=t.pendingProps,f=r.children,m=e!==null?e.memoizedState:null;if(r.mode==="hidden"){if((t.flags&128)!==0){if(r=m!==null?m.baseLanes|n:n,e!==null){for(f=t.child=e.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;t.childLanes=m&~r}else t.childLanes=0,t.child=null;return Rf(e,t,r,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&yl(t,m!==null?m.cachePool:null),m!==null?Sh(t,m):So(),ff(t);else return t.lanes=t.childLanes=536870912,Rf(e,t,m!==null?m.baseLanes|n:n,n)}else m!==null?(yl(t,m.cachePool),Sh(t,m),vn(),t.memoizedState=null):(e!==null&&yl(t,null),So(),vn());return Bt(e,t,f,n),t.child}function Rf(e,t,n,r){var f=vo();return f=f===null?null:{parent:Ot._currentValue,pool:f},t.memoizedState={baseLanes:n,cachePool:f},e!==null&&yl(t,null),So(),ff(t),e!==null&&sr(e,t,r,!0),null}function Nl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(a(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function qo(e,t,n,r,f){return Qn(t),n=Ro(e,t,n,r,void 0,f),r=Co(),e!==null&&!zt?(Do(e,t,f),Ji(e,t,f)):(st&&r&&oo(t),t.flags|=1,Bt(e,t,n,f),t.child)}function Cf(e,t,n,r,f,m){return Qn(t),t.updateQueue=null,n=bh(t,r,n,f),_h(e),r=Co(),e!==null&&!zt?(Do(e,t,m),Ji(e,t,m)):(st&&r&&oo(t),t.flags|=1,Bt(e,t,n,m),t.child)}function Df(e,t,n,r,f){if(Qn(t),t.stateNode===null){var m=ma,E=n.contextType;typeof E=="object"&&E!==null&&(m=kt(E)),m=new n(r,m),t.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ko,t.stateNode=m,m._reactInternals=t,m=t.stateNode,m.props=r,m.state=t.memoizedState,m.refs={},To(t),E=n.contextType,m.context=typeof E=="object"&&E!==null?kt(E):ma,m.state=t.memoizedState,E=n.getDerivedStateFromProps,typeof E=="function"&&(Go(t,n,E,r),m.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&ko.enqueueReplaceState(m,m.state,null),gr(t,r,m,f),dr(),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){m=t.stateNode;var R=t.memoizedProps,P=$n(n,R);m.props=P;var Z=m.context,$=n.contextType;E=ma,typeof $=="object"&&$!==null&&(E=kt($));var ne=n.getDerivedStateFromProps;$=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",R=t.pendingProps!==R,$||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(R||Z!==E)&&gf(t,m,r,E),fn=!1;var Y=t.memoizedState;m.state=Y,gr(t,r,m,f),dr(),Z=t.memoizedState,R||Y!==Z||fn?(typeof ne=="function"&&(Go(t,n,ne,r),Z=t.memoizedState),(P=fn||df(t,n,P,r,Y,Z,E))?($||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=Z),m.props=r,m.state=Z,m.context=E,r=P):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{m=t.stateNode,wo(e,t),E=t.memoizedProps,$=$n(n,E),m.props=$,ne=t.pendingProps,Y=m.context,Z=n.contextType,P=ma,typeof Z=="object"&&Z!==null&&(P=kt(Z)),R=n.getDerivedStateFromProps,(Z=typeof R=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==ne||Y!==P)&&gf(t,m,r,P),fn=!1,Y=t.memoizedState,m.state=Y,gr(t,r,m,f),dr();var W=t.memoizedState;E!==ne||Y!==W||fn||e!==null&&e.dependencies!==null&&ml(e.dependencies)?(typeof R=="function"&&(Go(t,n,R,r),W=t.memoizedState),($=fn||df(t,n,$,r,Y,W,P)||e!==null&&e.dependencies!==null&&ml(e.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(r,W,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(r,W,P)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=W),m.props=r,m.state=W,m.context=P,r=$):(typeof m.componentDidUpdate!="function"||E===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),r=!1)}return m=r,Nl(e,t),r=(t.flags&128)!==0,m||r?(m=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:m.render(),t.flags|=1,e!==null&&r?(t.child=Ra(t,e.child,null,f),t.child=Ra(t,null,n,f)):Bt(e,t,n,f),t.memoizedState=m.state,e=t.child):e=Ji(e,t,f),e}function Af(e,t,n,r){return rr(),t.flags|=256,Bt(e,t,n,r),t.child}var Io={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zo(e){return{baseLanes:e,cachePool:ph()}}function Yo(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=vi),e}function Of(e,t,n){var r=t.pendingProps,f=!1,m=(t.flags&128)!==0,E;if((E=m)||(E=e!==null&&e.memoizedState===null?!1:(Mt.current&2)!==0),E&&(f=!0,t.flags&=-129),E=(t.flags&32)!==0,t.flags&=-33,e===null){if(st){if(f?mn(t):vn(),st){var R=St,P;if(P=R){e:{for(P=R,R=zi;P.nodeType!==8;){if(!R){R=null;break e}if(P=Ri(P.nextSibling),P===null){R=null;break e}}R=P}R!==null?(t.memoizedState={dehydrated:R,treeContext:In!==null?{id:Zi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},P=ti(18,null,null,0),P.stateNode=R,P.return=t,t.child=P,Zt=t,St=null,P=!0):P=!1}P||Wn(t)}if(R=t.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return Ou(R)?t.lanes=32:t.lanes=536870912,null;Ki(t)}return R=r.children,r=r.fallback,f?(vn(),f=t.mode,R=Bl({mode:"hidden",children:R},f),r=qn(r,f,n,null),R.return=t,r.return=t,R.sibling=r,t.child=R,f=t.child,f.memoizedState=Zo(n),f.childLanes=Yo(e,E,n),t.memoizedState=Io,r):(mn(t),Wo(t,R))}if(P=e.memoizedState,P!==null&&(R=P.dehydrated,R!==null)){if(m)t.flags&256?(mn(t),t.flags&=-257,t=Xo(e,t,n)):t.memoizedState!==null?(vn(),t.child=e.child,t.flags|=128,t=null):(vn(),f=r.fallback,R=t.mode,r=Bl({mode:"visible",children:r.children},R),f=qn(f,R,n,null),f.flags|=2,r.return=t,f.return=t,r.sibling=f,t.child=r,Ra(t,e.child,null,n),r=t.child,r.memoizedState=Zo(n),r.childLanes=Yo(e,E,n),t.memoizedState=Io,t=f);else if(mn(t),Ou(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var Z=E.dgst;E=Z,r=Error(a(419)),r.stack="",r.digest=E,lr({value:r,source:null,stack:null}),t=Xo(e,t,n)}else if(zt||sr(e,t,n,!1),E=(n&e.childLanes)!==0,zt||E){if(E=gt,E!==null&&(r=n&-n,r=(r&42)!==0?1:Ia(r),r=(r&(E.suspendedLanes|n))!==0?0:r,r!==0&&r!==P.retryLane))throw P.retryLane=r,pa(e,r),li(E,e,r),xf;R.data==="$?"||du(),t=Xo(e,t,n)}else R.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=P.treeContext,St=Ri(R.nextSibling),Zt=t,st=!0,Yn=null,zi=!1,e!==null&&(gi[pi++]=Zi,gi[pi++]=Yi,gi[pi++]=In,Zi=e.id,Yi=e.overflow,In=t),t=Wo(t,r.children),t.flags|=4096);return t}return f?(vn(),f=r.fallback,R=t.mode,P=e.child,Z=P.sibling,r=Ii(P,{mode:"hidden",children:r.children}),r.subtreeFlags=P.subtreeFlags&65011712,Z!==null?f=Ii(Z,f):(f=qn(f,R,n,null),f.flags|=2),f.return=t,r.return=t,r.sibling=f,t.child=r,r=f,f=t.child,R=e.child.memoizedState,R===null?R=Zo(n):(P=R.cachePool,P!==null?(Z=Ot._currentValue,P=P.parent!==Z?{parent:Z,pool:Z}:P):P=ph(),R={baseLanes:R.baseLanes|n,cachePool:P}),f.memoizedState=R,f.childLanes=Yo(e,E,n),t.memoizedState=Io,r):(mn(t),n=e.child,e=n.sibling,n=Ii(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(E=t.deletions,E===null?(t.deletions=[e],t.flags|=16):E.push(e)),t.child=n,t.memoizedState=null,n)}function Wo(e,t){return t=Bl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Bl(e,t){return e=ti(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Xo(e,t,n){return Ra(t,e.child,null,n),e=Wo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fo(e.return,t,n)}function Qo(e,t,n,r,f){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:f}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=r,m.tail=n,m.tailMode=f)}function Pf(e,t,n){var r=t.pendingProps,f=r.revealOrder,m=r.tail;if(Bt(e,t,r.children,n),r=Mt.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mf(e,n,t);else if(e.tag===19)Mf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(J(Mt,r),f){case"forwards":for(n=t.child,f=null;n!==null;)e=n.alternate,e!==null&&Pl(e)===null&&(f=n),n=n.sibling;n=f,n===null?(f=t.child,t.child=null):(f=n.sibling,n.sibling=null),Qo(t,!1,f,n,m);break;case"backwards":for(n=null,f=t.child,t.child=null;f!==null;){if(e=f.alternate,e!==null&&Pl(e)===null){t.child=f;break}e=f.sibling,f.sibling=n,n=f,f=e}Qo(t,!0,n,null,m);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ji(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),En|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(sr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,n=Ii(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ii(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ko(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ml(e)))}function Fm(e,t,n){switch(t.tag){case 3:lt(t,t.stateNode.containerInfo),hn(t,Ot,e.memoizedState.cache),rr();break;case 27:case 5:vt(t);break;case 4:lt(t,t.stateNode.containerInfo);break;case 10:hn(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(mn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Of(e,t,n):(mn(t),e=Ji(e,t,n),e!==null?e.sibling:null);mn(t);break;case 19:var f=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(sr(e,t,n,!1),r=(n&t.childLanes)!==0),f){if(r)return Pf(e,t,n);t.flags|=128}if(f=t.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),J(Mt,Mt.current),r)break;return null;case 22:case 23:return t.lanes=0,bf(e,t,n);case 24:hn(t,Ot,e.memoizedState.cache)}return Ji(e,t,n)}function zf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)zt=!0;else{if(!Ko(e,n)&&(t.flags&128)===0)return zt=!1,Fm(e,t,n);zt=(e.flags&131072)!==0}else zt=!1,st&&(t.flags&1048576)!==0&&oh(t,pl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,f=r._init;if(r=f(r._payload),t.type=r,typeof r=="function")ro(r)?(e=$n(r,e),t.tag=1,t=Df(null,t,r,e,n)):(t.tag=0,t=qo(null,t,r,e,n));else{if(r!=null){if(f=r.$$typeof,f===ae){t.tag=11,t=Ef(null,t,r,e,n);break e}else if(f===pe){t.tag=14,t=Sf(null,t,r,e,n);break e}}throw t=Pe(r)||r,Error(a(306,t,""))}}return t;case 0:return qo(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,f=$n(r,t.pendingProps),Df(e,t,r,f,n);case 3:e:{if(lt(t,t.stateNode.containerInfo),e===null)throw Error(a(387));r=t.pendingProps;var m=t.memoizedState;f=m.element,wo(e,t),gr(t,r,null,n);var E=t.memoizedState;if(r=E.cache,hn(t,Ot,r),r!==m.cache&&go(t,[Ot],n,!0),dr(),r=E.element,m.isDehydrated)if(m={element:r,isDehydrated:!1,cache:E.cache},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){t=Af(e,t,r,n);break e}else if(r!==f){f=fi(Error(a(424)),t),lr(f),t=Af(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(St=Ri(e.firstChild),Zt=t,st=!0,Yn=null,zi=!0,n=hf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(rr(),r===f){t=Ji(e,t,n);break e}Bt(e,t,r,n)}t=t.child}return t;case 26:return Nl(e,t),e===null?(n=Hd(t.type,null,t.pendingProps,null))?t.memoizedState=n:st||(n=t.type,e=t.pendingProps,r=Ql(Ce.current).createElement(n),r[re]=t,r[he]=e,Ut(r,n,e),at(r),t.stateNode=r):t.memoizedState=Hd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return vt(t),e===null&&st&&(r=t.stateNode=Ld(t.type,t.pendingProps,Ce.current),Zt=t,zi=!0,f=St,Rn(t.type)?(Mu=f,St=Ri(r.firstChild)):St=f),Bt(e,t,t.pendingProps.children,n),Nl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&st&&((f=r=St)&&(r=dv(r,t.type,t.pendingProps,zi),r!==null?(t.stateNode=r,Zt=t,St=Ri(r.firstChild),zi=!1,f=!0):f=!1),f||Wn(t)),vt(t),f=t.type,m=t.pendingProps,E=e!==null?e.memoizedProps:null,r=m.children,Cu(f,m)?r=null:E!==null&&Cu(f,E)&&(t.flags|=32),t.memoizedState!==null&&(f=Ro(e,t,Mm,null,null,n),Br._currentValue=f),Nl(e,t),Bt(e,t,r,n),t.child;case 6:return e===null&&st&&((e=n=St)&&(n=gv(n,t.pendingProps,zi),n!==null?(t.stateNode=n,Zt=t,St=null,e=!0):e=!1),e||Wn(t)),null;case 13:return Of(e,t,n);case 4:return lt(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ra(t,null,r,n):Bt(e,t,r,n),t.child;case 11:return Ef(e,t,t.type,t.pendingProps,n);case 7:return Bt(e,t,t.pendingProps,n),t.child;case 8:return Bt(e,t,t.pendingProps.children,n),t.child;case 12:return Bt(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,hn(t,t.type,r.value),Bt(e,t,r.children,n),t.child;case 9:return f=t.type._context,r=t.pendingProps.children,Qn(t),f=kt(f),r=r(f),t.flags|=1,Bt(e,t,r,n),t.child;case 14:return Sf(e,t,t.type,t.pendingProps,n);case 15:return _f(e,t,t.type,t.pendingProps,n);case 19:return Pf(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},e===null?(n=Bl(r,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Ii(e.child,r),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return bf(e,t,n);case 24:return Qn(t),r=kt(Ot),e===null?(f=vo(),f===null&&(f=gt,m=po(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=n),f=m),t.memoizedState={parent:r,cache:f},To(t),hn(t,Ot,f)):((e.lanes&n)!==0&&(wo(e,t),gr(t,null,null,n),dr()),f=e.memoizedState,m=t.memoizedState,f.parent!==r?(f={parent:r,cache:r},t.memoizedState=f,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=f),hn(t,Ot,r)):(r=m.cache,hn(t,Ot,r),r!==f.cache&&go(t,[Ot],n,!0))),Bt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function $i(e){e.flags|=4}function Lf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!kd(t)){if(t=mi.current,t!==null&&((tt&4194048)===tt?Li!==null:(tt&62914560)!==tt&&(tt&536870912)===0||t!==Li))throw hr=yo,mh;e.flags|=8192}}function Hl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?xi():536870912,e.lanes|=t,Oa|=t)}function xr(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var f=e.child;f!==null;)n|=f.lanes|f.childLanes,r|=f.subtreeFlags&65011712,r|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)n|=f.lanes|f.childLanes,r|=f.subtreeFlags,r|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jm(e,t,n){var r=t.pendingProps;switch(uo(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return xt(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Xi(Ot),Yt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ar(t)?$i(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,hh())),xt(t),null;case 26:return n=t.memoizedState,e===null?($i(t),n!==null?(xt(t),Lf(t,n)):(xt(t),t.flags&=-16777217)):n?n!==e.memoizedState?($i(t),xt(t),Lf(t,n)):(xt(t),t.flags&=-16777217):(e.memoizedProps!==r&&$i(t),xt(t),t.flags&=-16777217),null;case 27:jt(t),n=Ce.current;var f=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==r&&$i(t);else{if(!r){if(t.stateNode===null)throw Error(a(166));return xt(t),null}e=Ee.current,ar(t)?uh(t):(e=Ld(f,r,n),t.stateNode=e,$i(t))}return xt(t),null;case 5:if(jt(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&$i(t);else{if(!r){if(t.stateNode===null)throw Error(a(166));return xt(t),null}if(e=Ee.current,ar(t))uh(t);else{switch(f=Ql(Ce.current),e){case 1:e=f.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=f.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=f.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=f.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof r.is=="string"?f.createElement("select",{is:r.is}):f.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e=typeof r.is=="string"?f.createElement(n,{is:r.is}):f.createElement(n)}}e[re]=t,e[he]=r;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)e.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=e;e:switch(Ut(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$i(t)}}return xt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&$i(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(a(166));if(e=Ce.current,ar(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,f=Zt,f!==null)switch(f.tag){case 27:case 5:r=f.memoizedProps}e[re]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||Cd(e.nodeValue,n)),e||Wn(t)}else e=Ql(e).createTextNode(r),e[re]=t,t.stateNode=e}return xt(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=ar(t),r!==null&&r.dehydrated!==null){if(e===null){if(!f)throw Error(a(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[re]=t}else rr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;xt(t),f=!1}else f=hh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return t.flags&256?(Ki(t),t):(Ki(t),null)}if(Ki(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=r!==null,e=e!==null&&e.memoizedState!==null,n){r=t.child,f=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(f=r.alternate.memoizedState.cachePool.pool);var m=null;r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(m=r.memoizedState.cachePool.pool),m!==f&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Hl(t,t.updateQueue),xt(t),null;case 4:return Yt(),e===null&&Eu(t.stateNode.containerInfo),xt(t),null;case 10:return Xi(t.type),xt(t),null;case 19:if(ve(Mt),f=t.memoizedState,f===null)return xt(t),null;if(r=(t.flags&128)!==0,m=f.rendering,m===null)if(r)xr(f,!1);else{if(_t!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=Pl(e),m!==null){for(t.flags|=128,xr(f,!1),e=m.updateQueue,t.updateQueue=e,Hl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)sh(n,e),n=n.sibling;return J(Mt,Mt.current&1|2),t.child}e=e.sibling}f.tail!==null&&T()>jl&&(t.flags|=128,r=!0,xr(f,!1),t.lanes=4194304)}else{if(!r)if(e=Pl(m),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Hl(t,e),xr(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!st)return xt(t),null}else 2*T()-f.renderingStartTime>jl&&n!==536870912&&(t.flags|=128,r=!0,xr(f,!1),t.lanes=4194304);f.isBackwards?(m.sibling=t.child,t.child=m):(e=f.last,e!==null?e.sibling=m:t.child=m,f.last=m)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=T(),t.sibling=null,e=Mt.current,J(Mt,r?e&1|2:e&1),t):(xt(t),null);case 22:case 23:return Ki(t),_o(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(n&536870912)!==0&&(t.flags&128)===0&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),n=t.updateQueue,n!==null&&Hl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ve(Kn),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Xi(Ot),xt(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function Gm(e,t){switch(uo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xi(Ot),Yt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return jt(t),null;case 13:if(Ki(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ve(Mt),null;case 4:return Yt(),null;case 10:return Xi(t.type),null;case 22:case 23:return Ki(t),_o(),e!==null&&ve(Kn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Xi(Ot),null;case 25:return null;default:return null}}function Nf(e,t){switch(uo(t),t.tag){case 3:Xi(Ot),Yt();break;case 26:case 27:case 5:jt(t);break;case 4:Yt();break;case 13:Ki(t);break;case 19:ve(Mt);break;case 10:Xi(t.type);break;case 22:case 23:Ki(t),_o(),e!==null&&ve(Kn);break;case 24:Xi(Ot)}}function Er(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var f=r.next;n=f;do{if((n.tag&e)===e){r=void 0;var m=n.create,E=n.inst;r=m(),E.destroy=r}n=n.next}while(n!==f)}}catch(R){dt(t,t.return,R)}}function yn(e,t,n){try{var r=t.updateQueue,f=r!==null?r.lastEffect:null;if(f!==null){var m=f.next;r=m;do{if((r.tag&e)===e){var E=r.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,f=t;var P=n,Z=R;try{Z()}catch($){dt(f,P,$)}}}r=r.next}while(r!==m)}}catch($){dt(t,t.return,$)}}function Bf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Eh(t,n)}catch(r){dt(e,e.return,r)}}}function Hf(e,t,n){n.props=$n(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){dt(e,t,r)}}function Sr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(f){dt(e,t,f)}}function Ni(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(f){dt(e,t,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(f){dt(e,t,f)}else n.current=null}function Uf(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(f){dt(e,e.return,f)}}function Jo(e,t,n){try{var r=e.stateNode;ov(r,e.type,n,t),r[he]=t}catch(f){dt(e,e.return,f)}}function Ff(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Rn(e.type)||e.tag===4}function $o(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ff(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Rn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function eu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xl));else if(r!==4&&(r===27&&Rn(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(eu(e,t,n),e=e.sibling;e!==null;)eu(e,t,n),e=e.sibling}function Ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Rn(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Ul(e,t,n),e=e.sibling;e!==null;)Ul(e,t,n),e=e.sibling}function jf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,f=t.attributes;f.length;)t.removeAttributeNode(f[0]);Ut(t,r,n),t[re]=e,t[he]=n}catch(m){dt(e,e.return,m)}}var en=!1,Ct=!1,tu=!1,Gf=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function km(e,t){if(e=e.containerInfo,bu=is,e=Kc(e),Js(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var f=r.anchorOffset,m=r.focusNode;r=r.focusOffset;try{n.nodeType,m.nodeType}catch{n=null;break e}var E=0,R=-1,P=-1,Z=0,$=0,ne=e,Y=null;t:for(;;){for(var W;ne!==n||f!==0&&ne.nodeType!==3||(R=E+f),ne!==m||r!==0&&ne.nodeType!==3||(P=E+r),ne.nodeType===3&&(E+=ne.nodeValue.length),(W=ne.firstChild)!==null;)Y=ne,ne=W;for(;;){if(ne===e)break t;if(Y===n&&++Z===f&&(R=E),Y===m&&++$===r&&(P=E),(W=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=W}n=R===-1||P===-1?null:{start:R,end:P}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ru={focusedElem:e,selectionRange:n},is=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,m=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,n=t,f=m.memoizedProps,m=m.memoizedState,r=n.stateNode;try{var je=$n(n.type,f,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(je,m),r.__reactInternalSnapshotBeforeUpdate=e}catch(Be){dt(n,n.return,Be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Au(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Au(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function kf(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Tn(e,n),r&4&&Er(5,n);break;case 1:if(Tn(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(E){dt(n,n.return,E)}else{var f=$n(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(f,t,e.__reactInternalSnapshotBeforeUpdate)}catch(E){dt(n,n.return,E)}}r&64&&Bf(n),r&512&&Sr(n,n.return);break;case 3:if(Tn(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Eh(e,t)}catch(E){dt(n,n.return,E)}}break;case 27:t===null&&r&4&&jf(n);case 26:case 5:Tn(e,n),t===null&&r&4&&Uf(n),r&512&&Sr(n,n.return);break;case 12:Tn(e,n);break;case 13:Tn(e,n),r&4&&If(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Km.bind(null,n),pv(e,n))));break;case 22:if(r=n.memoizedState!==null||en,!r){t=t!==null&&t.memoizedState!==null||Ct,f=en;var m=Ct;en=r,(Ct=t)&&!m?wn(e,n,(n.subtreeFlags&8772)!==0):Tn(e,n),en=f,Ct=m}break;case 30:break;default:Tn(e,n)}}function Vf(e){var t=e.alternate;t!==null&&(e.alternate=null,Vf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&De(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tt=null,Jt=!1;function tn(e,t,n){for(n=n.child;n!==null;)qf(e,t,n),n=n.sibling}function qf(e,t,n){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(Ie,n)}catch{}switch(n.tag){case 26:Ct||Ni(n,t),tn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ct||Ni(n,t);var r=Tt,f=Jt;Rn(n.type)&&(Tt=n.stateNode,Jt=!1),tn(e,t,n),Pr(n.stateNode),Tt=r,Jt=f;break;case 5:Ct||Ni(n,t);case 6:if(r=Tt,f=Jt,Tt=null,tn(e,t,n),Tt=r,Jt=f,Tt!==null)if(Jt)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(n.stateNode)}catch(m){dt(n,t,m)}else try{Tt.removeChild(n.stateNode)}catch(m){dt(n,t,m)}break;case 18:Tt!==null&&(Jt?(e=Tt,Pd(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),jr(e)):Pd(Tt,n.stateNode));break;case 4:r=Tt,f=Jt,Tt=n.stateNode.containerInfo,Jt=!0,tn(e,t,n),Tt=r,Jt=f;break;case 0:case 11:case 14:case 15:Ct||yn(2,n,t),Ct||yn(4,n,t),tn(e,t,n);break;case 1:Ct||(Ni(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&Hf(n,t,r)),tn(e,t,n);break;case 21:tn(e,t,n);break;case 22:Ct=(r=Ct)||n.memoizedState!==null,tn(e,t,n),Ct=r;break;default:tn(e,t,n)}}function If(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{jr(e)}catch(n){dt(t,t.return,n)}}function Vm(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Gf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Gf),t;default:throw Error(a(435,e.tag))}}function iu(e,t){var n=Vm(e);t.forEach(function(r){var f=Jm.bind(null,e,r);n.has(r)||(n.add(r),r.then(f,f))})}function ii(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var f=n[r],m=e,E=t,R=E;e:for(;R!==null;){switch(R.tag){case 27:if(Rn(R.type)){Tt=R.stateNode,Jt=!1;break e}break;case 5:Tt=R.stateNode,Jt=!1;break e;case 3:case 4:Tt=R.stateNode.containerInfo,Jt=!0;break e}R=R.return}if(Tt===null)throw Error(a(160));qf(m,E,f),Tt=null,Jt=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Zf(t,e),t=t.sibling}var bi=null;function Zf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ii(t,e),ni(e),r&4&&(yn(3,e,e.return),Er(3,e),yn(5,e,e.return));break;case 1:ii(t,e),ni(e),r&512&&(Ct||n===null||Ni(n,n.return)),r&64&&en&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var f=bi;if(ii(t,e),ni(e),r&512&&(Ct||n===null||Ni(n,n.return)),r&4){var m=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,f=f.ownerDocument||f;t:switch(r){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Fe]||m[re]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(r),f.head.insertBefore(m,f.querySelector("head > title"))),Ut(m,r,n),m[re]=e,at(m),r=m;break e;case"link":var E=jd("link","href",f).get(r+(n.href||""));if(E){for(var R=0;R<E.length;R++)if(m=E[R],m.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&m.getAttribute("rel")===(n.rel==null?null:n.rel)&&m.getAttribute("title")===(n.title==null?null:n.title)&&m.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){E.splice(R,1);break t}}m=f.createElement(r),Ut(m,r,n),f.head.appendChild(m);break;case"meta":if(E=jd("meta","content",f).get(r+(n.content||""))){for(R=0;R<E.length;R++)if(m=E[R],m.getAttribute("content")===(n.content==null?null:""+n.content)&&m.getAttribute("name")===(n.name==null?null:n.name)&&m.getAttribute("property")===(n.property==null?null:n.property)&&m.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&m.getAttribute("charset")===(n.charSet==null?null:n.charSet)){E.splice(R,1);break t}}m=f.createElement(r),Ut(m,r,n),f.head.appendChild(m);break;default:throw Error(a(468,r))}m[re]=e,at(m),r=m}e.stateNode=r}else Gd(f,e.type,e.stateNode);else e.stateNode=Fd(f,r,e.memoizedProps);else m!==r?(m===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):m.count--,r===null?Gd(f,e.type,e.stateNode):Fd(f,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Jo(e,e.memoizedProps,n.memoizedProps)}break;case 27:ii(t,e),ni(e),r&512&&(Ct||n===null||Ni(n,n.return)),n!==null&&r&4&&Jo(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ii(t,e),ni(e),r&512&&(Ct||n===null||Ni(n,n.return)),e.flags&32){f=e.stateNode;try{oa(f,"")}catch(W){dt(e,e.return,W)}}r&4&&e.stateNode!=null&&(f=e.memoizedProps,Jo(e,f,n!==null?n.memoizedProps:f)),r&1024&&(tu=!0);break;case 6:if(ii(t,e),ni(e),r&4){if(e.stateNode===null)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(W){dt(e,e.return,W)}}break;case 3:if($l=null,f=bi,bi=Kl(t.containerInfo),ii(t,e),bi=f,ni(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jr(t.containerInfo)}catch(W){dt(e,e.return,W)}tu&&(tu=!1,Yf(e));break;case 4:r=bi,bi=Kl(e.stateNode.containerInfo),ii(t,e),ni(e),bi=r;break;case 12:ii(t,e),ni(e);break;case 13:ii(t,e),ni(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ou=T()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,iu(e,r)));break;case 22:f=e.memoizedState!==null;var P=n!==null&&n.memoizedState!==null,Z=en,$=Ct;if(en=Z||f,Ct=$||P,ii(t,e),Ct=$,en=Z,ni(e),r&8192)e:for(t=e.stateNode,t._visibility=f?t._visibility&-2:t._visibility|1,f&&(n===null||P||en||Ct||ea(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){P=n=t;try{if(m=P.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=P.stateNode;var ne=P.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;R.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(W){dt(P,P.return,W)}}}else if(t.tag===6){if(n===null){P=t;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(W){dt(P,P.return,W)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,iu(e,n))));break;case 19:ii(t,e),ni(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,iu(e,r)));break;case 30:break;case 21:break;default:ii(t,e),ni(e)}}function ni(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Ff(r)){n=r;break}r=r.return}if(n==null)throw Error(a(160));switch(n.tag){case 27:var f=n.stateNode,m=$o(e);Ul(e,m,f);break;case 5:var E=n.stateNode;n.flags&32&&(oa(E,""),n.flags&=-33);var R=$o(e);Ul(e,R,E);break;case 3:case 4:var P=n.stateNode.containerInfo,Z=$o(e);eu(e,Z,P);break;default:throw Error(a(161))}}catch($){dt(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Yf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Tn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)kf(e,t.alternate,t),t=t.sibling}function ea(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yn(4,t,t.return),ea(t);break;case 1:Ni(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Hf(t,t.return,n),ea(t);break;case 27:Pr(t.stateNode);case 26:case 5:Ni(t,t.return),ea(t);break;case 22:t.memoizedState===null&&ea(t);break;case 30:ea(t);break;default:ea(t)}e=e.sibling}}function wn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,f=e,m=t,E=m.flags;switch(m.tag){case 0:case 11:case 15:wn(f,m,n),Er(4,m);break;case 1:if(wn(f,m,n),r=m,f=r.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){dt(r,r.return,Z)}if(r=m,f=r.updateQueue,f!==null){var R=r.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)xh(P[f],R)}catch(Z){dt(r,r.return,Z)}}n&&E&64&&Bf(m),Sr(m,m.return);break;case 27:jf(m);case 26:case 5:wn(f,m,n),n&&r===null&&E&4&&Uf(m),Sr(m,m.return);break;case 12:wn(f,m,n);break;case 13:wn(f,m,n),n&&E&4&&If(f,m);break;case 22:m.memoizedState===null&&wn(f,m,n),Sr(m,m.return);break;case 30:break;default:wn(f,m,n)}t=t.sibling}}function nu(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&or(n))}function au(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&or(e))}function Bi(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Wf(e,t,n,r),t=t.sibling}function Wf(e,t,n,r){var f=t.flags;switch(t.tag){case 0:case 11:case 15:Bi(e,t,n,r),f&2048&&Er(9,t);break;case 1:Bi(e,t,n,r);break;case 3:Bi(e,t,n,r),f&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&or(e)));break;case 12:if(f&2048){Bi(e,t,n,r),e=t.stateNode;try{var m=t.memoizedProps,E=m.id,R=m.onPostCommit;typeof R=="function"&&R(E,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(P){dt(t,t.return,P)}}else Bi(e,t,n,r);break;case 13:Bi(e,t,n,r);break;case 23:break;case 22:m=t.stateNode,E=t.alternate,t.memoizedState!==null?m._visibility&2?Bi(e,t,n,r):_r(e,t):m._visibility&2?Bi(e,t,n,r):(m._visibility|=2,Ca(e,t,n,r,(t.subtreeFlags&10256)!==0)),f&2048&&nu(E,t);break;case 24:Bi(e,t,n,r),f&2048&&au(t.alternate,t);break;default:Bi(e,t,n,r)}}function Ca(e,t,n,r,f){for(f=f&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var m=e,E=t,R=n,P=r,Z=E.flags;switch(E.tag){case 0:case 11:case 15:Ca(m,E,R,P,f),Er(8,E);break;case 23:break;case 22:var $=E.stateNode;E.memoizedState!==null?$._visibility&2?Ca(m,E,R,P,f):_r(m,E):($._visibility|=2,Ca(m,E,R,P,f)),f&&Z&2048&&nu(E.alternate,E);break;case 24:Ca(m,E,R,P,f),f&&Z&2048&&au(E.alternate,E);break;default:Ca(m,E,R,P,f)}t=t.sibling}}function _r(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,f=r.flags;switch(r.tag){case 22:_r(n,r),f&2048&&nu(r.alternate,r);break;case 24:_r(n,r),f&2048&&au(r.alternate,r);break;default:_r(n,r)}t=t.sibling}}var br=8192;function Da(e){if(e.subtreeFlags&br)for(e=e.child;e!==null;)Xf(e),e=e.sibling}function Xf(e){switch(e.tag){case 26:Da(e),e.flags&br&&e.memoizedState!==null&&Dv(bi,e.memoizedState,e.memoizedProps);break;case 5:Da(e);break;case 3:case 4:var t=bi;bi=Kl(e.stateNode.containerInfo),Da(e),bi=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=br,br=16777216,Da(e),br=t):Da(e));break;default:Da(e)}}function Qf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Rr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Lt=r,Jf(r,e)}Qf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Kf(e),e=e.sibling}function Kf(e){switch(e.tag){case 0:case 11:case 15:Rr(e),e.flags&2048&&yn(9,e,e.return);break;case 3:Rr(e);break;case 12:Rr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fl(e)):Rr(e);break;default:Rr(e)}}function Fl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Lt=r,Jf(r,e)}Qf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:yn(8,t,t.return),Fl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Fl(t));break;default:Fl(t)}e=e.sibling}}function Jf(e,t){for(;Lt!==null;){var n=Lt;switch(n.tag){case 0:case 11:case 15:yn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:or(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Lt=r;else e:for(n=e;Lt!==null;){r=Lt;var f=r.sibling,m=r.return;if(Vf(r),r===n){Lt=null;break e}if(f!==null){f.return=m,Lt=f;break e}Lt=m}}}var qm={getCacheForType:function(e){var t=kt(Ot),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Im=typeof WeakMap=="function"?WeakMap:Map,ot=0,gt=null,Ke=null,tt=0,ut=0,ai=null,xn=!1,Aa=!1,ru=!1,nn=0,_t=0,En=0,ta=0,lu=0,vi=0,Oa=0,Cr=null,$t=null,su=!1,ou=0,jl=1/0,Gl=null,Sn=null,Ht=0,_n=null,Ma=null,Pa=0,uu=0,cu=null,$f=null,Dr=0,hu=null;function ri(){if((ot&2)!==0&&tt!==0)return tt&-tt;if(k.T!==null){var e=Ta;return e!==0?e:yu()}return N()}function ed(){vi===0&&(vi=(tt&536870912)===0||st?pt():536870912);var e=mi.current;return e!==null&&(e.flags|=32),vi}function li(e,t,n){(e===gt&&(ut===2||ut===9)||e.cancelPendingCommit!==null)&&(za(e,0),bn(e,tt,vi,!1)),Pi(e,n),((ot&2)===0||e!==gt)&&(e===gt&&((ot&2)===0&&(ta|=n),_t===4&&bn(e,tt,vi,!1)),Hi(e))}function td(e,t,n){if((ot&6)!==0)throw Error(a(327));var r=!n&&(t&124)===0&&(t&e.expiredLanes)===0||be(e,t),f=r?Wm(e,t):gu(e,t,!0),m=r;do{if(f===0){Aa&&!r&&bn(e,t,0,!1);break}else{if(n=e.current.alternate,m&&!Zm(n)){f=gu(e,t,!1),m=!1;continue}if(f===2){if(m=t,e.errorRecoveryDisabledLanes&m)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){t=E;e:{var R=e;f=Cr;var P=R.current.memoizedState.isDehydrated;if(P&&(za(R,E).flags|=256),E=gu(R,E,!1),E!==2){if(ru&&!P){R.errorRecoveryDisabledLanes|=m,ta|=m,f=4;break e}m=$t,$t=f,m!==null&&($t===null?$t=m:$t.push.apply($t,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){za(e,0),bn(e,t,0,!0);break}e:{switch(r=e,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:bn(r,t,vi,!xn);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(f=ou+300-T(),10<f)){if(bn(r,t,vi,!xn),Qe(r,0,!0)!==0)break e;r.timeoutHandle=Od(id.bind(null,r,n,$t,Gl,su,t,vi,ta,Oa,xn,m,2,-0,0),f);break e}id(r,n,$t,Gl,su,t,vi,ta,Oa,xn,m,0,-0,0)}}break}while(!0);Hi(e)}function id(e,t,n,r,f,m,E,R,P,Z,$,ne,Y,W){if(e.timeoutHandle=-1,ne=t.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Nr={stylesheets:null,count:0,unsuspend:Cv},Xf(t),ne=Av(),ne!==null)){e.cancelPendingCommit=ne(ud.bind(null,e,t,m,n,r,f,E,R,P,$,1,Y,W)),bn(e,m,E,!Z);return}ud(e,t,m,n,r,f,E,R,P)}function Zm(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var f=n[r],m=f.getSnapshot;f=f.value;try{if(!ei(m(),f))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bn(e,t,n,r){t&=~lu,t&=~ta,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var f=t;0<f;){var m=31-S(f),E=1<<m;r[m]=-1,f&=~E}n!==0&&Un(e,n,t)}function kl(){return(ot&6)===0?(Ar(0),!1):!0}function fu(){if(Ke!==null){if(ut===0)var e=Ke.return;else e=Ke,Wi=Xn=null,Ao(e),ba=null,Tr=0,e=Ke;for(;e!==null;)Nf(e.alternate,e),e=e.return;Ke=null}}function za(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,cv(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),fu(),gt=e,Ke=n=Ii(e.current,null),tt=t,ut=0,ai=null,xn=!1,Aa=be(e,t),ru=!1,Oa=vi=lu=ta=En=_t=0,$t=Cr=null,su=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var f=31-S(r),m=1<<f;t|=e[f],r&=~m}return nn=t,cl(),n}function nd(e,t){Ze=null,k.H=Al,t===cr||t===Tl?(t=Th(),ut=3):t===mh?(t=Th(),ut=4):ut=t===xf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ai=t,Ke===null&&(_t=1,Ll(e,fi(t,e.current)))}function ad(){var e=k.H;return k.H=Al,e===null?Al:e}function rd(){var e=k.A;return k.A=qm,e}function du(){_t=4,xn||(tt&4194048)!==tt&&mi.current!==null||(Aa=!0),(En&134217727)===0&&(ta&134217727)===0||gt===null||bn(gt,tt,vi,!1)}function gu(e,t,n){var r=ot;ot|=2;var f=ad(),m=rd();(gt!==e||tt!==t)&&(Gl=null,za(e,t)),t=!1;var E=_t;e:do try{if(ut!==0&&Ke!==null){var R=Ke,P=ai;switch(ut){case 8:fu(),E=6;break e;case 3:case 2:case 9:case 6:mi.current===null&&(t=!0);var Z=ut;if(ut=0,ai=null,La(e,R,P,Z),n&&Aa){E=0;break e}break;default:Z=ut,ut=0,ai=null,La(e,R,P,Z)}}Ym(),E=_t;break}catch($){nd(e,$)}while(!0);return t&&e.shellSuspendCounter++,Wi=Xn=null,ot=r,k.H=f,k.A=m,Ke===null&&(gt=null,tt=0,cl()),E}function Ym(){for(;Ke!==null;)ld(Ke)}function Wm(e,t){var n=ot;ot|=2;var r=ad(),f=rd();gt!==e||tt!==t?(Gl=null,jl=T()+500,za(e,t)):Aa=be(e,t);e:do try{if(ut!==0&&Ke!==null){t=Ke;var m=ai;t:switch(ut){case 1:ut=0,ai=null,La(e,t,m,1);break;case 2:case 9:if(vh(m)){ut=0,ai=null,sd(t);break}t=function(){ut!==2&&ut!==9||gt!==e||(ut=7),Hi(e)},m.then(t,t);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:vh(m)?(ut=0,ai=null,sd(t)):(ut=0,ai=null,La(e,t,m,7));break;case 5:var E=null;switch(Ke.tag){case 26:E=Ke.memoizedState;case 5:case 27:var R=Ke;if(!E||kd(E)){ut=0,ai=null;var P=R.sibling;if(P!==null)Ke=P;else{var Z=R.return;Z!==null?(Ke=Z,Vl(Z)):Ke=null}break t}}ut=0,ai=null,La(e,t,m,5);break;case 6:ut=0,ai=null,La(e,t,m,6);break;case 8:fu(),_t=6;break e;default:throw Error(a(462))}}Xm();break}catch($){nd(e,$)}while(!0);return Wi=Xn=null,k.H=r,k.A=f,ot=n,Ke!==null?0:(gt=null,tt=0,cl(),_t)}function Xm(){for(;Ke!==null&&!Gi();)ld(Ke)}function ld(e){var t=zf(e.alternate,e,nn);e.memoizedProps=e.pendingProps,t===null?Vl(e):Ke=t}function sd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Cf(n,t,t.pendingProps,t.type,void 0,tt);break;case 11:t=Cf(n,t,t.pendingProps,t.type.render,t.ref,tt);break;case 5:Ao(t);default:Nf(n,t),t=Ke=sh(t,nn),t=zf(n,t,nn)}e.memoizedProps=e.pendingProps,t===null?Vl(e):Ke=t}function La(e,t,n,r){Wi=Xn=null,Ao(t),ba=null,Tr=0;var f=t.return;try{if(Um(e,f,t,n,tt)){_t=1,Ll(e,fi(n,e.current)),Ke=null;return}}catch(m){if(f!==null)throw Ke=f,m;_t=1,Ll(e,fi(n,e.current)),Ke=null;return}t.flags&32768?(st||r===1?e=!0:Aa||(tt&536870912)!==0?e=!1:(xn=e=!0,(r===2||r===9||r===3||r===6)&&(r=mi.current,r!==null&&r.tag===13&&(r.flags|=16384))),od(t,e)):Vl(t)}function Vl(e){var t=e;do{if((t.flags&32768)!==0){od(t,xn);return}e=t.return;var n=jm(t.alternate,t,nn);if(n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);_t===0&&(_t=5)}function od(e,t){do{var n=Gm(e.alternate,e);if(n!==null){n.flags&=32767,Ke=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ke=e;return}Ke=e=n}while(e!==null);_t=6,Ke=null}function ud(e,t,n,r,f,m,E,R,P){e.cancelPendingCommit=null;do ql();while(Ht!==0);if((ot&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(m=t.lanes|t.childLanes,m|=no,Hn(e,n,m,E,R,P),e===gt&&(Ke=gt=null,tt=0),Ma=t,_n=e,Pa=n,uu=m,cu=f,$f=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,$m(fe,function(){return gd(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=k.T,k.T=null,f=oe.p,oe.p=2,E=ot,ot|=4;try{km(e,t,n)}finally{ot=E,oe.p=f,k.T=r}}Ht=1,cd(),hd(),fd()}}function cd(){if(Ht===1){Ht=0;var e=_n,t=Ma,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=k.T,k.T=null;var r=oe.p;oe.p=2;var f=ot;ot|=4;try{Zf(t,e);var m=Ru,E=Kc(e.containerInfo),R=m.focusedElem,P=m.selectionRange;if(E!==R&&R&&R.ownerDocument&&Qc(R.ownerDocument.documentElement,R)){if(P!==null&&Js(R)){var Z=P.start,$=P.end;if($===void 0&&($=Z),"selectionStart"in R)R.selectionStart=Z,R.selectionEnd=Math.min($,R.value.length);else{var ne=R.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),je=R.textContent.length,Be=Math.min(P.start,je),ft=P.end===void 0?Be:Math.min(P.end,je);!W.extend&&Be>ft&&(E=ft,ft=Be,Be=E);var G=Xc(R,Be),B=Xc(R,ft);if(G&&B&&(W.rangeCount!==1||W.anchorNode!==G.node||W.anchorOffset!==G.offset||W.focusNode!==B.node||W.focusOffset!==B.offset)){var q=ne.createRange();q.setStart(G.node,G.offset),W.removeAllRanges(),Be>ft?(W.addRange(q),W.extend(B.node,B.offset)):(q.setEnd(B.node,B.offset),W.addRange(q))}}}}for(ne=[],W=R;W=W.parentNode;)W.nodeType===1&&ne.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ne.length;R++){var te=ne[R];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}is=!!bu,Ru=bu=null}finally{ot=f,oe.p=r,k.T=n}}e.current=t,Ht=2}}function hd(){if(Ht===2){Ht=0;var e=_n,t=Ma,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=k.T,k.T=null;var r=oe.p;oe.p=2;var f=ot;ot|=4;try{kf(e,t.alternate,t)}finally{ot=f,oe.p=r,k.T=n}}Ht=3}}function fd(){if(Ht===4||Ht===3){Ht=0,Mi();var e=_n,t=Ma,n=Pa,r=$f;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ht=5:(Ht=0,Ma=_n=null,dd(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Sn=null),Za(n),t=t.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(Ie,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=k.T,f=oe.p,oe.p=2,k.T=null;try{for(var m=e.onRecoverableError,E=0;E<r.length;E++){var R=r[E];m(R.value,{componentStack:R.stack})}}finally{k.T=t,oe.p=f}}(Pa&3)!==0&&ql(),Hi(e),f=e.pendingLanes,(n&4194090)!==0&&(f&42)!==0?e===hu?Dr++:(Dr=0,hu=e):Dr=0,Ar(0)}}function dd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,or(t)))}function ql(e){return cd(),hd(),fd(),gd()}function gd(){if(Ht!==5)return!1;var e=_n,t=uu;uu=0;var n=Za(Pa),r=k.T,f=oe.p;try{oe.p=32>n?32:n,k.T=null,n=cu,cu=null;var m=_n,E=Pa;if(Ht=0,Ma=_n=null,Pa=0,(ot&6)!==0)throw Error(a(331));var R=ot;if(ot|=4,Kf(m.current),Wf(m,m.current,E,n),ot=R,Ar(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(Ie,m)}catch{}return!0}finally{oe.p=f,k.T=r,dd(e,t)}}function pd(e,t,n){t=fi(n,t),t=Vo(e.stateNode,t,2),e=gn(e,t,2),e!==null&&(Pi(e,2),Hi(e))}function dt(e,t,n){if(e.tag===3)pd(e,e,n);else for(;t!==null;){if(t.tag===3){pd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sn===null||!Sn.has(r))){e=fi(n,e),n=Tf(2),r=gn(t,n,2),r!==null&&(wf(n,r,t,e),Pi(r,2),Hi(r));break}}t=t.return}}function pu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Im;var f=new Set;r.set(t,f)}else f=r.get(t),f===void 0&&(f=new Set,r.set(t,f));f.has(n)||(ru=!0,f.add(n),e=Qm.bind(null,e,t,n),t.then(e,e))}function Qm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,gt===e&&(tt&n)===n&&(_t===4||_t===3&&(tt&62914560)===tt&&300>T()-ou?(ot&2)===0&&za(e,0):lu|=n,Oa===tt&&(Oa=0)),Hi(e)}function md(e,t){t===0&&(t=xi()),e=pa(e,t),e!==null&&(Pi(e,t),Hi(e))}function Km(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),md(e,n)}function Jm(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,f=e.memoizedState;f!==null&&(n=f.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}r!==null&&r.delete(t),md(e,n)}function $m(e,t){return Oi(e,t)}var Il=null,Na=null,mu=!1,Zl=!1,vu=!1,ia=0;function Hi(e){e!==Na&&e.next===null&&(Na===null?Il=Na=e:Na=Na.next=e),Zl=!0,mu||(mu=!0,tv())}function Ar(e,t){if(!vu&&Zl){vu=!0;do for(var n=!1,r=Il;r!==null;){if(e!==0){var f=r.pendingLanes;if(f===0)var m=0;else{var E=r.suspendedLanes,R=r.pingedLanes;m=(1<<31-S(42|e)+1)-1,m&=f&~(E&~R),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(n=!0,wd(r,m))}else m=tt,m=Qe(r,r===gt?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(m&3)===0||be(r,m)||(n=!0,wd(r,m));r=r.next}while(n);vu=!1}}function ev(){vd()}function vd(){Zl=mu=!1;var e=0;ia!==0&&(uv()&&(e=ia),ia=0);for(var t=T(),n=null,r=Il;r!==null;){var f=r.next,m=yd(r,t);m===0?(r.next=null,n===null?Il=f:n.next=f,f===null&&(Na=n)):(n=r,(e!==0||(m&3)!==0)&&(Zl=!0)),r=f}Ar(e)}function yd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var E=31-S(m),R=1<<E,P=f[E];P===-1?((R&n)===0||(R&r)!==0)&&(f[E]=Pt(R,t)):P<=t&&(e.expiredLanes|=R),m&=~R}if(t=gt,n=tt,n=Qe(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(ut===2||ut===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&qt(r),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||be(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&qt(r),Za(n)){case 2:case 8:n=le;break;case 32:n=fe;break;case 268435456:n=ie;break;default:n=fe}return r=Td.bind(null,e),n=Oi(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&qt(r),e.callbackPriority=2,e.callbackNode=null,2}function Td(e,t){if(Ht!==0&&Ht!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ql()&&e.callbackNode!==n)return null;var r=tt;return r=Qe(e,e===gt?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(td(e,r,t),yd(e,T()),e.callbackNode!=null&&e.callbackNode===n?Td.bind(null,e):null)}function wd(e,t){if(ql())return null;td(e,t,!0)}function tv(){hv(function(){(ot&6)!==0?Oi(I,ev):vd()})}function yu(){return ia===0&&(ia=pt()),ia}function xd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:nl(""+e)}function Ed(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function iv(e,t,n,r,f){if(t==="submit"&&n&&n.stateNode===f){var m=xd((f[he]||null).action),E=r.submitter;E&&(t=(t=E[he]||null)?xd(t.formAction):E.getAttribute("formAction"),t!==null&&(m=t,E=null));var R=new sl("action","action",null,r,f);e.push({event:R,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ia!==0){var P=E?Ed(f,E):new FormData(f);Uo(n,{pending:!0,data:P,method:f.method,action:m},null,P)}}else typeof m=="function"&&(R.preventDefault(),P=E?Ed(f,E):new FormData(f),Uo(n,{pending:!0,data:P,method:f.method,action:m},m,P))},currentTarget:f}]})}}for(var Tu=0;Tu<io.length;Tu++){var wu=io[Tu],nv=wu.toLowerCase(),av=wu[0].toUpperCase()+wu.slice(1);_i(nv,"on"+av)}_i(eh,"onAnimationEnd"),_i(th,"onAnimationIteration"),_i(ih,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(xm,"onTransitionRun"),_i(Em,"onTransitionStart"),_i(Sm,"onTransitionCancel"),_i(nh,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),It("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),It("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),It("onBeforeInput",["compositionend","keypress","textInput","paste"]),It("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Or));function Sd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],f=r.event;r=r.listeners;e:{var m=void 0;if(t)for(var E=r.length-1;0<=E;E--){var R=r[E],P=R.instance,Z=R.currentTarget;if(R=R.listener,P!==m&&f.isPropagationStopped())break e;m=R,f.currentTarget=Z;try{m(f)}catch($){zl($)}f.currentTarget=null,m=P}else for(E=0;E<r.length;E++){if(R=r[E],P=R.instance,Z=R.currentTarget,R=R.listener,P!==m&&f.isPropagationStopped())break e;m=R,f.currentTarget=Z;try{m(f)}catch($){zl($)}f.currentTarget=null,m=P}}}}function Je(e,t){var n=t[Ne];n===void 0&&(n=t[Ne]=new Set);var r=e+"__bubble";n.has(r)||(_d(t,e,2,!1),n.add(r))}function xu(e,t,n){var r=0;t&&(r|=4),_d(n,e,r,t)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Eu(e){if(!e[Yl]){e[Yl]=!0,et.forEach(function(n){n!=="selectionchange"&&(rv.has(n)||xu(n,!1,e),xu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yl]||(t[Yl]=!0,xu("selectionchange",!1,t))}}function _d(e,t,n,r){switch(Wd(t)){case 2:var f=Pv;break;case 8:f=zv;break;default:f=Bu}n=f.bind(null,t,n,e),f=void 0,!Vs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(f=!0),r?f!==void 0?e.addEventListener(t,n,{capture:!0,passive:f}):e.addEventListener(t,n,!0):f!==void 0?e.addEventListener(t,n,{passive:f}):e.addEventListener(t,n,!1)}function Su(e,t,n,r,f){var m=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var E=r.tag;if(E===3||E===4){var R=r.stateNode.containerInfo;if(R===f)break;if(E===4)for(E=r.return;E!==null;){var P=E.tag;if((P===3||P===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;R!==null;){if(E=ke(R),E===null)return;if(P=E.tag,P===5||P===6||P===26||P===27){r=m=E;continue e}R=R.parentNode}}r=r.return}Oc(function(){var Z=m,$=Gs(n),ne=[];e:{var Y=ah.get(e);if(Y!==void 0){var W=sl,je=e;switch(e){case"keypress":if(rl(n)===0)break e;case"keydown":case"keyup":W=$p;break;case"focusin":je="focus",W=Ys;break;case"focusout":je="blur",W=Ys;break;case"beforeblur":case"afterblur":W=Ys;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Gp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=im;break;case eh:case th:case ih:W=qp;break;case nh:W=am;break;case"scroll":case"scrollend":W=Fp;break;case"wheel":W=lm;break;case"copy":case"cut":case"paste":W=Zp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Nc;break;case"toggle":case"beforetoggle":W=om}var Be=(t&4)!==0,ft=!Be&&(e==="scroll"||e==="scrollend"),G=Be?Y!==null?Y+"Capture":null:Y;Be=[];for(var B=Z,q;B!==null;){var te=B;if(q=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||q===null||G===null||(te=Xa(B,G),te!=null&&Be.push(Mr(B,te,q))),ft)break;B=B.return}0<Be.length&&(Y=new W(Y,je,null,n,$),ne.push({event:Y,listeners:Be}))}}if((t&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",Y&&n!==js&&(je=n.relatedTarget||n.fromElement)&&(ke(je)||je[Re]))break e;if((W||Y)&&(Y=$.window===$?$:(Y=$.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(je=n.relatedTarget||n.toElement,W=Z,je=je?ke(je):null,je!==null&&(ft=l(je),Be=je.tag,je!==ft||Be!==5&&Be!==27&&Be!==6)&&(je=null)):(W=null,je=Z),W!==je)){if(Be=zc,te="onMouseLeave",G="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(Be=Nc,te="onPointerLeave",G="onPointerEnter",B="pointer"),ft=W==null?Y:mt(W),q=je==null?Y:mt(je),Y=new Be(te,B+"leave",W,n,$),Y.target=ft,Y.relatedTarget=q,te=null,ke($)===Z&&(Be=new Be(G,B+"enter",je,n,$),Be.target=q,Be.relatedTarget=ft,te=Be),ft=te,W&&je)t:{for(Be=W,G=je,B=0,q=Be;q;q=Ba(q))B++;for(q=0,te=G;te;te=Ba(te))q++;for(;0<B-q;)Be=Ba(Be),B--;for(;0<q-B;)G=Ba(G),q--;for(;B--;){if(Be===G||G!==null&&Be===G.alternate)break t;Be=Ba(Be),G=Ba(G)}Be=null}else Be=null;W!==null&&bd(ne,Y,W,Be,!1),je!==null&&ft!==null&&bd(ne,ft,je,Be,!0)}}e:{if(Y=Z?mt(Z):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Se=Vc;else if(Gc(Y))if(qc)Se=ym;else{Se=mm;var We=pm}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?Z&&Fs(Z.elementType)&&(Se=Vc):Se=vm;if(Se&&(Se=Se(e,Z))){kc(ne,Se,n,$);break e}We&&We(e,Y,Z),e==="focusout"&&Z&&Y.type==="number"&&Z.memoizedProps.value!=null&&Us(Y,"number",Y.value)}switch(We=Z?mt(Z):window,e){case"focusin":(Gc(We)||We.contentEditable==="true")&&(fa=We,$s=Z,nr=null);break;case"focusout":nr=$s=fa=null;break;case"mousedown":eo=!0;break;case"contextmenu":case"mouseup":case"dragend":eo=!1,Jc(ne,n,$);break;case"selectionchange":if(wm)break;case"keydown":case"keyup":Jc(ne,n,$)}var Ae;if(Xs)e:{switch(e){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ha?Fc(e,n)&&(He="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(He="onCompositionStart");He&&(Bc&&n.locale!=="ko"&&(ha||He!=="onCompositionStart"?He==="onCompositionEnd"&&ha&&(Ae=Mc()):(cn=$,qs="value"in cn?cn.value:cn.textContent,ha=!0)),We=Wl(Z,He),0<We.length&&(He=new Lc(He,e,null,n,$),ne.push({event:He,listeners:We}),Ae?He.data=Ae:(Ae=jc(n),Ae!==null&&(He.data=Ae)))),(Ae=cm?hm(e,n):fm(e,n))&&(He=Wl(Z,"onBeforeInput"),0<He.length&&(We=new Lc("onBeforeInput","beforeinput",null,n,$),ne.push({event:We,listeners:He}),We.data=Ae)),iv(ne,e,Z,n,$)}Sd(ne,t)})}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wl(e,t){for(var n=t+"Capture",r=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Xa(e,n),f!=null&&r.unshift(Mr(e,f,m)),f=Xa(e,t),f!=null&&r.push(Mr(e,f,m))),e.tag===3)return r;e=e.return}return[]}function Ba(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bd(e,t,n,r,f){for(var m=t._reactName,E=[];n!==null&&n!==r;){var R=n,P=R.alternate,Z=R.stateNode;if(R=R.tag,P!==null&&P===r)break;R!==5&&R!==26&&R!==27||Z===null||(P=Z,f?(Z=Xa(n,m),Z!=null&&E.unshift(Mr(n,Z,P))):f||(Z=Xa(n,m),Z!=null&&E.push(Mr(n,Z,P)))),n=n.return}E.length!==0&&e.push({event:t,listeners:E})}var lv=/\r\n?/g,sv=/\u0000|\uFFFD/g;function Rd(e){return(typeof e=="string"?e:""+e).replace(lv,`
`).replace(sv,"")}function Cd(e,t){return t=Rd(t),Rd(e)===t}function Xl(){}function ht(e,t,n,r,f,m){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||oa(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&oa(e,""+r);break;case"className":Vi(e,"class",r);break;case"tabIndex":Vi(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(e,n,r);break;case"style":Dc(e,r,m);break;case"data":if(t!=="object"){Vi(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=nl(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(n==="formAction"?(t!=="input"&&ht(e,t,"name",f.name,f,null),ht(e,t,"formEncType",f.formEncType,f,null),ht(e,t,"formMethod",f.formMethod,f,null),ht(e,t,"formTarget",f.formTarget,f,null)):(ht(e,t,"encType",f.encType,f,null),ht(e,t,"method",f.method,f,null),ht(e,t,"target",f.target,f,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=nl(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=Xl);break;case"onScroll":r!=null&&Je("scroll",e);break;case"onScrollEnd":r!=null&&Je("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(n=r.__html,n!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=nl(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Je("beforetoggle",e),Je("toggle",e),ci(e,"popover",r);break;case"xlinkActuate":Ye(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Ye(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Ye(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Ye(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Ye(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Ye(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Ye(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Ye(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Ye(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ci(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Hp.get(n)||n,ci(e,n,r))}}function _u(e,t,n,r,f,m){switch(n){case"style":Dc(e,r,m);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(a(61));if(n=r.__html,n!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=n}}break;case"children":typeof r=="string"?oa(e,r):(typeof r=="number"||typeof r=="bigint")&&oa(e,""+r);break;case"onScroll":r!=null&&Je("scroll",e);break;case"onScrollEnd":r!=null&&Je("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Xl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ln.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(f=n.endsWith("Capture"),t=n.slice(2,f?n.length-7:void 0),m=e[he]||null,m=m!=null?m[n]:null,typeof m=="function"&&e.removeEventListener(t,m,f),typeof r=="function")){typeof m!="function"&&m!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,f);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):ci(e,n,r)}}}function Ut(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",e),Je("load",e);var r=!1,f=!1,m;for(m in n)if(n.hasOwnProperty(m)){var E=n[m];if(E!=null)switch(m){case"src":r=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ht(e,t,m,E,n,null)}}f&&ht(e,t,"srcSet",n.srcSet,n,null),r&&ht(e,t,"src",n.src,n,null);return;case"input":Je("invalid",e);var R=m=E=f=null,P=null,Z=null;for(r in n)if(n.hasOwnProperty(r)){var $=n[r];if($!=null)switch(r){case"name":f=$;break;case"type":E=$;break;case"checked":P=$;break;case"defaultChecked":Z=$;break;case"value":m=$;break;case"defaultValue":R=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,t));break;default:ht(e,t,r,$,n,null)}}_c(e,m,R,P,Z,E,f,!1),tl(e);return;case"select":Je("invalid",e),r=E=m=null;for(f in n)if(n.hasOwnProperty(f)&&(R=n[f],R!=null))switch(f){case"value":m=R;break;case"defaultValue":E=R;break;case"multiple":r=R;default:ht(e,t,f,R,n,null)}t=m,n=E,e.multiple=!!r,t!=null?sa(e,!!r,t,!1):n!=null&&sa(e,!!r,n,!0);return;case"textarea":Je("invalid",e),m=f=r=null;for(E in n)if(n.hasOwnProperty(E)&&(R=n[E],R!=null))switch(E){case"value":r=R;break;case"defaultValue":f=R;break;case"children":m=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:ht(e,t,E,R,n,null)}Rc(e,r,f,m),tl(e);return;case"option":for(P in n)if(n.hasOwnProperty(P)&&(r=n[P],r!=null))switch(P){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:ht(e,t,P,r,n,null)}return;case"dialog":Je("beforetoggle",e),Je("toggle",e),Je("cancel",e),Je("close",e);break;case"iframe":case"object":Je("load",e);break;case"video":case"audio":for(r=0;r<Or.length;r++)Je(Or[r],e);break;case"image":Je("error",e),Je("load",e);break;case"details":Je("toggle",e);break;case"embed":case"source":case"link":Je("error",e),Je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in n)if(n.hasOwnProperty(Z)&&(r=n[Z],r!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ht(e,t,Z,r,n,null)}return;default:if(Fs(t)){for($ in n)n.hasOwnProperty($)&&(r=n[$],r!==void 0&&_u(e,t,$,r,n,void 0));return}}for(R in n)n.hasOwnProperty(R)&&(r=n[R],r!=null&&ht(e,t,R,r,n,null))}function ov(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,R=null,P=null,Z=null,$=null;for(W in n){var ne=n[W];if(n.hasOwnProperty(W)&&ne!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":P=ne;default:r.hasOwnProperty(W)||ht(e,t,W,null,r,ne)}}for(var Y in r){var W=r[Y];if(ne=n[Y],r.hasOwnProperty(Y)&&(W!=null||ne!=null))switch(Y){case"type":m=W;break;case"name":f=W;break;case"checked":Z=W;break;case"defaultChecked":$=W;break;case"value":E=W;break;case"defaultValue":R=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,t));break;default:W!==ne&&ht(e,t,Y,W,r,ne)}}Hs(e,E,R,P,Z,$,m,f);return;case"select":W=E=R=Y=null;for(m in n)if(P=n[m],n.hasOwnProperty(m)&&P!=null)switch(m){case"value":break;case"multiple":W=P;default:r.hasOwnProperty(m)||ht(e,t,m,null,r,P)}for(f in r)if(m=r[f],P=n[f],r.hasOwnProperty(f)&&(m!=null||P!=null))switch(f){case"value":Y=m;break;case"defaultValue":R=m;break;case"multiple":E=m;default:m!==P&&ht(e,t,f,m,r,P)}t=R,n=E,r=W,Y!=null?sa(e,!!n,Y,!1):!!r!=!!n&&(t!=null?sa(e,!!n,t,!0):sa(e,!!n,n?[]:"",!1));return;case"textarea":W=Y=null;for(R in n)if(f=n[R],n.hasOwnProperty(R)&&f!=null&&!r.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ht(e,t,R,null,r,f)}for(E in r)if(f=r[E],m=n[E],r.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":Y=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&ht(e,t,E,f,r,m)}bc(e,Y,W);return;case"option":for(var je in n)if(Y=n[je],n.hasOwnProperty(je)&&Y!=null&&!r.hasOwnProperty(je))switch(je){case"selected":e.selected=!1;break;default:ht(e,t,je,null,r,Y)}for(P in r)if(Y=r[P],W=n[P],r.hasOwnProperty(P)&&Y!==W&&(Y!=null||W!=null))switch(P){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ht(e,t,P,Y,r,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in n)Y=n[Be],n.hasOwnProperty(Be)&&Y!=null&&!r.hasOwnProperty(Be)&&ht(e,t,Be,null,r,Y);for(Z in r)if(Y=r[Z],W=n[Z],r.hasOwnProperty(Z)&&Y!==W&&(Y!=null||W!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,t));break;default:ht(e,t,Z,Y,r,W)}return;default:if(Fs(t)){for(var ft in n)Y=n[ft],n.hasOwnProperty(ft)&&Y!==void 0&&!r.hasOwnProperty(ft)&&_u(e,t,ft,void 0,r,Y);for($ in r)Y=r[$],W=n[$],!r.hasOwnProperty($)||Y===W||Y===void 0&&W===void 0||_u(e,t,$,Y,r,W);return}}for(var G in n)Y=n[G],n.hasOwnProperty(G)&&Y!=null&&!r.hasOwnProperty(G)&&ht(e,t,G,null,r,Y);for(ne in r)Y=r[ne],W=n[ne],!r.hasOwnProperty(ne)||Y===W||Y==null&&W==null||ht(e,t,ne,Y,r,W)}var bu=null,Ru=null;function Ql(e){return e.nodeType===9?e:e.ownerDocument}function Dd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ad(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Cu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Du=null;function uv(){var e=window.event;return e&&e.type==="popstate"?e===Du?!1:(Du=e,!0):(Du=null,!1)}var Od=typeof setTimeout=="function"?setTimeout:void 0,cv=typeof clearTimeout=="function"?clearTimeout:void 0,Md=typeof Promise=="function"?Promise:void 0,hv=typeof queueMicrotask=="function"?queueMicrotask:typeof Md<"u"?function(e){return Md.resolve(null).then(e).catch(fv)}:Od;function fv(e){setTimeout(function(){throw e})}function Rn(e){return e==="head"}function Pd(e,t){var n=t,r=0,f=0;do{var m=n.nextSibling;if(e.removeChild(n),m&&m.nodeType===8)if(n=m.data,n==="/$"){if(0<r&&8>r){n=r;var E=e.ownerDocument;if(n&1&&Pr(E.documentElement),n&2&&Pr(E.body),n&4)for(n=E.head,Pr(n),E=n.firstChild;E;){var R=E.nextSibling,P=E.nodeName;E[Fe]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&E.rel.toLowerCase()==="stylesheet"||n.removeChild(E),E=R}}if(f===0){e.removeChild(m),jr(t);return}f--}else n==="$"||n==="$?"||n==="$!"?f++:r=n.charCodeAt(0)-48;else r=0;n=m}while(n);jr(t)}function Au(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Au(n),De(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function dv(e,t,n,r){for(;e.nodeType===1;){var f=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=Ri(e.nextSibling),e===null)break}return null}function gv(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ri(e.nextSibling),e===null))return null;return e}function Ou(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function pv(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Ri(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Mu=null;function zd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function Ld(e,t,n){switch(t=Ql(n),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Pr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);De(e)}var yi=new Map,Nd=new Set;function Kl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var an=oe.d;oe.d={f:mv,r:vv,D:yv,C:Tv,L:wv,m:xv,X:Sv,S:Ev,M:_v};function mv(){var e=an.f(),t=kl();return e||t}function vv(e){var t=nt(e);t!==null&&t.tag===5&&t.type==="form"?ef(t):an.r(e)}var Ha=typeof document>"u"?null:document;function Bd(e,t,n){var r=Ha;if(r&&typeof t=="string"&&t){var f=hi(t);f='link[rel="'+e+'"][href="'+f+'"]',typeof n=="string"&&(f+='[crossorigin="'+n+'"]'),Nd.has(f)||(Nd.add(f),e={rel:e,crossOrigin:n,href:t},r.querySelector(f)===null&&(t=r.createElement("link"),Ut(t,"link",e),at(t),r.head.appendChild(t)))}}function yv(e){an.D(e),Bd("dns-prefetch",e,null)}function Tv(e,t){an.C(e,t),Bd("preconnect",e,t)}function wv(e,t,n){an.L(e,t,n);var r=Ha;if(r&&e&&t){var f='link[rel="preload"][as="'+hi(t)+'"]';t==="image"&&n&&n.imageSrcSet?(f+='[imagesrcset="'+hi(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(f+='[imagesizes="'+hi(n.imageSizes)+'"]')):f+='[href="'+hi(e)+'"]';var m=f;switch(t){case"style":m=Ua(e);break;case"script":m=Fa(e)}yi.has(m)||(e=g({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),yi.set(m,e),r.querySelector(f)!==null||t==="style"&&r.querySelector(zr(m))||t==="script"&&r.querySelector(Lr(m))||(t=r.createElement("link"),Ut(t,"link",e),at(t),r.head.appendChild(t)))}}function xv(e,t){an.m(e,t);var n=Ha;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",f='link[rel="modulepreload"][as="'+hi(r)+'"][href="'+hi(e)+'"]',m=f;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Fa(e)}if(!yi.has(m)&&(e=g({rel:"modulepreload",href:e},t),yi.set(m,e),n.querySelector(f)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Lr(m)))return}r=n.createElement("link"),Ut(r,"link",e),at(r),n.head.appendChild(r)}}}function Ev(e,t,n){an.S(e,t,n);var r=Ha;if(r&&e){var f=wt(r).hoistableStyles,m=Ua(e);t=t||"default";var E=f.get(m);if(!E){var R={loading:0,preload:null};if(E=r.querySelector(zr(m)))R.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":t},n),(n=yi.get(m))&&Pu(e,n);var P=E=r.createElement("link");at(P),Ut(P,"link",e),P._p=new Promise(function(Z,$){P.onload=Z,P.onerror=$}),P.addEventListener("load",function(){R.loading|=1}),P.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Jl(E,t,r)}E={type:"stylesheet",instance:E,count:1,state:R},f.set(m,E)}}}function Sv(e,t){an.X(e,t);var n=Ha;if(n&&e){var r=wt(n).hoistableScripts,f=Fa(e),m=r.get(f);m||(m=n.querySelector(Lr(f)),m||(e=g({src:e,async:!0},t),(t=yi.get(f))&&zu(e,t),m=n.createElement("script"),at(m),Ut(m,"link",e),n.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},r.set(f,m))}}function _v(e,t){an.M(e,t);var n=Ha;if(n&&e){var r=wt(n).hoistableScripts,f=Fa(e),m=r.get(f);m||(m=n.querySelector(Lr(f)),m||(e=g({src:e,async:!0,type:"module"},t),(t=yi.get(f))&&zu(e,t),m=n.createElement("script"),at(m),Ut(m,"link",e),n.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},r.set(f,m))}}function Hd(e,t,n,r){var f=(f=Ce.current)?Kl(f):null;if(!f)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ua(n.href),n=wt(f).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ua(n.href);var m=wt(f).hoistableStyles,E=m.get(e);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,E),(m=f.querySelector(zr(e)))&&!m._p&&(E.instance=m,E.state.loading=5),yi.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},yi.set(e,n),m||bv(f,e,n,E.state))),t&&r===null)throw Error(a(528,""));return E}if(t&&r!==null)throw Error(a(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Fa(n),n=wt(f).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ua(e){return'href="'+hi(e)+'"'}function zr(e){return'link[rel="stylesheet"]['+e+"]"}function Ud(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function bv(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Ut(t,"link",n),at(t),e.head.appendChild(t))}function Fa(e){return'[src="'+hi(e)+'"]'}function Lr(e){return"script[async]"+e}function Fd(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+hi(n.href)+'"]');if(r)return t.instance=r,at(r),r;var f=g({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),at(r),Ut(r,"style",f),Jl(r,n.precedence,e),t.instance=r;case"stylesheet":f=Ua(n.href);var m=e.querySelector(zr(f));if(m)return t.state.loading|=4,t.instance=m,at(m),m;r=Ud(n),(f=yi.get(f))&&Pu(r,f),m=(e.ownerDocument||e).createElement("link"),at(m);var E=m;return E._p=new Promise(function(R,P){E.onload=R,E.onerror=P}),Ut(m,"link",r),t.state.loading|=4,Jl(m,n.precedence,e),t.instance=m;case"script":return m=Fa(n.src),(f=e.querySelector(Lr(m)))?(t.instance=f,at(f),f):(r=n,(f=yi.get(m))&&(r=g({},n),zu(r,f)),e=e.ownerDocument||e,f=e.createElement("script"),at(f),Ut(f,"link",r),e.head.appendChild(f),t.instance=f);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Jl(r,n.precedence,e));return t.instance}function Jl(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=r.length?r[r.length-1]:null,m=f,E=0;E<r.length;E++){var R=r[E];if(R.dataset.precedence===t)m=R;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Pu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function zu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $l=null;function jd(e,t,n){if($l===null){var r=new Map,f=$l=new Map;f.set(n,r)}else f=$l,r=f.get(n),r||(r=new Map,f.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),f=0;f<n.length;f++){var m=n[f];if(!(m[Fe]||m[re]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(t)||"";E=e+E;var R=r.get(E);R?R.push(m):r.set(E,[m])}}return r}function Gd(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Rv(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function kd(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Nr=null;function Cv(){}function Dv(e,t,n){if(Nr===null)throw Error(a(475));var r=Nr;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var f=Ua(n.href),m=e.querySelector(zr(f));if(m){e=m._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(r.count++,r=es.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=m,at(m);return}m=e.ownerDocument||e,n=Ud(n),(f=yi.get(f))&&Pu(n,f),m=m.createElement("link"),at(m);var E=m;E._p=new Promise(function(R,P){E.onload=R,E.onerror=P}),Ut(m,"link",n),t.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(r.count++,t=es.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}function Av(){if(Nr===null)throw Error(a(475));var e=Nr;return e.stylesheets&&e.count===0&&Lu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Lu(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function es(){if(this.count--,this.count===0){if(this.stylesheets)Lu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ts=null;function Lu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ts=new Map,t.forEach(Ov,e),ts=null,es.call(e))}function Ov(e,t){if(!(t.state.loading&4)){var n=ts.get(e);if(n)var r=n.get(null);else{n=new Map,ts.set(e,n);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(n.set(E.dataset.precedence,E),r=E)}r&&n.set(null,r)}f=t.instance,E=f.getAttribute("data-precedence"),m=n.get(E)||r,m===r&&n.set(null,f),n.set(E,f),this.count++,r=es.bind(this),f.addEventListener("load",r),f.addEventListener("error",r),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),t.state.loading|=4}}var Br={$$typeof:H,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function Mv(e,t,n,r,f,m,E,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ki(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ki(0),this.hiddenUpdates=ki(null),this.identifierPrefix=r,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Vd(e,t,n,r,f,m,E,R,P,Z,$,ne){return e=new Mv(e,t,n,E,R,P,Z,ne),t=1,m===!0&&(t|=24),m=ti(3,null,null,t),e.current=m,m.stateNode=e,t=po(),t.refCount++,e.pooledCache=t,t.refCount++,m.memoizedState={element:r,isDehydrated:n,cache:t},To(m),e}function qd(e){return e?(e=ma,e):ma}function Id(e,t,n,r,f,m){f=qd(f),r.context===null?r.context=f:r.pendingContext=f,r=dn(t),r.payload={element:n},m=m===void 0?null:m,m!==null&&(r.callback=m),n=gn(e,r,t),n!==null&&(li(n,e,t),fr(n,e,t))}function Zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nu(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function Yd(e){if(e.tag===13){var t=pa(e,67108864);t!==null&&li(t,e,67108864),Nu(e,67108864)}}var is=!0;function Pv(e,t,n,r){var f=k.T;k.T=null;var m=oe.p;try{oe.p=2,Bu(e,t,n,r)}finally{oe.p=m,k.T=f}}function zv(e,t,n,r){var f=k.T;k.T=null;var m=oe.p;try{oe.p=8,Bu(e,t,n,r)}finally{oe.p=m,k.T=f}}function Bu(e,t,n,r){if(is){var f=Hu(r);if(f===null)Su(e,t,r,ns,n),Xd(e,r);else if(Nv(f,e,t,n,r))r.stopPropagation();else if(Xd(e,r),t&4&&-1<Lv.indexOf(e)){for(;f!==null;){var m=nt(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=_e(m.pendingLanes);if(E!==0){var R=m;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var P=1<<31-S(E);R.entanglements[1]|=P,E&=~P}Hi(m),(ot&6)===0&&(jl=T()+500,Ar(0))}}break;case 13:R=pa(m,2),R!==null&&li(R,m,2),kl(),Nu(m,2)}if(m=Hu(r),m===null&&Su(e,t,r,ns,n),m===f)break;f=m}f!==null&&r.stopPropagation()}else Su(e,t,r,null,n)}}function Hu(e){return e=Gs(e),Uu(e)}var ns=null;function Uu(e){if(ns=null,e=ke(e),e!==null){var t=l(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=u(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ns=e,null}function Wd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(O()){case I:return 2;case le:return 8;case fe:case we:return 32;case ie:return 268435456;default:return 32}default:return 32}}var Fu=!1,Cn=null,Dn=null,An=null,Hr=new Map,Ur=new Map,On=[],Lv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xd(e,t){switch(e){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Hr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(t.pointerId)}}function Fr(e,t,n,r,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:m,targetContainers:[f]},t!==null&&(t=nt(t),t!==null&&Yd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,f!==null&&t.indexOf(f)===-1&&t.push(f),e)}function Nv(e,t,n,r,f){switch(t){case"focusin":return Cn=Fr(Cn,e,t,n,r,f),!0;case"dragenter":return Dn=Fr(Dn,e,t,n,r,f),!0;case"mouseover":return An=Fr(An,e,t,n,r,f),!0;case"pointerover":var m=f.pointerId;return Hr.set(m,Fr(Hr.get(m)||null,e,t,n,r,f)),!0;case"gotpointercapture":return m=f.pointerId,Ur.set(m,Fr(Ur.get(m)||null,e,t,n,r,f)),!0}return!1}function Qd(e){var t=ke(e.target);if(t!==null){var n=l(t);if(n!==null){if(t=n.tag,t===13){if(t=u(n),t!==null){e.blockedOn=t,V(e.priority,function(){if(n.tag===13){var r=ri();r=Ia(r);var f=pa(n,r);f!==null&&li(f,n,r),Nu(n,r)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function as(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hu(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);js=r,n.target.dispatchEvent(r),js=null}else return t=nt(n),t!==null&&Yd(t),e.blockedOn=n,!1;t.shift()}return!0}function Kd(e,t,n){as(e)&&n.delete(t)}function Bv(){Fu=!1,Cn!==null&&as(Cn)&&(Cn=null),Dn!==null&&as(Dn)&&(Dn=null),An!==null&&as(An)&&(An=null),Hr.forEach(Kd),Ur.forEach(Kd)}function rs(e,t){e.blockedOn===t&&(e.blockedOn=null,Fu||(Fu=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Bv)))}var ls=null;function Jd(e){ls!==e&&(ls=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){ls===e&&(ls=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],f=e[t+2];if(typeof r!="function"){if(Uu(r||n)===null)continue;break}var m=nt(n);m!==null&&(e.splice(t,3),t-=3,Uo(m,{pending:!0,data:f,method:n.method,action:r},r,f))}}))}function jr(e){function t(P){return rs(P,e)}Cn!==null&&rs(Cn,e),Dn!==null&&rs(Dn,e),An!==null&&rs(An,e),Hr.forEach(t),Ur.forEach(t);for(var n=0;n<On.length;n++){var r=On[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<On.length&&(n=On[0],n.blockedOn===null);)Qd(n),n.blockedOn===null&&On.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var f=n[r],m=n[r+1],E=f[he]||null;if(typeof m=="function")E||Jd(n);else if(E){var R=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[he]||null)R=E.formAction;else if(Uu(f)!==null)continue}else R=E.action;typeof R=="function"?n[r+1]=R:(n.splice(r,3),r-=3),Jd(n)}}}function ju(e){this._internalRoot=e}ss.prototype.render=ju.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var n=t.current,r=ri();Id(n,r,e,t,null,null)},ss.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Id(e.current,2,null,e,null,null),kl(),t[Re]=null}};function ss(e){this._internalRoot=e}ss.prototype.unstable_scheduleHydration=function(e){if(e){var t=N();e={blockedOn:null,target:e,priority:t};for(var n=0;n<On.length&&t!==0&&t<On[n].priority;n++);On.splice(n,0,e),n===0&&Qd(e)}};var $d=p.version;if($d!=="19.1.0")throw Error(a(527,$d,"19.1.0"));oe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=h(t),e=e!==null?c(e):null,e=e===null?null:e.stateNode,e};var Hv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var os=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!os.isDisabled&&os.supportsFiber)try{Ie=os.inject(Hv),Te=os}catch{}}return kr.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",f=pf,m=mf,E=vf,R=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(f=t.onUncaughtError),t.onCaughtError!==void 0&&(m=t.onCaughtError),t.onRecoverableError!==void 0&&(E=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(R=t.unstable_transitionCallbacks)),t=Vd(e,1,!1,null,null,n,r,f,m,E,R,null),e[Re]=t.current,Eu(e),new ju(t)},kr.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,f="",m=pf,E=mf,R=vf,P=null,Z=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(E=n.onCaughtError),n.onRecoverableError!==void 0&&(R=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(P=n.unstable_transitionCallbacks),n.formState!==void 0&&(Z=n.formState)),t=Vd(e,1,!0,t,n??null,r,f,m,E,R,P,Z),t.context=qd(null),n=t.current,r=ri(),r=Ia(r),f=dn(r),f.callback=null,gn(n,f,r),n=r,t.current.lanes=n,Pi(t,n),Hi(t),e[Re]=t.current,Eu(e),new ss(t)},kr.version="19.1.0",kr}var ug;function Xv(){if(ug)return qu.exports;ug=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(p){console.error(p)}}return o(),qu.exports=Wv(),qu.exports}var Qv=Xv(),Vr={},cg;function Kv(){if(cg)return Vr;cg=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.parse=u,Vr.serialize=c;const o=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,p=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function u(y,w){const _=new l,b=y.length;if(b<2)return _;const C=(w==null?void 0:w.decode)||g;let A=0;do{const z=y.indexOf("=",A);if(z===-1)break;const H=y.indexOf(";",A),ae=H===-1?b:H;if(z>ae){A=y.lastIndexOf(";",z-1)+1;continue}const Q=d(y,A,z),U=h(y,z,Q),pe=y.slice(Q,U);if(_[pe]===void 0){let ye=d(y,z+1,ae),ge=h(y,ae,ye);const Ge=C(y.slice(ye,ge));_[pe]=Ge}A=ae+1}while(A<b);return _}function d(y,w,_){do{const b=y.charCodeAt(w);if(b!==32&&b!==9)return w}while(++w<_);return _}function h(y,w,_){for(;w>_;){const b=y.charCodeAt(--w);if(b!==32&&b!==9)return w+1}return _}function c(y,w,_){const b=(_==null?void 0:_.encode)||encodeURIComponent;if(!o.test(y))throw new TypeError(`argument name is invalid: ${y}`);const C=b(w);if(!p.test(C))throw new TypeError(`argument val is invalid: ${w}`);let A=y+"="+C;if(!_)return A;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);A+="; Max-Age="+_.maxAge}if(_.domain){if(!i.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);A+="; Domain="+_.domain}if(_.path){if(!a.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);A+="; Path="+_.path}if(_.expires){if(!v(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);A+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(A+="; HttpOnly"),_.secure&&(A+="; Secure"),_.partitioned&&(A+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":A+="; Priority=Low";break;case"medium":A+="; Priority=Medium";break;case"high":A+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":A+="; SameSite=Strict";break;case"lax":A+="; SameSite=Lax";break;case"none":A+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return A}function g(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function v(y){return s.call(y)==="[object Date]"}return Vr}Kv();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Qg=o=>{throw TypeError(o)},Jv=(o,p,i)=>p.has(o)||Qg("Cannot "+i),Wu=(o,p,i)=>(Jv(o,p,"read from private field"),i?i.call(o):p.get(o)),$v=(o,p,i)=>p.has(o)?Qg("Cannot add the same private member more than once"):p instanceof WeakSet?p.add(o):p.set(o,i),hg="popstate";function ey(o={}){function p(s,l){let{pathname:u="/",search:d="",hash:h=""}=rn(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Kr("",{pathname:u,search:d,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(s,l){let u=s.document.querySelector("base"),d="";if(u&&u.getAttribute("href")){let h=s.location.href,c=h.indexOf("#");d=c===-1?h:h.slice(0,c)}return d+"#"+(typeof l=="string"?l:Ln(l))}function a(s,l){bt(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return iy(p,i,a,o)}function Xe(o,p){if(o===!1||o===null||typeof o>"u")throw new Error(p)}function bt(o,p){if(!o){typeof console<"u"&&console.warn(p);try{throw new Error(p)}catch{}}}function ty(){return Math.random().toString(36).substring(2,10)}function fg(o,p){return{usr:o.state,key:o.key,idx:p}}function Kr(o,p,i=null,a){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof p=="string"?rn(p):p,state:i,key:p&&p.key||a||ty()}}function Ln({pathname:o="/",search:p="",hash:i=""}){return p&&p!=="?"&&(o+=p.charAt(0)==="?"?p:"?"+p),i&&i!=="#"&&(o+=i.charAt(0)==="#"?i:"#"+i),o}function rn(o){let p={};if(o){let i=o.indexOf("#");i>=0&&(p.hash=o.substring(i),o=o.substring(0,i));let a=o.indexOf("?");a>=0&&(p.search=o.substring(a),o=o.substring(0,a)),o&&(p.pathname=o)}return p}function iy(o,p,i,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,u=s.history,d="POP",h=null,c=g();c==null&&(c=0,u.replaceState({...u.state,idx:c},""));function g(){return(u.state||{idx:null}).idx}function v(){d="POP";let C=g(),A=C==null?null:C-c;c=C,h&&h({action:d,location:b.location,delta:A})}function y(C,A){d="PUSH";let z=Kr(b.location,C,A);i&&i(z,C),c=g()+1;let H=fg(z,c),ae=b.createHref(z);try{u.pushState(H,"",ae)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;s.location.assign(ae)}l&&h&&h({action:d,location:b.location,delta:1})}function w(C,A){d="REPLACE";let z=Kr(b.location,C,A);i&&i(z,C),c=g();let H=fg(z,c),ae=b.createHref(z);u.replaceState(H,"",ae),l&&h&&h({action:d,location:b.location,delta:0})}function _(C){let A=s.location.origin!=="null"?s.location.origin:s.location.href,z=typeof C=="string"?C:Ln(C);return z=z.replace(/ $/,"%20"),Xe(A,`No window.location.(origin|href) available to create URL for href: ${z}`),new URL(z,A)}let b={get action(){return d},get location(){return o(s,u)},listen(C){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(hg,v),h=C,()=>{s.removeEventListener(hg,v),h=null}},createHref(C){return p(s,C)},createURL:_,encodeLocation(C){let A=_(C);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:y,replace:w,go(C){return u.go(C)}};return b}var Wr,dg=class{constructor(o){if($v(this,Wr,new Map),o)for(let[p,i]of o)this.set(p,i)}get(o){if(Wu(this,Wr).has(o))return Wu(this,Wr).get(o);if(o.defaultValue!==void 0)return o.defaultValue;throw new Error("No value found for context")}set(o,p){Wu(this,Wr).set(o,p)}};Wr=new WeakMap;var ny=new Set(["lazy","caseSensitive","path","id","index","children"]);function ay(o){return ny.has(o)}var ry=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function ly(o){return ry.has(o)}function sy(o){return o.index===!0}function Ts(o,p,i=[],a={}){return o.map((s,l)=>{let u=[...i,String(l)],d=typeof s.id=="string"?s.id:u.join("-");if(Xe(s.index!==!0||!s.children,"Cannot specify children on an index route"),Xe(!a[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),sy(s)){let h={...s,...p(s),id:d};return a[d]=h,h}else{let h={...s,...p(s),id:d,children:void 0};return a[d]=h,s.children&&(h.children=Ts(s.children,p,u,a)),h}})}function zn(o,p,i="/"){return fs(o,p,i,!1)}function fs(o,p,i,a){let s=typeof p=="string"?rn(p):p,l=wi(s.pathname||"/",i);if(l==null)return null;let u=Kg(o);uy(u);let d=null;for(let h=0;d==null&&h<u.length;++h){let c=wy(l);d=yy(u[h],c,a)}return d}function oy(o,p){let{route:i,pathname:a,params:s}=o;return{id:i.id,pathname:a,params:s,data:p[i.id],handle:i.handle}}function Kg(o,p=[],i=[],a=""){let s=(l,u,d)=>{let h={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};h.relativePath.startsWith("/")&&(Xe(h.relativePath.startsWith(a),`Absolute route path "${h.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(a.length));let c=Fi([a,h.relativePath]),g=i.concat(h);l.children&&l.children.length>0&&(Xe(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Kg(l.children,p,g,c)),!(l.path==null&&!l.index)&&p.push({path:c,score:my(c,l.index),routesMeta:g})};return o.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))s(l,u);else for(let h of Jg(l.path))s(l,u,h)}),p}function Jg(o){let p=o.split("/");if(p.length===0)return[];let[i,...a]=p,s=i.endsWith("?"),l=i.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let u=Jg(a.join("/")),d=[];return d.push(...u.map(h=>h===""?l:[l,h].join("/"))),s&&d.push(...u),d.map(h=>o.startsWith("/")&&h===""?"/":h)}function uy(o){o.sort((p,i)=>p.score!==i.score?i.score-p.score:vy(p.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var cy=/^:[\w-]+$/,hy=3,fy=2,dy=1,gy=10,py=-2,gg=o=>o==="*";function my(o,p){let i=o.split("/"),a=i.length;return i.some(gg)&&(a+=py),p&&(a+=fy),i.filter(s=>!gg(s)).reduce((s,l)=>s+(cy.test(l)?hy:l===""?dy:gy),a)}function vy(o,p){return o.length===p.length&&o.slice(0,-1).every((a,s)=>a===p[s])?o[o.length-1]-p[p.length-1]:0}function yy(o,p,i=!1){let{routesMeta:a}=o,s={},l="/",u=[];for(let d=0;d<a.length;++d){let h=a[d],c=d===a.length-1,g=l==="/"?p:p.slice(l.length)||"/",v=ws({path:h.relativePath,caseSensitive:h.caseSensitive,end:c},g),y=h.route;if(!v&&c&&i&&!a[a.length-1].route.index&&(v=ws({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:Fi([l,v.pathname]),pathnameBase:Sy(Fi([l,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(l=Fi([l,v.pathnameBase]))}return u}function ws(o,p){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[i,a]=Ty(o.path,o.caseSensitive,o.end),s=p.match(i);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((c,{paramName:g,isOptional:v},y)=>{if(g==="*"){let _=d[y]||"";u=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const w=d[y];return v&&!w?c[g]=void 0:c[g]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:l,pathnameBase:u,pattern:o}}function Ty(o,p=!1,i=!0){bt(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let a=[],s="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,h)=>(a.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(a.push({paramName:"*"}),s+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":o!==""&&o!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,p?void 0:"i"),a]}function wy(o){try{return o.split("/").map(p=>decodeURIComponent(p).replace(/\//g,"%2F")).join("/")}catch(p){return bt(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${p}).`),o}}function wi(o,p){if(p==="/")return o;if(!o.toLowerCase().startsWith(p.toLowerCase()))return null;let i=p.endsWith("/")?p.length-1:p.length,a=o.charAt(i);return a&&a!=="/"?null:o.slice(i)||"/"}function xy(o,p="/"){let{pathname:i,search:a="",hash:s=""}=typeof o=="string"?rn(o):o;return{pathname:i?i.startsWith("/")?i:Ey(i,p):p,search:_y(a),hash:by(s)}}function Ey(o,p){let i=p.replace(/\/+$/,"").split("/");return o.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function Xu(o,p,i,a){return`Cannot include a '${o}' character in a manually specified \`to.${p}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $g(o){return o.filter((p,i)=>i===0||p.route.path&&p.route.path.length>0)}function bs(o){let p=$g(o);return p.map((i,a)=>a===p.length-1?i.pathname:i.pathnameBase)}function Rs(o,p,i,a=!1){let s;typeof o=="string"?s=rn(o):(s={...o},Xe(!s.pathname||!s.pathname.includes("?"),Xu("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),Xu("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),Xu("#","search","hash",s)));let l=o===""||s.pathname==="",u=l?"/":s.pathname,d;if(u==null)d=i;else{let v=p.length-1;if(!a&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}d=v>=0?p[v]:"/"}let h=xy(s,d),c=u&&u!=="/"&&u.endsWith("/"),g=(l||u===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(c||g)&&(h.pathname+="/"),h}var Fi=o=>o.join("/").replace(/\/\/+/g,"/"),Sy=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),_y=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,by=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o,xs=class{constructor(o,p,i,a=!1){this.status=o,this.statusText=p||"",this.internal=a,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function Jr(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var ep=["POST","PUT","PATCH","DELETE"],Ry=new Set(ep),Cy=["GET",...ep],Dy=new Set(Cy),Ay=new Set([301,302,303,307,308]),Oy=new Set([307,308]),Qu={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},My={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},qr={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},cc=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Py=o=>({hasErrorBoundary:!!o.hasErrorBoundary}),tp="remix-router-transitions",ip=Symbol("ResetLoaderData");function zy(o){const p=o.window?o.window:typeof window<"u"?window:void 0,i=typeof p<"u"&&typeof p.document<"u"&&typeof p.document.createElement<"u";Xe(o.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=o.hydrationRouteProperties||[],s=o.mapRouteProperties||Py,l={},u=Ts(o.routes,s,void 0,l),d,h=o.basename||"/",c=o.dataStrategy||Uy,g={unstable_middleware:!1,...o.future},v=null,y=new Set,w=null,_=null,b=null,C=o.hydrationData!=null,A=zn(u,o.history.location,h),z=!1,H=null;if(A==null&&!o.patchRoutesOnNavigation){let N=Ti(404,{pathname:o.history.location.pathname}),{matches:V,route:X}=Rg(u);A=V,H={[X.id]:N}}A&&!o.hydrationData&&Un(A,u,o.history.location.pathname).active&&(A=null);let ae;if(A)if(A.some(N=>N.route.lazy))ae=!1;else if(!A.some(N=>N.route.loader))ae=!0;else{let N=o.hydrationData?o.hydrationData.loaderData:null,V=o.hydrationData?o.hydrationData.errors:null;if(V){let X=A.findIndex(re=>V[re.route.id]!==void 0);ae=A.slice(0,X+1).every(re=>!ic(re.route,N,V))}else ae=A.every(X=>!ic(X.route,N,V))}else{ae=!1,A=[];let N=Un(null,u,o.history.location.pathname);N.active&&N.matches&&(z=!0,A=N.matches)}let Q,U={historyAction:o.history.action,location:o.history.location,matches:A,initialized:ae,navigation:Qu,restoreScrollPosition:o.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:o.hydrationData&&o.hydrationData.loaderData||{},actionData:o.hydrationData&&o.hydrationData.actionData||null,errors:o.hydrationData&&o.hydrationData.errors||H,fetchers:new Map,blockers:new Map},pe="POP",ye=!1,ge,Ge=!1,ce=new Map,ue=null,de=!1,Pe=!1,ze=new Set,k=new Map,oe=0,me=-1,Le=new Map,L=new Set,ee=new Map,ve=new Map,J=new Set,Ee=new Map,Ve,Ce=null;function Et(){if(v=o.history.listen(({action:N,location:V,delta:X})=>{if(Ve){Ve(),Ve=void 0;return}bt(Ee.size===0||X!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let re=Pt({currentLocation:U.location,nextLocation:V,historyAction:N});if(re&&X!=null){let he=new Promise(Re=>{Ve=Re});o.history.go(X*-1),be(re,{state:"blocked",location:V,proceed(){be(re,{state:"proceeding",proceed:void 0,reset:void 0,location:V}),he.then(()=>o.history.go(X))},reset(){let Re=new Map(U.blockers);Re.set(re,qr),vt({blockers:Re})}});return}return qt(N,V)}),i){Xy(p,ce);let N=()=>Qy(p,ce);p.addEventListener("pagehide",N),ue=()=>p.removeEventListener("pagehide",N)}return U.initialized||qt("POP",U.location,{initialHydration:!0}),Q}function lt(){v&&v(),ue&&ue(),y.clear(),ge&&ge.abort(),U.fetchers.forEach((N,V)=>S(V)),U.blockers.forEach((N,V)=>Qe(V))}function Yt(N){return y.add(N),()=>y.delete(N)}function vt(N,V={}){U={...U,...N};let X=[],re=[];U.fetchers.forEach((he,Re)=>{he.state==="idle"&&(J.has(Re)?X.push(Re):re.push(Re))}),J.forEach(he=>{!U.fetchers.has(he)&&!k.has(he)&&X.push(he)}),[...y].forEach(he=>he(U,{deletedFetchers:X,viewTransitionOpts:V.viewTransitionOpts,flushSync:V.flushSync===!0})),X.forEach(he=>S(he)),re.forEach(he=>U.fetchers.delete(he))}function jt(N,V,{flushSync:X}={}){var Me,Fe;let re=U.actionData!=null&&U.navigation.formMethod!=null&&oi(U.navigation.formMethod)&&U.navigation.state==="loading"&&((Me=N.state)==null?void 0:Me._isRedirect)!==!0,he;V.actionData?Object.keys(V.actionData).length>0?he=V.actionData:he=null:re?he=U.actionData:he=null;let Re=V.loaderData?_g(U.loaderData,V.loaderData,V.matches||[],V.errors):U.loaderData,Ne=U.blockers;Ne.size>0&&(Ne=new Map(Ne),Ne.forEach((De,ke)=>Ne.set(ke,qr)));let xe=ye===!0||U.navigation.formMethod!=null&&oi(U.navigation.formMethod)&&((Fe=N.state)==null?void 0:Fe._isRedirect)!==!0;d&&(u=d,d=void 0),de||pe==="POP"||(pe==="PUSH"?o.history.push(N,N.state):pe==="REPLACE"&&o.history.replace(N,N.state));let Oe;if(pe==="POP"){let De=ce.get(U.location.pathname);De&&De.has(N.pathname)?Oe={currentLocation:U.location,nextLocation:N}:ce.has(N.pathname)&&(Oe={currentLocation:N,nextLocation:U.location})}else if(Ge){let De=ce.get(U.location.pathname);De?De.add(N.pathname):(De=new Set([N.pathname]),ce.set(U.location.pathname,De)),Oe={currentLocation:U.location,nextLocation:N}}vt({...V,actionData:he,loaderData:Re,historyAction:pe,location:N,initialized:!0,navigation:Qu,revalidation:"idle",restoreScrollPosition:Hn(N,V.matches||U.matches),preventScrollReset:xe,blockers:Ne},{viewTransitionOpts:Oe,flushSync:X===!0}),pe="POP",ye=!1,Ge=!1,de=!1,Pe=!1,Ce==null||Ce.resolve(),Ce=null}async function Ai(N,V){if(typeof N=="number"){o.history.go(N);return}let X=tc(U.location,U.matches,h,N,V==null?void 0:V.fromRouteId,V==null?void 0:V.relative),{path:re,submission:he,error:Re}=pg(!1,X,V),Ne=U.location,xe=Kr(U.location,re,V&&V.state);xe={...xe,...o.history.encodeLocation(xe)};let Oe=V&&V.replace!=null?V.replace:void 0,Me="PUSH";Oe===!0?Me="REPLACE":Oe===!1||he!=null&&oi(he.formMethod)&&he.formAction===U.location.pathname+U.location.search&&(Me="REPLACE");let Fe=V&&"preventScrollReset"in V?V.preventScrollReset===!0:void 0,De=(V&&V.flushSync)===!0,ke=Pt({currentLocation:Ne,nextLocation:xe,historyAction:Me});if(ke){be(ke,{state:"blocked",location:xe,proceed(){be(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:xe}),Ai(N,V)},reset(){let nt=new Map(U.blockers);nt.set(ke,qr),vt({blockers:nt})}});return}await qt(Me,xe,{submission:he,pendingError:Re,preventScrollReset:Fe,replace:V&&V.replace,enableViewTransition:V&&V.viewTransition,flushSync:De})}function Oi(){Ce||(Ce=Ky()),$e(),vt({revalidation:"loading"});let N=Ce.promise;return U.navigation.state==="submitting"?N:U.navigation.state==="idle"?(qt(U.historyAction,U.location,{startUninterruptedRevalidation:!0}),N):(qt(pe||U.historyAction,U.navigation.location,{overrideNavigation:U.navigation,enableViewTransition:Ge===!0}),N)}async function qt(N,V,X){ge&&ge.abort(),ge=null,pe=N,de=(X&&X.startUninterruptedRevalidation)===!0,Pi(U.location,U.matches),ye=(X&&X.preventScrollReset)===!0,Ge=(X&&X.enableViewTransition)===!0;let re=d||u,he=X&&X.overrideNavigation,Re=X!=null&&X.initialHydration&&U.matches&&U.matches.length>0&&!z?U.matches:zn(re,V,h),Ne=(X&&X.flushSync)===!0;if(Re&&U.initialized&&!Pe&&qy(U.location,V)&&!(X&&X.submission&&oi(X.submission.formMethod))){jt(V,{matches:Re},{flushSync:Ne});return}let xe=Un(Re,re,V.pathname);if(xe.active&&xe.matches&&(Re=xe.matches),!Re){let{error:wt,notFoundMatches:at,route:et}=pt(V.pathname);jt(V,{matches:at,loaderData:{},errors:{[et.id]:wt}},{flushSync:Ne});return}ge=new AbortController;let Oe=ja(o.history,V,ge.signal,X&&X.submission),Me=new dg(o.unstable_getContext?await o.unstable_getContext():void 0),Fe;if(X&&X.pendingError)Fe=[na(Re).route.id,{type:"error",error:X.pendingError}];else if(X&&X.submission&&oi(X.submission.formMethod)){let wt=await Gi(Oe,V,X.submission,Re,Me,xe.active,X&&X.initialHydration===!0,{replace:X.replace,flushSync:Ne});if(wt.shortCircuited)return;if(wt.pendingActionResult){let[at,et]=wt.pendingActionResult;if(si(et)&&Jr(et.error)&&et.error.status===404){ge=null,jt(V,{matches:wt.matches,loaderData:{},errors:{[at]:et.error}});return}}Re=wt.matches||Re,Fe=wt.pendingActionResult,he=Ku(V,X.submission),Ne=!1,xe.active=!1,Oe=ja(o.history,Oe.url,Oe.signal)}let{shortCircuited:De,matches:ke,loaderData:nt,errors:mt}=await Mi(Oe,V,Re,Me,xe.active,he,X&&X.submission,X&&X.fetcherSubmission,X&&X.replace,X&&X.initialHydration===!0,Ne,Fe);De||(ge=null,jt(V,{matches:ke||Re,...bg(Fe),loaderData:nt,errors:mt}))}async function Gi(N,V,X,re,he,Re,Ne,xe={}){$e();let Oe=Yy(V,X);if(vt({navigation:Oe},{flushSync:xe.flushSync===!0}),Re){let De=await Fn(re,V.pathname,N.signal);if(De.type==="aborted")return{shortCircuited:!0};if(De.type==="error"){let ke=na(De.partialMatches).route.id;return{matches:De.partialMatches,pendingActionResult:[ke,{type:"error",error:De.error}]}}else if(De.matches)re=De.matches;else{let{notFoundMatches:ke,error:nt,route:mt}=pt(V.pathname);return{matches:ke,pendingActionResult:[mt.id,{type:"error",error:nt}]}}}let Me,Fe=Xr(re,V);if(!Fe.route.action&&!Fe.route.lazy)Me={type:"error",error:Ti(405,{method:N.method,pathname:V.pathname,routeId:Fe.route.id})};else{let De=ka(s,l,N,re,Fe,Ne?[]:a,he),ke=await ie(N,De,he,null);if(Me=ke[Fe.route.id],!Me){for(let nt of re)if(ke[nt.route.id]){Me=ke[nt.route.id];break}}if(N.signal.aborted)return{shortCircuited:!0}}if(aa(Me)){let De;return xe&&xe.replace!=null?De=xe.replace:De=xg(Me.response.headers.get("Location"),new URL(N.url),h)===U.location.pathname+U.location.search,await we(N,Me,!0,{submission:X,replace:De}),{shortCircuited:!0}}if(si(Me)){let De=na(re,Fe.route.id);return(xe&&xe.replace)!==!0&&(pe="PUSH"),{matches:re,pendingActionResult:[De.route.id,Me,Fe.route.id]}}return{matches:re,pendingActionResult:[Fe.route.id,Me]}}async function Mi(N,V,X,re,he,Re,Ne,xe,Oe,Me,Fe,De){let ke=Re||Ku(V,Ne),nt=Ne||xe||Dg(ke),mt=!de&&!Me;if(he){if(mt){let Gt=T(De);vt({navigation:ke,...Gt!==void 0?{actionData:Gt}:{}},{flushSync:Fe})}let Ye=await Fn(X,V.pathname,N.signal);if(Ye.type==="aborted")return{shortCircuited:!0};if(Ye.type==="error"){let Gt=na(Ye.partialMatches).route.id;return{matches:Ye.partialMatches,loaderData:{},errors:{[Gt]:Ye.error}}}else if(Ye.matches)X=Ye.matches;else{let{error:Gt,notFoundMatches:Ei,route:Si}=pt(V.pathname);return{matches:Ei,loaderData:{},errors:{[Si.id]:Gt}}}}let wt=d||u,{dsMatches:at,revalidatingFetchers:et}=mg(N,re,s,l,o.history,U,X,nt,V,Me?[]:a,Me===!0,Pe,ze,J,ee,L,wt,h,De);if(me=++oe,!o.dataStrategy&&!at.some(Ye=>Ye.shouldLoad)&&et.length===0){let Ye=K();return jt(V,{matches:X,loaderData:{},errors:De&&si(De[1])?{[De[0]]:De[1].error}:null,...bg(De),...Ye?{fetchers:new Map(U.fetchers)}:{}},{flushSync:Fe}),{shortCircuited:!0}}if(mt){let Ye={};if(!he){Ye.navigation=ke;let Gt=T(De);Gt!==void 0&&(Ye.actionData=Gt)}et.length>0&&(Ye.fetchers=O(et)),vt(Ye,{flushSync:Fe})}et.forEach(Ye=>{D(Ye.key),Ye.controller&&k.set(Ye.key,Ye.controller)});let ln=()=>et.forEach(Ye=>D(Ye.key));ge&&ge.signal.addEventListener("abort",ln);let{loaderResults:It,fetcherResults:ui}=await Ue(at,et,N,re);if(N.signal.aborted)return{shortCircuited:!0};ge&&ge.signal.removeEventListener("abort",ln),et.forEach(Ye=>k.delete(Ye.key));let Wt=us(It);if(Wt)return await we(N,Wt.result,!0,{replace:Oe}),{shortCircuited:!0};if(Wt=us(ui),Wt)return L.add(Wt.key),await we(N,Wt.result,!0,{replace:Oe}),{shortCircuited:!0};let{loaderData:sn,errors:on}=Sg(U,X,It,De,et,ui);Me&&U.errors&&(on={...U.errors,...on});let Ya=K(),ci=se(me),Vi=Ya||ci||et.length>0;return{matches:X,loaderData:sn,errors:on,...Vi?{fetchers:new Map(U.fetchers)}:{}}}function T(N){if(N&&!si(N[1]))return{[N[0]]:N[1].data};if(U.actionData)return Object.keys(U.actionData).length===0?null:U.actionData}function O(N){return N.forEach(V=>{let X=U.fetchers.get(V.key),re=Ir(void 0,X?X.data:void 0);U.fetchers.set(V.key,re)}),new Map(U.fetchers)}async function I(N,V,X,re){D(N);let he=(re&&re.flushSync)===!0,Re=d||u,Ne=tc(U.location,U.matches,h,X,V,re==null?void 0:re.relative),xe=zn(Re,Ne,h),Oe=Un(xe,Re,Ne);if(Oe.active&&Oe.matches&&(xe=Oe.matches),!xe){Te(N,V,Ti(404,{pathname:Ne}),{flushSync:he});return}let{path:Me,submission:Fe,error:De}=pg(!0,Ne,re);if(De){Te(N,V,De,{flushSync:he});return}let ke=Xr(xe,Me),nt=new dg(o.unstable_getContext?await o.unstable_getContext():void 0),mt=(re&&re.preventScrollReset)===!0;if(Fe&&oi(Fe.formMethod)){await le(N,V,Me,ke,xe,nt,Oe.active,he,mt,Fe);return}ee.set(N,{routeId:V,path:Me}),await fe(N,V,Me,ke,xe,nt,Oe.active,he,mt,Fe)}async function le(N,V,X,re,he,Re,Ne,xe,Oe,Me){$e(),ee.delete(N);function Fe(yt){if(!yt.route.action&&!yt.route.lazy){let un=Ti(405,{method:Me.formMethod,pathname:X,routeId:V});return Te(N,V,un,{flushSync:xe}),!0}return!1}if(!Ne&&Fe(re))return;let De=U.fetchers.get(N);Ie(N,Wy(Me,De),{flushSync:xe});let ke=new AbortController,nt=ja(o.history,X,ke.signal,Me);if(Ne){let yt=await Fn(he,X,nt.signal,N);if(yt.type==="aborted")return;if(yt.type==="error"){Te(N,V,yt.error,{flushSync:xe});return}else if(yt.matches){if(he=yt.matches,re=Xr(he,X),Fe(re))return}else{Te(N,V,Ti(404,{pathname:X}),{flushSync:xe});return}}k.set(N,ke);let mt=oe,wt=ka(s,l,nt,he,re,a,Re),et=(await ie(nt,wt,Re,N))[re.route.id];if(nt.signal.aborted){k.get(N)===ke&&k.delete(N);return}if(J.has(N)){if(aa(et)||si(et)){Ie(N,Pn(void 0));return}}else{if(aa(et))if(k.delete(N),me>mt){Ie(N,Pn(void 0));return}else return L.add(N),Ie(N,Ir(Me)),we(nt,et,!1,{fetcherSubmission:Me,preventScrollReset:Oe});if(si(et)){Te(N,V,et.error);return}}let ln=U.navigation.location||U.location,It=ja(o.history,ln,ke.signal),ui=d||u,Wt=U.navigation.state!=="idle"?zn(ui,U.navigation.location,h):U.matches;Xe(Wt,"Didn't find any matches after fetcher action");let sn=++oe;Le.set(N,sn);let on=Ir(Me,et.data);U.fetchers.set(N,on);let{dsMatches:Ya,revalidatingFetchers:ci}=mg(It,Re,s,l,o.history,U,Wt,Me,ln,a,!1,Pe,ze,J,ee,L,ui,h,[re.route.id,et]);ci.filter(yt=>yt.key!==N).forEach(yt=>{let un=yt.key,Wa=U.fetchers.get(un),Xt=Ir(void 0,Wa?Wa.data:void 0);U.fetchers.set(un,Xt),D(un),yt.controller&&k.set(un,yt.controller)}),vt({fetchers:new Map(U.fetchers)});let Vi=()=>ci.forEach(yt=>D(yt.key));ke.signal.addEventListener("abort",Vi);let{loaderResults:Ye,fetcherResults:Gt}=await Ue(Ya,ci,It,Re);if(ke.signal.aborted)return;ke.signal.removeEventListener("abort",Vi),Le.delete(N),k.delete(N),ci.forEach(yt=>k.delete(yt.key));let Ei=us(Ye);if(Ei)return we(It,Ei.result,!1,{preventScrollReset:Oe});if(Ei=us(Gt),Ei)return L.add(Ei.key),we(It,Ei.result,!1,{preventScrollReset:Oe});let{loaderData:Si,errors:jn}=Sg(U,Wt,Ye,void 0,ci,Gt);if(U.fetchers.has(N)){let yt=Pn(et.data);U.fetchers.set(N,yt)}se(sn),U.navigation.state==="loading"&&sn>me?(Xe(pe,"Expected pending action"),ge&&ge.abort(),jt(U.navigation.location,{matches:Wt,loaderData:Si,errors:jn,fetchers:new Map(U.fetchers)})):(vt({errors:jn,loaderData:_g(U.loaderData,Si,Wt,jn),fetchers:new Map(U.fetchers)}),Pe=!1)}async function fe(N,V,X,re,he,Re,Ne,xe,Oe,Me){let Fe=U.fetchers.get(N);Ie(N,Ir(Me,Fe?Fe.data:void 0),{flushSync:xe});let De=new AbortController,ke=ja(o.history,X,De.signal);if(Ne){let et=await Fn(he,X,ke.signal,N);if(et.type==="aborted")return;if(et.type==="error"){Te(N,V,et.error,{flushSync:xe});return}else if(et.matches)he=et.matches,re=Xr(he,X);else{Te(N,V,Ti(404,{pathname:X}),{flushSync:xe});return}}k.set(N,De);let nt=oe,mt=ka(s,l,ke,he,re,a,Re),at=(await ie(ke,mt,Re,N))[re.route.id];if(k.get(N)===De&&k.delete(N),!ke.signal.aborted){if(J.has(N)){Ie(N,Pn(void 0));return}if(aa(at))if(me>nt){Ie(N,Pn(void 0));return}else{L.add(N),await we(ke,at,!1,{preventScrollReset:Oe});return}if(si(at)){Te(N,V,at.error);return}Ie(N,Pn(at.data))}}async function we(N,V,X,{submission:re,fetcherSubmission:he,preventScrollReset:Re,replace:Ne}={}){V.response.headers.has("X-Remix-Revalidate")&&(Pe=!0);let xe=V.response.headers.get("Location");Xe(xe,"Expected a Location header on the redirect Response"),xe=xg(xe,new URL(N.url),h);let Oe=Kr(U.location,xe,{_isRedirect:!0});if(i){let mt=!1;if(V.response.headers.has("X-Remix-Reload-Document"))mt=!0;else if(cc.test(xe)){const wt=o.history.createURL(xe);mt=wt.origin!==p.location.origin||wi(wt.pathname,h)==null}if(mt){Ne?p.location.replace(xe):p.location.assign(xe);return}}ge=null;let Me=Ne===!0||V.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Fe,formAction:De,formEncType:ke}=U.navigation;!re&&!he&&Fe&&De&&ke&&(re=Dg(U.navigation));let nt=re||he;if(Oy.has(V.response.status)&&nt&&oi(nt.formMethod))await qt(Me,Oe,{submission:{...nt,formAction:xe},preventScrollReset:Re||ye,enableViewTransition:X?Ge:void 0});else{let mt=Ku(Oe,re);await qt(Me,Oe,{overrideNavigation:mt,fetcherSubmission:he,preventScrollReset:Re||ye,enableViewTransition:X?Ge:void 0})}}async function ie(N,V,X,re){let he,Re={};try{he=await Fy(c,N,V,re,X,!1)}catch(Ne){return V.filter(xe=>xe.shouldLoad).forEach(xe=>{Re[xe.route.id]={type:"error",error:Ne}}),Re}for(let[Ne,xe]of Object.entries(he))if(Iy(xe)){let Oe=xe.result;Re[Ne]={type:"redirect",response:ky(Oe,N,Ne,V,h)}}else Re[Ne]=await Gy(xe);return Re}async function Ue(N,V,X,re){let he=ie(X,N,re,null),Re=Promise.all(V.map(async Oe=>{if(Oe.matches&&Oe.match&&Oe.request&&Oe.controller){let Fe=(await ie(Oe.request,Oe.matches,re,Oe.key))[Oe.match.route.id];return{[Oe.key]:Fe}}else return Promise.resolve({[Oe.key]:{type:"error",error:Ti(404,{pathname:Oe.path})}})})),Ne=await he,xe=(await Re).reduce((Oe,Me)=>Object.assign(Oe,Me),{});return{loaderResults:Ne,fetcherResults:xe}}function $e(){Pe=!0,ee.forEach((N,V)=>{k.has(V)&&ze.add(V),D(V)})}function Ie(N,V,X={}){U.fetchers.set(N,V),vt({fetchers:new Map(U.fetchers)},{flushSync:(X&&X.flushSync)===!0})}function Te(N,V,X,re={}){let he=na(U.matches,V);S(N),vt({errors:{[he.route.id]:X},fetchers:new Map(U.fetchers)},{flushSync:(re&&re.flushSync)===!0})}function it(N){return ve.set(N,(ve.get(N)||0)+1),J.has(N)&&J.delete(N),U.fetchers.get(N)||My}function S(N){let V=U.fetchers.get(N);k.has(N)&&!(V&&V.state==="loading"&&Le.has(N))&&D(N),ee.delete(N),Le.delete(N),L.delete(N),J.delete(N),ze.delete(N),U.fetchers.delete(N)}function x(N){let V=(ve.get(N)||0)-1;V<=0?(ve.delete(N),J.add(N)):ve.set(N,V),vt({fetchers:new Map(U.fetchers)})}function D(N){let V=k.get(N);V&&(V.abort(),k.delete(N))}function M(N){for(let V of N){let X=it(V),re=Pn(X.data);U.fetchers.set(V,re)}}function K(){let N=[],V=!1;for(let X of L){let re=U.fetchers.get(X);Xe(re,`Expected fetcher: ${X}`),re.state==="loading"&&(L.delete(X),N.push(X),V=!0)}return M(N),V}function se(N){let V=[];for(let[X,re]of Le)if(re<N){let he=U.fetchers.get(X);Xe(he,`Expected fetcher: ${X}`),he.state==="loading"&&(D(X),Le.delete(X),V.push(X))}return M(V),V.length>0}function _e(N,V){let X=U.blockers.get(N)||qr;return Ee.get(N)!==V&&Ee.set(N,V),X}function Qe(N){U.blockers.delete(N),Ee.delete(N)}function be(N,V){let X=U.blockers.get(N)||qr;Xe(X.state==="unblocked"&&V.state==="blocked"||X.state==="blocked"&&V.state==="blocked"||X.state==="blocked"&&V.state==="proceeding"||X.state==="blocked"&&V.state==="unblocked"||X.state==="proceeding"&&V.state==="unblocked",`Invalid blocker state transition: ${X.state} -> ${V.state}`);let re=new Map(U.blockers);re.set(N,V),vt({blockers:re})}function Pt({currentLocation:N,nextLocation:V,historyAction:X}){if(Ee.size===0)return;Ee.size>1&&bt(!1,"A router only supports one blocker at a time");let re=Array.from(Ee.entries()),[he,Re]=re[re.length-1],Ne=U.blockers.get(he);if(!(Ne&&Ne.state==="proceeding")&&Re({currentLocation:N,nextLocation:V,historyAction:X}))return he}function pt(N){let V=Ti(404,{pathname:N}),X=d||u,{matches:re,route:he}=Rg(X);return{notFoundMatches:re,route:he,error:V}}function xi(N,V,X){if(w=N,b=V,_=X||null,!C&&U.navigation===Qu){C=!0;let re=Hn(U.location,U.matches);re!=null&&vt({restoreScrollPosition:re})}return()=>{w=null,b=null,_=null}}function ki(N,V){return _&&_(N,V.map(re=>oy(re,U.loaderData)))||N.key}function Pi(N,V){if(w&&b){let X=ki(N,V);w[X]=b()}}function Hn(N,V){if(w){let X=ki(N,V),re=w[X];if(typeof re=="number")return re}return null}function Un(N,V,X){if(o.patchRoutesOnNavigation)if(N){if(Object.keys(N[0].params).length>0)return{active:!0,matches:fs(V,X,h,!0)}}else return{active:!0,matches:fs(V,X,h,!0)||[]};return{active:!1,matches:null}}async function Fn(N,V,X,re){if(!o.patchRoutesOnNavigation)return{type:"success",matches:N};let he=N;for(;;){let Re=d==null,Ne=d||u,xe=l;try{await o.patchRoutesOnNavigation({signal:X,path:V,matches:he,fetcherKey:re,patch:(Fe,De)=>{X.aborted||vg(Fe,De,Ne,xe,s)}})}catch(Fe){return{type:"error",error:Fe,partialMatches:he}}finally{Re&&!X.aborted&&(u=[...u])}if(X.aborted)return{type:"aborted"};let Oe=zn(Ne,V,h);if(Oe)return{type:"success",matches:Oe};let Me=fs(Ne,V,h,!0);if(!Me||he.length===Me.length&&he.every((Fe,De)=>Fe.route.id===Me[De].route.id))return{type:"success",matches:null};he=Me}}function Ia(N){l={},d=Ts(N,s,void 0,l)}function Za(N,V){let X=d==null;vg(N,V,d||u,l,s),X&&(u=[...u],vt({}))}return Q={get basename(){return h},get future(){return g},get state(){return U},get routes(){return u},get window(){return p},initialize:Et,subscribe:Yt,enableScrollRestoration:xi,navigate:Ai,fetch:I,revalidate:Oi,createHref:N=>o.history.createHref(N),encodeLocation:N=>o.history.encodeLocation(N),getFetcher:it,deleteFetcher:x,dispose:lt,getBlocker:_e,deleteBlocker:Qe,patchRoutes:Za,_internalFetchControllers:k,_internalSetRoutes:Ia},Q}function Ly(o){return o!=null&&("formData"in o&&o.formData!=null||"body"in o&&o.body!==void 0)}function tc(o,p,i,a,s,l){let u,d;if(s){u=[];for(let c of p)if(u.push(c),c.route.id===s){d=c;break}}else u=p,d=p[p.length-1];let h=Rs(a||".",bs(u),wi(o.pathname,i)||o.pathname,l==="path");if(a==null&&(h.search=o.search,h.hash=o.hash),(a==null||a===""||a===".")&&d){let c=hc(h.search);if(d.route.index&&!c)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&c){let g=new URLSearchParams(h.search),v=g.getAll("index");g.delete("index"),v.filter(w=>w).forEach(w=>g.append("index",w));let y=g.toString();h.search=y?`?${y}`:""}}return i!=="/"&&(h.pathname=h.pathname==="/"?i:Fi([i,h.pathname])),Ln(h)}function pg(o,p,i){if(!i||!Ly(i))return{path:p};if(i.formMethod&&!Zy(i.formMethod))return{path:p,error:Ti(405,{method:i.formMethod})};let a=()=>({path:p,error:Ti(400,{type:"invalid-body"})}),l=(i.formMethod||"get").toUpperCase(),u=op(p);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!oi(l))return a();let v=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((y,[w,_])=>`${y}${w}=${_}
`,""):String(i.body);return{path:p,submission:{formMethod:l,formAction:u,formEncType:i.formEncType,formData:void 0,json:void 0,text:v}}}else if(i.formEncType==="application/json"){if(!oi(l))return a();try{let v=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:p,submission:{formMethod:l,formAction:u,formEncType:i.formEncType,formData:void 0,json:v,text:void 0}}}catch{return a()}}}Xe(typeof FormData=="function","FormData is not available in this environment");let d,h;if(i.formData)d=ac(i.formData),h=i.formData;else if(i.body instanceof FormData)d=ac(i.body),h=i.body;else if(i.body instanceof URLSearchParams)d=i.body,h=Eg(d);else if(i.body==null)d=new URLSearchParams,h=new FormData;else try{d=new URLSearchParams(i.body),h=Eg(d)}catch{return a()}let c={formMethod:l,formAction:u,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(oi(c.formMethod))return{path:p,submission:c};let g=rn(p);return o&&g.search&&hc(g.search)&&d.append("index",""),g.search=`?${d}`,{path:Ln(g),submission:c}}function mg(o,p,i,a,s,l,u,d,h,c,g,v,y,w,_,b,C,A,z){var ue;let H=z?si(z[1])?z[1].error:z[1].data:void 0,ae=s.createURL(l.location),Q=s.createURL(h),U;if(g&&l.errors){let de=Object.keys(l.errors)[0];U=u.findIndex(Pe=>Pe.route.id===de)}else if(z&&si(z[1])){let de=z[0];U=u.findIndex(Pe=>Pe.route.id===de)-1}let pe=z?z[1].statusCode:void 0,ye=pe&&pe>=400,ge={currentUrl:ae,currentParams:((ue=l.matches[0])==null?void 0:ue.params)||{},nextUrl:Q,nextParams:u[0].params,...d,actionResult:H,actionStatus:pe},Ge=u.map((de,Pe)=>{let{route:ze}=de,k=null;if(U!=null&&Pe>U?k=!1:ze.lazy?k=!0:ze.loader==null?k=!1:g?k=ic(ze,l.loaderData,l.errors):Ny(l.loaderData,l.matches[Pe],de)&&(k=!0),k!==null)return nc(i,a,o,de,c,p,k);let oe=ye?!1:v||ae.pathname+ae.search===Q.pathname+Q.search||ae.search!==Q.search||By(l.matches[Pe],de),me={...ge,defaultShouldRevalidate:oe},Le=Es(de,me);return nc(i,a,o,de,c,p,Le,me)}),ce=[];return _.forEach((de,Pe)=>{if(g||!u.some(ee=>ee.route.id===de.routeId)||w.has(Pe))return;let ze=zn(C,de.path,A);if(!ze){ce.push({key:Pe,routeId:de.routeId,path:de.path,matches:null,match:null,request:null,controller:null});return}if(b.has(Pe))return;let k=l.fetchers.get(Pe),oe=Xr(ze,de.path),me=new AbortController,Le=ja(s,de.path,me.signal),L=null;if(y.has(Pe))y.delete(Pe),L=ka(i,a,Le,ze,oe,c,p);else if(k&&k.state!=="idle"&&k.data===void 0)v&&(L=ka(i,a,Le,ze,oe,c,p));else{let ee={...ge,defaultShouldRevalidate:ye?!1:v};Es(oe,ee)&&(L=ka(i,a,Le,ze,oe,c,p,ee))}L&&ce.push({key:Pe,routeId:de.routeId,path:de.path,matches:L,match:oe,request:Le,controller:me})}),{dsMatches:Ge,revalidatingFetchers:ce}}function ic(o,p,i){if(o.lazy)return!0;if(!o.loader)return!1;let a=p!=null&&p[o.id]!==void 0,s=i!=null&&i[o.id]!==void 0;return!a&&s?!1:typeof o.loader=="function"&&o.loader.hydrate===!0?!0:!a&&!s}function Ny(o,p,i){let a=!p||i.route.id!==p.route.id,s=!o.hasOwnProperty(i.route.id);return a||s}function By(o,p){let i=o.route.path;return o.pathname!==p.pathname||i!=null&&i.endsWith("*")&&o.params["*"]!==p.params["*"]}function Es(o,p){if(o.route.shouldRevalidate){let i=o.route.shouldRevalidate(p);if(typeof i=="boolean")return i}return p.defaultShouldRevalidate}function vg(o,p,i,a,s){let l;if(o){let h=a[o];Xe(h,`No route found to patch children into: routeId = ${o}`),h.children||(h.children=[]),l=h.children}else l=i;let u=p.filter(h=>!l.some(c=>np(h,c))),d=Ts(u,s,[o||"_","patch",String((l==null?void 0:l.length)||"0")],a);l.push(...d)}function np(o,p){return"id"in o&&"id"in p&&o.id===p.id?!0:o.index===p.index&&o.path===p.path&&o.caseSensitive===p.caseSensitive?(!o.children||o.children.length===0)&&(!p.children||p.children.length===0)?!0:o.children.every((i,a)=>{var s;return(s=p.children)==null?void 0:s.some(l=>np(i,l))}):!1}var yg=new WeakMap,ap=({key:o,route:p,manifest:i,mapRouteProperties:a})=>{let s=i[p.id];if(Xe(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[o];if(!l)return;let u=yg.get(s);u||(u={},yg.set(s,u));let d=u[o];if(d)return d;let h=(async()=>{let c=ay(o),v=s[o]!==void 0&&o!=="hasErrorBoundary";if(c)bt(!c,"Route property "+o+" is not a supported lazy route property. This property will be ignored."),u[o]=Promise.resolve();else if(v)bt(!1,`Route "${s.id}" has a static property "${o}" defined. The lazy property will be ignored.`);else{let y=await l();y!=null&&(Object.assign(s,{[o]:y}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[o]=void 0,Object.values(s.lazy).every(y=>y===void 0)&&(s.lazy=void 0))})();return u[o]=h,h},Tg=new WeakMap;function Hy(o,p,i,a,s){let l=i[o.id];if(Xe(l,"No route found in manifest"),!o.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof o.lazy=="function"){let g=Tg.get(l);if(g)return{lazyRoutePromise:g,lazyHandlerPromise:g};let v=(async()=>{Xe(typeof o.lazy=="function","No lazy route function found");let y=await o.lazy(),w={};for(let _ in y){let b=y[_];if(b===void 0)continue;let C=ly(_),z=l[_]!==void 0&&_!=="hasErrorBoundary";C?bt(!C,"Route property "+_+" is not a supported property to be returned from a lazy route function. This property will be ignored."):z?bt(!z,`Route "${l.id}" has a static property "${_}" defined but its lazy function is also returning a value for this property. The lazy route property "${_}" will be ignored.`):w[_]=b}Object.assign(l,w),Object.assign(l,{...a(l),lazy:void 0})})();return Tg.set(l,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let u=Object.keys(o.lazy),d=[],h;for(let g of u){if(s&&s.includes(g))continue;let v=ap({key:g,route:o,manifest:i,mapRouteProperties:a});v&&(d.push(v),g===p&&(h=v))}let c=d.length>0?Promise.all(d).then(()=>{}):void 0;return c==null||c.catch(()=>{}),h==null||h.catch(()=>{}),{lazyRoutePromise:c,lazyHandlerPromise:h}}async function wg(o){let p=o.matches.filter(s=>s.shouldLoad),i={};return(await Promise.all(p.map(s=>s.resolve()))).forEach((s,l)=>{i[p[l].route.id]=s}),i}async function Uy(o){return o.matches.some(p=>p.route.unstable_middleware)?rp(o,!1,()=>wg(o),(p,i)=>({[i]:{type:"error",result:p}})):wg(o)}async function rp(o,p,i,a){let{matches:s,request:l,params:u,context:d}=o,h={handlerResult:void 0};try{let c=s.flatMap(v=>v.route.unstable_middleware?v.route.unstable_middleware.map(y=>[v.route.id,y]):[]),g=await lp({request:l,params:u,context:d},c,p,h,i);return p?g:h.handlerResult}catch(c){if(!h.middlewareError)throw c;let g=await a(h.middlewareError.error,h.middlewareError.routeId);return h.handlerResult?Object.assign(h.handlerResult,g):g}}async function lp(o,p,i,a,s,l=0){let{request:u}=o;if(u.signal.aborted)throw u.signal.reason?u.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${u.method} ${u.url}`);let d=p[l];if(!d)return a.handlerResult=await s(),a.handlerResult;let[h,c]=d,g=!1,v,y=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");g=!0,await lp(o,p,i,a,s,l+1)};try{let w=await c({request:o.request,params:o.params,context:o.context},y);return g?w===void 0?v:w:y()}catch(w){throw a.middlewareError?a.middlewareError.error!==w&&(a.middlewareError={routeId:h,error:w}):a.middlewareError={routeId:h,error:w},w}}function sp(o,p,i,a,s){let l=ap({key:"unstable_middleware",route:a.route,manifest:p,mapRouteProperties:o}),u=Hy(a.route,oi(i.method)?"action":"loader",p,o,s);return{middleware:l,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function nc(o,p,i,a,s,l,u,d=null){let h=!1,c=sp(o,p,i,a,s);return{...a,_lazyPromises:c,shouldLoad:u,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler(g){return h=!0,d?typeof g=="boolean"?Es(a,{...d,defaultShouldRevalidate:g}):Es(a,d):u},resolve(g){return h||u||g&&i.method==="GET"&&(a.route.lazy||a.route.loader)?jy({request:i,match:a,lazyHandlerPromise:c==null?void 0:c.handler,lazyRoutePromise:c==null?void 0:c.route,handlerOverride:g,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function ka(o,p,i,a,s,l,u,d=null){return a.map(h=>h.route.id!==s.route.id?{...h,shouldLoad:!1,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler:()=>!1,_lazyPromises:sp(o,p,i,h,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:nc(o,p,i,h,l,u,!0,d))}async function Fy(o,p,i,a,s,l){i.some(c=>{var g;return(g=c._lazyPromises)==null?void 0:g.middleware})&&await Promise.all(i.map(c=>{var g;return(g=c._lazyPromises)==null?void 0:g.middleware}));let u={request:p,params:i[0].params,context:s,matches:i},h=await o({...u,fetcherKey:a,unstable_runClientMiddleware:c=>{let g=u;return rp(g,!1,()=>c({...g,fetcherKey:a,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(v,y)=>({[y]:{type:"error",result:v}}))}});try{await Promise.all(i.flatMap(c=>{var g,v;return[(g=c._lazyPromises)==null?void 0:g.handler,(v=c._lazyPromises)==null?void 0:v.route]}))}catch{}return h}async function jy({request:o,match:p,lazyHandlerPromise:i,lazyRoutePromise:a,handlerOverride:s,scopedContext:l}){let u,d,h=oi(o.method),c=h?"action":"loader",g=v=>{let y,w=new Promise((C,A)=>y=A);d=()=>y(),o.signal.addEventListener("abort",d);let _=C=>typeof v!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${c}" [routeId: ${p.route.id}]`)):v({request:o,params:p.params,context:l},...C!==void 0?[C]:[]),b=(async()=>{try{return{type:"data",result:await(s?s(A=>_(A)):_())}}catch(C){return{type:"error",result:C}}})();return Promise.race([b,w])};try{let v=h?p.route.action:p.route.loader;if(i||a)if(v){let y,[w]=await Promise.all([g(v).catch(_=>{y=_}),i,a]);if(y!==void 0)throw y;u=w}else{await i;let y=h?p.route.action:p.route.loader;if(y)[u]=await Promise.all([g(y),a]);else if(c==="action"){let w=new URL(o.url),_=w.pathname+w.search;throw Ti(405,{method:o.method,pathname:_,routeId:p.route.id})}else return{type:"data",result:void 0}}else if(v)u=await g(v);else{let y=new URL(o.url),w=y.pathname+y.search;throw Ti(404,{pathname:w})}}catch(v){return{type:"error",result:v}}finally{d&&o.signal.removeEventListener("abort",d)}return u}async function Gy(o){var a,s,l,u,d,h;let{result:p,type:i}=o;if(up(p)){let c;try{let g=p.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?p.body==null?c=null:c=await p.json():c=await p.text()}catch(g){return{type:"error",error:g}}return i==="error"?{type:"error",error:new xs(p.status,p.statusText,c),statusCode:p.status,headers:p.headers}:{type:"data",data:c,statusCode:p.status,headers:p.headers}}return i==="error"?Cg(p)?p.data instanceof Error?{type:"error",error:p.data,statusCode:(a=p.init)==null?void 0:a.status,headers:(s=p.init)!=null&&s.headers?new Headers(p.init.headers):void 0}:{type:"error",error:new xs(((l=p.init)==null?void 0:l.status)||500,void 0,p.data),statusCode:Jr(p)?p.status:void 0,headers:(u=p.init)!=null&&u.headers?new Headers(p.init.headers):void 0}:{type:"error",error:p,statusCode:Jr(p)?p.status:void 0}:Cg(p)?{type:"data",data:p.data,statusCode:(d=p.init)==null?void 0:d.status,headers:(h=p.init)!=null&&h.headers?new Headers(p.init.headers):void 0}:{type:"data",data:p}}function ky(o,p,i,a,s){let l=o.headers.get("Location");if(Xe(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!cc.test(l)){let u=a.slice(0,a.findIndex(d=>d.route.id===i)+1);l=tc(new URL(p.url),u,s,l),o.headers.set("Location",l)}return o}function xg(o,p,i){if(cc.test(o)){let a=o,s=a.startsWith("//")?new URL(p.protocol+a):new URL(a),l=wi(s.pathname,i)!=null;if(s.origin===p.origin&&l)return s.pathname+s.search+s.hash}return o}function ja(o,p,i,a){let s=o.createURL(op(p)).toString(),l={signal:i};if(a&&oi(a.formMethod)){let{formMethod:u,formEncType:d}=a;l.method=u.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=ac(a.formData):l.body=a.formData}return new Request(s,l)}function ac(o){let p=new URLSearchParams;for(let[i,a]of o.entries())p.append(i,typeof a=="string"?a:a.name);return p}function Eg(o){let p=new FormData;for(let[i,a]of o.entries())p.append(i,a);return p}function Vy(o,p,i,a=!1,s=!1){let l={},u=null,d,h=!1,c={},g=i&&si(i[1])?i[1].error:void 0;return o.forEach(v=>{if(!(v.route.id in p))return;let y=v.route.id,w=p[y];if(Xe(!aa(w),"Cannot handle redirect results in processLoaderData"),si(w)){let _=w.error;if(g!==void 0&&(_=g,g=void 0),u=u||{},s)u[y]=_;else{let b=na(o,y);u[b.route.id]==null&&(u[b.route.id]=_)}a||(l[y]=ip),h||(h=!0,d=Jr(w.error)?w.error.status:500),w.headers&&(c[y]=w.headers)}else l[y]=w.data,w.statusCode&&w.statusCode!==200&&!h&&(d=w.statusCode),w.headers&&(c[y]=w.headers)}),g!==void 0&&i&&(u={[i[0]]:g},i[2]&&(l[i[2]]=void 0)),{loaderData:l,errors:u,statusCode:d||200,loaderHeaders:c}}function Sg(o,p,i,a,s,l){let{loaderData:u,errors:d}=Vy(p,i,a);return s.filter(h=>!h.matches||h.matches.some(c=>c.shouldLoad)).forEach(h=>{let{key:c,match:g,controller:v}=h,y=l[c];if(Xe(y,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(si(y)){let w=na(o.matches,g==null?void 0:g.route.id);d&&d[w.route.id]||(d={...d,[w.route.id]:y.error}),o.fetchers.delete(c)}else if(aa(y))Xe(!1,"Unhandled fetcher revalidation redirect");else{let w=Pn(y.data);o.fetchers.set(c,w)}}),{loaderData:u,errors:d}}function _g(o,p,i,a){let s=Object.entries(p).filter(([,l])=>l!==ip).reduce((l,[u,d])=>(l[u]=d,l),{});for(let l of i){let u=l.route.id;if(!p.hasOwnProperty(u)&&o.hasOwnProperty(u)&&l.route.loader&&(s[u]=o[u]),a&&a.hasOwnProperty(u))break}return s}function bg(o){return o?si(o[1])?{actionData:{}}:{actionData:{[o[0]]:o[1].data}}:{}}function na(o,p){return(p?o.slice(0,o.findIndex(a=>a.route.id===p)+1):[...o]).reverse().find(a=>a.route.hasErrorBoundary===!0)||o[0]}function Rg(o){let p=o.length===1?o[0]:o.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:p}],route:p}}function Ti(o,{pathname:p,routeId:i,method:a,type:s,message:l}={}){let u="Unknown Server Error",d="Unknown @remix-run/router error";return o===400?(u="Bad Request",a&&p&&i?d=`You made a ${a} request to "${p}" but did not provide a \`loader\` for route "${i}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):o===403?(u="Forbidden",d=`Route "${i}" does not match URL "${p}"`):o===404?(u="Not Found",d=`No route matches URL "${p}"`):o===405&&(u="Method Not Allowed",a&&p&&i?d=`You made a ${a.toUpperCase()} request to "${p}" but did not provide an \`action\` for route "${i}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new xs(o||500,u,new Error(d),!0)}function us(o){let p=Object.entries(o);for(let i=p.length-1;i>=0;i--){let[a,s]=p[i];if(aa(s))return{key:a,result:s}}}function op(o){let p=typeof o=="string"?rn(o):o;return Ln({...p,hash:""})}function qy(o,p){return o.pathname!==p.pathname||o.search!==p.search?!1:o.hash===""?p.hash!=="":o.hash===p.hash?!0:p.hash!==""}function Iy(o){return up(o.result)&&Ay.has(o.result.status)}function si(o){return o.type==="error"}function aa(o){return(o&&o.type)==="redirect"}function Cg(o){return typeof o=="object"&&o!=null&&"type"in o&&"data"in o&&"init"in o&&o.type==="DataWithResponseInit"}function up(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.headers=="object"&&typeof o.body<"u"}function Zy(o){return Dy.has(o.toUpperCase())}function oi(o){return Ry.has(o.toUpperCase())}function hc(o){return new URLSearchParams(o).getAll("index").some(p=>p==="")}function Xr(o,p){let i=typeof p=="string"?rn(p).search:p.search;if(o[o.length-1].route.index&&hc(i||""))return o[o.length-1];let a=$g(o);return a[a.length-1]}function Dg(o){let{formMethod:p,formAction:i,formEncType:a,text:s,formData:l,json:u}=o;if(!(!p||!i||!a)){if(s!=null)return{formMethod:p,formAction:i,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:p,formAction:i,formEncType:a,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:p,formAction:i,formEncType:a,formData:void 0,json:u,text:void 0}}}function Ku(o,p){return p?{state:"loading",location:o,formMethod:p.formMethod,formAction:p.formAction,formEncType:p.formEncType,formData:p.formData,json:p.json,text:p.text}:{state:"loading",location:o,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Yy(o,p){return{state:"submitting",location:o,formMethod:p.formMethod,formAction:p.formAction,formEncType:p.formEncType,formData:p.formData,json:p.json,text:p.text}}function Ir(o,p){return o?{state:"loading",formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text,data:p}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:p}}function Wy(o,p){return{state:"submitting",formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text,data:p?p.data:void 0}}function Pn(o){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:o}}function Xy(o,p){try{let i=o.sessionStorage.getItem(tp);if(i){let a=JSON.parse(i);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&p.set(s,new Set(l||[]))}}catch{}}function Qy(o,p){if(p.size>0){let i={};for(let[a,s]of p)i[a]=[...s];try{o.sessionStorage.setItem(tp,JSON.stringify(i))}catch(a){bt(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function Ky(){let o,p,i=new Promise((a,s)=>{o=async l=>{a(l);try{await i}catch{}},p=async l=>{s(l);try{await i}catch{}}});return{promise:i,resolve:o,reject:p}}var la=j.createContext(null);la.displayName="DataRouter";var $r=j.createContext(null);$r.displayName="DataRouterState";var fc=j.createContext({isTransitioning:!1});fc.displayName="ViewTransition";var cp=j.createContext(new Map);cp.displayName="Fetchers";var Jy=j.createContext(null);Jy.displayName="Await";var Di=j.createContext(null);Di.displayName="Navigation";var Cs=j.createContext(null);Cs.displayName="Location";var ji=j.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var dc=j.createContext(null);dc.displayName="RouteError";function $y(o,{relative:p}={}){Xe(Va(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=j.useContext(Di),{hash:s,pathname:l,search:u}=el(o,{relative:p}),d=l;return i!=="/"&&(d=l==="/"?i:Fi([i,l])),a.createHref({pathname:d,search:u,hash:s})}function Va(){return j.useContext(Cs)!=null}function Nn(){return Xe(Va(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Cs).location}var hp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fp(o){j.useContext(Di).static||j.useLayoutEffect(o)}function dp(){let{isDataRoute:o}=j.useContext(ji);return o?f0():e0()}function e0(){Xe(Va(),"useNavigate() may be used only in the context of a <Router> component.");let o=j.useContext(la),{basename:p,navigator:i}=j.useContext(Di),{matches:a}=j.useContext(ji),{pathname:s}=Nn(),l=JSON.stringify(bs(a)),u=j.useRef(!1);return fp(()=>{u.current=!0}),j.useCallback((h,c={})=>{if(bt(u.current,hp),!u.current)return;if(typeof h=="number"){i.go(h);return}let g=Rs(h,JSON.parse(l),s,c.relative==="path");o==null&&p!=="/"&&(g.pathname=g.pathname==="/"?p:Fi([p,g.pathname])),(c.replace?i.replace:i.push)(g,c.state,c)},[p,i,l,s,o])}j.createContext(null);function el(o,{relative:p}={}){let{matches:i}=j.useContext(ji),{pathname:a}=Nn(),s=JSON.stringify(bs(i));return j.useMemo(()=>Rs(o,JSON.parse(s),a,p==="path"),[o,s,a,p])}function t0(o,p,i,a){Xe(Va(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=j.useContext(Di),{matches:u}=j.useContext(ji),d=u[u.length-1],h=d?d.params:{},c=d?d.pathname:"/",g=d?d.pathnameBase:"/",v=d&&d.route;{let z=v&&v.path||"";gp(c,!v||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let y=Nn(),w;w=y;let _=w.pathname||"/",b=_;if(g!=="/"){let z=g.replace(/^\//,"").split("/");b="/"+_.replace(/^\//,"").split("/").slice(z.length).join("/")}let C=!l&&i&&i.matches&&i.matches.length>0?i.matches:zn(o,{pathname:b});return bt(v||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),bt(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),l0(C&&C.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Fi([g,s.encodeLocation?s.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:Fi([g,s.encodeLocation?s.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),u,i,a)}function i0(){let o=h0(),p=Jr(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),i=o instanceof Error?o.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",o),u=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},p),i?j.createElement("pre",{style:s},i):null,u)}var n0=j.createElement(i0,null),a0=class extends j.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,p){return p.location!==o.location||p.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:p.error,location:p.location,revalidation:o.revalidation||p.revalidation}}componentDidCatch(o,p){console.error("React Router caught the following error during render",o,p)}render(){return this.state.error!==void 0?j.createElement(ji.Provider,{value:this.props.routeContext},j.createElement(dc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function r0({routeContext:o,match:p,children:i}){let a=j.useContext(la);return a&&a.static&&a.staticContext&&(p.route.errorElement||p.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=p.route.id),j.createElement(ji.Provider,{value:o},i)}function l0(o,p=[],i=null,a=null){if(o==null){if(!i)return null;if(i.errors)o=i.matches;else if(p.length===0&&!i.initialized&&i.matches.length>0)o=i.matches;else return null}let s=o,l=i==null?void 0:i.errors;if(l!=null){let h=s.findIndex(c=>c.route.id&&(l==null?void 0:l[c.route.id])!==void 0);Xe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let u=!1,d=-1;if(i)for(let h=0;h<s.length;h++){let c=s[h];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(d=h),c.route.id){let{loaderData:g,errors:v}=i,y=c.route.loader&&!g.hasOwnProperty(c.route.id)&&(!v||v[c.route.id]===void 0);if(c.route.lazy||y){u=!0,d>=0?s=s.slice(0,d+1):s=[s[0]];break}}}return s.reduceRight((h,c,g)=>{let v,y=!1,w=null,_=null;i&&(v=l&&c.route.id?l[c.route.id]:void 0,w=c.route.errorElement||n0,u&&(d<0&&g===0?(gp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,_=null):d===g&&(y=!0,_=c.route.hydrateFallbackElement||null)));let b=p.concat(s.slice(0,g+1)),C=()=>{let A;return v?A=w:y?A=_:c.route.Component?A=j.createElement(c.route.Component,null):c.route.element?A=c.route.element:A=h,j.createElement(r0,{match:c,routeContext:{outlet:h,matches:b,isDataRoute:i!=null},children:A})};return i&&(c.route.ErrorBoundary||c.route.errorElement||g===0)?j.createElement(a0,{location:i.location,revalidation:i.revalidation,component:w,error:v,children:C(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):C()},null)}function gc(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s0(o){let p=j.useContext(la);return Xe(p,gc(o)),p}function o0(o){let p=j.useContext($r);return Xe(p,gc(o)),p}function u0(o){let p=j.useContext(ji);return Xe(p,gc(o)),p}function pc(o){let p=u0(o),i=p.matches[p.matches.length-1];return Xe(i.route.id,`${o} can only be used on routes that contain a unique "id"`),i.route.id}function c0(){return pc("useRouteId")}function h0(){var a;let o=j.useContext(dc),p=o0("useRouteError"),i=pc("useRouteError");return o!==void 0?o:(a=p.errors)==null?void 0:a[i]}function f0(){let{router:o}=s0("useNavigate"),p=pc("useNavigate"),i=j.useRef(!1);return fp(()=>{i.current=!0}),j.useCallback(async(s,l={})=>{bt(i.current,hp),i.current&&(typeof s=="number"?o.navigate(s):await o.navigate(s,{fromRouteId:p,...l}))},[o,p])}var Ag={};function gp(o,p,i){!p&&!Ag[o]&&(Ag[o]=!0,bt(!1,i))}var Og={};function Mg(o,p){!o&&!Og[p]&&(Og[p]=!0,console.warn(p))}function d0(o){let p={hasErrorBoundary:o.hasErrorBoundary||o.ErrorBoundary!=null||o.errorElement!=null};return o.Component&&(o.element&&bt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(p,{element:j.createElement(o.Component),Component:void 0})),o.HydrateFallback&&(o.hydrateFallbackElement&&bt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(p,{hydrateFallbackElement:j.createElement(o.HydrateFallback),HydrateFallback:void 0})),o.ErrorBoundary&&(o.errorElement&&bt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(p,{errorElement:j.createElement(o.ErrorBoundary),ErrorBoundary:void 0})),p}var g0=["HydrateFallback","hydrateFallbackElement"],p0=class{constructor(){this.status="pending",this.promise=new Promise((o,p)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",o(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",p(i))}})}};function m0({router:o,flushSync:p}){let[i,a]=j.useState(o.state),[s,l]=j.useState(),[u,d]=j.useState({isTransitioning:!1}),[h,c]=j.useState(),[g,v]=j.useState(),[y,w]=j.useState(),_=j.useRef(new Map),b=j.useCallback((H,{deletedFetchers:ae,flushSync:Q,viewTransitionOpts:U})=>{H.fetchers.forEach((ye,ge)=>{ye.data!==void 0&&_.current.set(ge,ye.data)}),ae.forEach(ye=>_.current.delete(ye)),Mg(Q===!1||p!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let pe=o.window!=null&&o.window.document!=null&&typeof o.window.document.startViewTransition=="function";if(Mg(U==null||pe,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!U||!pe){p&&Q?p(()=>a(H)):j.startTransition(()=>a(H));return}if(p&&Q){p(()=>{g&&(h&&h.resolve(),g.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:U.currentLocation,nextLocation:U.nextLocation})});let ye=o.window.document.startViewTransition(()=>{p(()=>a(H))});ye.finished.finally(()=>{p(()=>{c(void 0),v(void 0),l(void 0),d({isTransitioning:!1})})}),p(()=>v(ye));return}g?(h&&h.resolve(),g.skipTransition(),w({state:H,currentLocation:U.currentLocation,nextLocation:U.nextLocation})):(l(H),d({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}))},[o.window,p,g,h]);j.useLayoutEffect(()=>o.subscribe(b),[o,b]),j.useEffect(()=>{u.isTransitioning&&!u.flushSync&&c(new p0)},[u]),j.useEffect(()=>{if(h&&s&&o.window){let H=s,ae=h.promise,Q=o.window.document.startViewTransition(async()=>{j.startTransition(()=>a(H)),await ae});Q.finished.finally(()=>{c(void 0),v(void 0),l(void 0),d({isTransitioning:!1})}),v(Q)}},[s,h,o.window]),j.useEffect(()=>{h&&s&&i.location.key===s.location.key&&h.resolve()},[h,g,i.location,s]),j.useEffect(()=>{!u.isTransitioning&&y&&(l(y.state),d({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),w(void 0))},[u.isTransitioning,y]);let C=j.useMemo(()=>({createHref:o.createHref,encodeLocation:o.encodeLocation,go:H=>o.navigate(H),push:(H,ae,Q)=>o.navigate(H,{state:ae,preventScrollReset:Q==null?void 0:Q.preventScrollReset}),replace:(H,ae,Q)=>o.navigate(H,{replace:!0,state:ae,preventScrollReset:Q==null?void 0:Q.preventScrollReset})}),[o]),A=o.basename||"/",z=j.useMemo(()=>({router:o,navigator:C,static:!1,basename:A}),[o,C,A]);return j.createElement(j.Fragment,null,j.createElement(la.Provider,{value:z},j.createElement($r.Provider,{value:i},j.createElement(cp.Provider,{value:_.current},j.createElement(fc.Provider,{value:u},j.createElement(w0,{basename:A,location:i.location,navigationType:i.historyAction,navigator:C},j.createElement(v0,{routes:o.routes,future:o.future,state:i})))))),null)}var v0=j.memo(y0);function y0({routes:o,future:p,state:i}){return t0(o,void 0,i,p)}function T0({to:o,replace:p,state:i,relative:a}){Xe(Va(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=j.useContext(Di);bt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=j.useContext(ji),{pathname:u}=Nn(),d=dp(),h=Rs(o,bs(l),u,a==="path"),c=JSON.stringify(h);return j.useEffect(()=>{d(JSON.parse(c),{replace:p,state:i,relative:a})},[d,c,a,p,i]),null}function w0({basename:o="/",children:p=null,location:i,navigationType:a="POP",navigator:s,static:l=!1}){Xe(!Va(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=o.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof i=="string"&&(i=rn(i));let{pathname:h="/",search:c="",hash:g="",state:v=null,key:y="default"}=i,w=j.useMemo(()=>{let _=wi(h,u);return _==null?null:{location:{pathname:_,search:c,hash:g,state:v,key:y},navigationType:a}},[u,h,c,g,v,y,a]);return bt(w!=null,`<Router basename="${u}"> is not able to match the URL "${h}${c}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:j.createElement(Di.Provider,{value:d},j.createElement(Cs.Provider,{children:p,value:w}))}var ds="get",gs="application/x-www-form-urlencoded";function Ds(o){return o!=null&&typeof o.tagName=="string"}function x0(o){return Ds(o)&&o.tagName.toLowerCase()==="button"}function E0(o){return Ds(o)&&o.tagName.toLowerCase()==="form"}function S0(o){return Ds(o)&&o.tagName.toLowerCase()==="input"}function _0(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function b0(o,p){return o.button===0&&(!p||p==="_self")&&!_0(o)}var cs=null;function R0(){if(cs===null)try{new FormData(document.createElement("form"),0),cs=!1}catch{cs=!0}return cs}var C0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ju(o){return o!=null&&!C0.has(o)?(bt(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gs}"`),null):o}function D0(o,p){let i,a,s,l,u;if(E0(o)){let d=o.getAttribute("action");a=d?wi(d,p):null,i=o.getAttribute("method")||ds,s=Ju(o.getAttribute("enctype"))||gs,l=new FormData(o)}else if(x0(o)||S0(o)&&(o.type==="submit"||o.type==="image")){let d=o.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=o.getAttribute("formaction")||d.getAttribute("action");if(a=h?wi(h,p):null,i=o.getAttribute("formmethod")||d.getAttribute("method")||ds,s=Ju(o.getAttribute("formenctype"))||Ju(d.getAttribute("enctype"))||gs,l=new FormData(d,o),!R0()){let{name:c,type:g,value:v}=o;if(g==="image"){let y=c?`${c}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else c&&l.append(c,v)}}else{if(Ds(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ds,a=null,s=gs,u=o}return l&&s==="text/plain"&&(u=l,l=void 0),{action:a,method:i.toLowerCase(),encType:s,formData:l,body:u}}function mc(o,p){if(o===!1||o===null||typeof o>"u")throw new Error(p)}async function A0(o,p){if(o.id in p)return p[o.id];try{let i=await import(o.module);return p[o.id]=i,i}catch(i){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function O0(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function M0(o,p,i){let a=await Promise.all(o.map(async s=>{let l=p.routes[s.route.id];if(l){let u=await A0(l,i);return u.links?u.links():[]}return[]}));return N0(a.flat(1).filter(O0).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Pg(o,p,i,a,s,l){let u=(h,c)=>i[c]?h.route.id!==i[c].route.id:!0,d=(h,c)=>{var g;return i[c].pathname!==h.pathname||((g=i[c].route.path)==null?void 0:g.endsWith("*"))&&i[c].params["*"]!==h.params["*"]};return l==="assets"?p.filter((h,c)=>u(h,c)||d(h,c)):l==="data"?p.filter((h,c)=>{var v;let g=a.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(u(h,c)||d(h,c))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=i[0])==null?void 0:v.params)||{},nextUrl:new URL(o,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function P0(o,p,{includeHydrateFallback:i}={}){return z0(o.map(a=>{let s=p.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),i&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function z0(o){return[...new Set(o)]}function L0(o){let p={},i=Object.keys(o).sort();for(let a of i)p[a]=o[a];return p}function N0(o,p){let i=new Set;return new Set(p),o.reduce((a,s)=>{let l=JSON.stringify(L0(s));return i.has(l)||(i.add(l),a.push({key:l,link:s})),a},[])}var B0=new Set([100,101,204,205]);function H0(o,p){let i=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return i.pathname==="/"?i.pathname="_root.data":p&&wi(i.pathname,p)==="/"?i.pathname=`${p.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function pp(){let o=j.useContext(la);return mc(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function U0(){let o=j.useContext($r);return mc(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var vc=j.createContext(void 0);vc.displayName="FrameworkContext";function mp(){let o=j.useContext(vc);return mc(o,"You must render this element inside a <HydratedRouter> element"),o}function F0(o,p){let i=j.useContext(vc),[a,s]=j.useState(!1),[l,u]=j.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:c,onMouseLeave:g,onTouchStart:v}=p,y=j.useRef(null);j.useEffect(()=>{if(o==="render"&&u(!0),o==="viewport"){let b=A=>{A.forEach(z=>{u(z.isIntersecting)})},C=new IntersectionObserver(b,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[o]),j.useEffect(()=>{if(a){let b=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(b)}}},[a]);let w=()=>{s(!0)},_=()=>{s(!1),u(!1)};return i?o!=="intent"?[l,y,{}]:[l,y,{onFocus:Zr(d,w),onBlur:Zr(h,_),onMouseEnter:Zr(c,w),onMouseLeave:Zr(g,_),onTouchStart:Zr(v,w)}]:[!1,y,{}]}function Zr(o,p){return i=>{o&&o(i),i.defaultPrevented||p(i)}}function j0({page:o,...p}){let{router:i}=pp(),a=j.useMemo(()=>zn(i.routes,o,i.basename),[i.routes,o,i.basename]);return a?j.createElement(k0,{page:o,matches:a,...p}):null}function G0(o){let{manifest:p,routeModules:i}=mp(),[a,s]=j.useState([]);return j.useEffect(()=>{let l=!1;return M0(o,p,i).then(u=>{l||s(u)}),()=>{l=!0}},[o,p,i]),a}function k0({page:o,matches:p,...i}){let a=Nn(),{manifest:s,routeModules:l}=mp(),{basename:u}=pp(),{loaderData:d,matches:h}=U0(),c=j.useMemo(()=>Pg(o,p,h,s,a,"data"),[o,p,h,s,a]),g=j.useMemo(()=>Pg(o,p,h,s,a,"assets"),[o,p,h,s,a]),v=j.useMemo(()=>{if(o===a.pathname+a.search+a.hash)return[];let _=new Set,b=!1;if(p.forEach(A=>{var H;let z=s.routes[A.route.id];!z||!z.hasLoader||(!c.some(ae=>ae.route.id===A.route.id)&&A.route.id in d&&((H=l[A.route.id])!=null&&H.shouldRevalidate)||z.hasClientLoader?b=!0:_.add(A.route.id))}),_.size===0)return[];let C=H0(o,u);return b&&_.size>0&&C.searchParams.set("_routes",p.filter(A=>_.has(A.route.id)).map(A=>A.route.id).join(",")),[C.pathname+C.search]},[u,d,a,s,c,p,o,l]),y=j.useMemo(()=>P0(g,s),[g,s]),w=G0(g);return j.createElement(j.Fragment,null,v.map(_=>j.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...i})),y.map(_=>j.createElement("link",{key:_,rel:"modulepreload",href:_,...i})),w.map(({key:_,link:b})=>j.createElement("link",{key:_,...b})))}function V0(...o){return p=>{o.forEach(i=>{typeof i=="function"?i(p):i!=null&&(i.current=p)})}}var vp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vp&&(window.__reactRouterVersion="7.5.3")}catch{}function q0(o,p){return zy({basename:p==null?void 0:p.basename,unstable_getContext:p==null?void 0:p.unstable_getContext,future:p==null?void 0:p.future,history:ey({window:p==null?void 0:p.window}),hydrationData:I0(),routes:o,mapRouteProperties:d0,hydrationRouteProperties:g0,dataStrategy:p==null?void 0:p.dataStrategy,patchRoutesOnNavigation:p==null?void 0:p.patchRoutesOnNavigation,window:p==null?void 0:p.window}).initialize()}function I0(){let o=window==null?void 0:window.__staticRouterHydrationData;return o&&o.errors&&(o={...o,errors:Z0(o.errors)}),o}function Z0(o){if(!o)return null;let p=Object.entries(o),i={};for(let[a,s]of p)if(s&&s.__type==="RouteErrorResponse")i[a]=new xs(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let u=new l(s.message);u.stack="",i[a]=u}catch{}}if(i[a]==null){let l=new Error(s.message);l.stack="",i[a]=l}}else i[a]=s;return i}var yp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tp=j.forwardRef(function({onClick:p,discover:i="render",prefetch:a="none",relative:s,reloadDocument:l,replace:u,state:d,target:h,to:c,preventScrollReset:g,viewTransition:v,...y},w){let{basename:_}=j.useContext(Di),b=typeof c=="string"&&yp.test(c),C,A=!1;if(typeof c=="string"&&b&&(C=c,vp))try{let ge=new URL(window.location.href),Ge=c.startsWith("//")?new URL(ge.protocol+c):new URL(c),ce=wi(Ge.pathname,_);Ge.origin===ge.origin&&ce!=null?c=ce+Ge.search+Ge.hash:A=!0}catch{bt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=$y(c,{relative:s}),[H,ae,Q]=F0(a,y),U=Q0(c,{replace:u,state:d,target:h,preventScrollReset:g,relative:s,viewTransition:v});function pe(ge){p&&p(ge),ge.defaultPrevented||U(ge)}let ye=j.createElement("a",{...y,...Q,href:C||z,onClick:A||l?p:pe,ref:V0(w,ae),target:h,"data-discover":!b&&i==="render"?"true":void 0});return H&&!b?j.createElement(j.Fragment,null,ye,j.createElement(j0,{page:z})):ye});Tp.displayName="Link";var Y0=j.forwardRef(function({"aria-current":p="page",caseSensitive:i=!1,className:a="",end:s=!1,style:l,to:u,viewTransition:d,children:h,...c},g){let v=el(u,{relative:c.relative}),y=Nn(),w=j.useContext($r),{navigator:_,basename:b}=j.useContext(Di),C=w!=null&&tT(v)&&d===!0,A=_.encodeLocation?_.encodeLocation(v).pathname:v.pathname,z=y.pathname,H=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(z=z.toLowerCase(),H=H?H.toLowerCase():null,A=A.toLowerCase()),H&&b&&(H=wi(H,b)||H);const ae=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let Q=z===A||!s&&z.startsWith(A)&&z.charAt(ae)==="/",U=H!=null&&(H===A||!s&&H.startsWith(A)&&H.charAt(A.length)==="/"),pe={isActive:Q,isPending:U,isTransitioning:C},ye=Q?p:void 0,ge;typeof a=="function"?ge=a(pe):ge=[a,Q?"active":null,U?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Ge=typeof l=="function"?l(pe):l;return j.createElement(Tp,{...c,"aria-current":ye,className:ge,ref:g,style:Ge,to:u,viewTransition:d},typeof h=="function"?h(pe):h)});Y0.displayName="NavLink";var W0=j.forwardRef(({discover:o="render",fetcherKey:p,navigate:i,reloadDocument:a,replace:s,state:l,method:u=ds,action:d,onSubmit:h,relative:c,preventScrollReset:g,viewTransition:v,...y},w)=>{let _=$0(),b=eT(d,{relative:c}),C=u.toLowerCase()==="get"?"get":"post",A=typeof d=="string"&&yp.test(d),z=H=>{if(h&&h(H),H.defaultPrevented)return;H.preventDefault();let ae=H.nativeEvent.submitter,Q=(ae==null?void 0:ae.getAttribute("formmethod"))||u;_(ae||H.currentTarget,{fetcherKey:p,method:Q,navigate:i,replace:s,state:l,relative:c,preventScrollReset:g,viewTransition:v})};return j.createElement("form",{ref:w,method:C,action:b,onSubmit:a?h:z,...y,"data-discover":!A&&o==="render"?"true":void 0})});W0.displayName="Form";function X0(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wp(o){let p=j.useContext(la);return Xe(p,X0(o)),p}function Q0(o,{target:p,replace:i,state:a,preventScrollReset:s,relative:l,viewTransition:u}={}){let d=dp(),h=Nn(),c=el(o,{relative:l});return j.useCallback(g=>{if(b0(g,p)){g.preventDefault();let v=i!==void 0?i:Ln(h)===Ln(c);d(o,{replace:v,state:a,preventScrollReset:s,relative:l,viewTransition:u})}},[h,d,c,i,a,p,o,s,l,u])}var K0=0,J0=()=>`__${String(++K0)}__`;function $0(){let{router:o}=wp("useSubmit"),{basename:p}=j.useContext(Di),i=c0();return j.useCallback(async(a,s={})=>{let{action:l,method:u,encType:d,formData:h,body:c}=D0(a,p);if(s.navigate===!1){let g=s.fetcherKey||J0();await o.fetch(g,i,s.action||l,{preventScrollReset:s.preventScrollReset,formData:h,body:c,formMethod:s.method||u,formEncType:s.encType||d,flushSync:s.flushSync})}else await o.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:h,body:c,formMethod:s.method||u,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})},[o,p,i])}function eT(o,{relative:p}={}){let{basename:i}=j.useContext(Di),a=j.useContext(ji);Xe(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...el(o||".",{relative:p})},u=Nn();if(o==null){l.search=u.search;let d=new URLSearchParams(l.search),h=d.getAll("index");if(h.some(g=>g==="")){d.delete("index"),h.filter(v=>v).forEach(v=>d.append("index",v));let g=d.toString();l.search=g?`?${g}`:""}}return(!o||o===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:Fi([i,l.pathname])),Ln(l)}function tT(o,p={}){let i=j.useContext(fc);Xe(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=wp("useViewTransitionState"),s=el(o,{relative:p.relative});if(!i.isTransitioning)return!1;let l=wi(i.currentLocation.pathname,a)||i.currentLocation.pathname,u=wi(i.nextLocation.pathname,a)||i.nextLocation.pathname;return ws(s.pathname,u)!=null||ws(s.pathname,l)!=null}new TextEncoder;[...B0];var iT=Xg();/**
 * react-router v7.5.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nT(o){return j.createElement(m0,{flushSync:iT.flushSync,...o})}const Ui={color:{student:"#ff5556FF",mentor:"#06b8ba",menus:"#fadf0c"}},Ft="https://buoy.ix.tc/api/dev";let As=j.createContext(null);async function aT(){let o=await fetch(`${Ft}/authn/session`,{method:"GET",mode:"cors",credentials:"include"});return!o.ok&&window.location.hash!=""&&window.location.replace("/"),await o.json()}function rT({children:o}){let[p,i]=j.useState(null);return j.useEffect(function(){aT().then(i)},[]),F.jsx(As.Provider,{value:p,children:o})}function lT(o){if(o.length>=255)throw new TypeError("Alphabet too long");const p=new Uint8Array(256);for(let c=0;c<p.length;c++)p[c]=255;for(let c=0;c<o.length;c++){const g=o.charAt(c),v=g.charCodeAt(0);if(p[v]!==255)throw new TypeError(g+" is ambiguous");p[v]=c}const i=o.length,a=o.charAt(0),s=Math.log(i)/Math.log(256),l=Math.log(256)/Math.log(i);function u(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let g=0,v=0,y=0;const w=c.length;for(;y!==w&&c[y]===0;)y++,g++;const _=(w-y)*l+1>>>0,b=new Uint8Array(_);for(;y!==w;){let z=c[y],H=0;for(let ae=_-1;(z!==0||H<v)&&ae!==-1;ae--,H++)z+=256*b[ae]>>>0,b[ae]=z%i>>>0,z=z/i>>>0;if(z!==0)throw new Error("Non-zero carry");v=H,y++}let C=_-v;for(;C!==_&&b[C]===0;)C++;let A=a.repeat(g);for(;C<_;++C)A+=o.charAt(b[C]);return A}function d(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let g=0,v=0,y=0;for(;c[g]===a;)v++,g++;const w=(c.length-g)*s+1>>>0,_=new Uint8Array(w);for(;g<c.length;){const z=c.charCodeAt(g);if(z>255)return;let H=p[z];if(H===255)return;let ae=0;for(let Q=w-1;(H!==0||ae<y)&&Q!==-1;Q--,ae++)H+=i*_[Q]>>>0,_[Q]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");y=ae,g++}let b=w-y;for(;b!==w&&_[b]===0;)b++;const C=new Uint8Array(v+(w-b));let A=v;for(;b!==w;)C[A++]=_[b++];return C}function h(c){const g=d(c);if(g)return g;throw new Error("Non-base"+i+" character")}return{encode:u,decodeUnsafe:d,decode:h}}var sT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const ps=lT(sT),oT=3834e3,uT=3834001,xp=616e4,cT=6160001,hT=6160002;function Ep(o){return Array.isArray(o)?"%5B"+o.map(Ep).join("%2C%20")+"%5D":typeof o=="bigint"?`${o}n`:encodeURIComponent(String(o!=null&&Object.getPrototypeOf(o)===null?{...o}:o))}function fT([o,p]){return`${o}=${Ep(p)}`}function dT(o){const p=Object.entries(o).map(fT).join("&");return btoa(p)}var zg;(function(o){o[o.EscapeSequence=0]="EscapeSequence",o[o.Text=1]="Text",o[o.Variable=2]="Variable"})(zg||(zg={}));function gT(o,p={}){{let i=`Wallet Standard error #${o}; Decode this error by running \`npx @wallet-standard/errors decode -- ${o}`;return Object.keys(p).length&&(i+=` '${dT(p)}'`),`${i}\``}}class qa extends Error{constructor(...[p,i]){let a,s;if(i){const{cause:u,...d}=i;u&&(s={cause:u}),Object.keys(d).length>0&&(a=d)}const l=gT(p,a);super(l,s),this.context={__code:p,...a},this.name="WalletStandardError"}}function Os(...o){"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(...o)}const Sp=new WeakMap;function _p(o,p){Sp.set(o,p)}function Ms(o){const p=Ci(o),i=p.accounts.find(({address:a})=>a===o.address);if(!i){const a=new qa(uT,{address:o.address,walletName:p.name});throw Os(a,Ms),a}return i}function Ci(o){const p=Sp.get(o);if(!p){const i=new qa(oT);throw Os(i,Ci),i}return p}function Ss(o,p){const i=new Set(o),a=new Set(p);if(i.size!==a.size)return!0;for(const s of i)if(!a.has(s))return!0;return!1}const Lg=new WeakMap;function rc(o,p){let i=Lg.get(p);if(i)try{Ci(i)!==o&&(i=void 0)}catch{i=void 0}const a=!i;let s=i??{},l=!i;function u(){l||(s={...s},l=!0)}return(a||Ss(s.chains,p.chains))&&(u(),s.chains=Object.freeze([...p.chains])),(a||Ss(s.features,p.features))&&(u(),s.features=Object.freeze([...p.features])),(a||s.address!==p.address||s.icon!==p.icon||s.label!==p.label||s.publicKey!==p.publicKey)&&(u(),s.address=p.address,s.icon=p.icon,s.label=p.label,s.publicKey=p.publicKey),l&&(Lg.set(p,s),_p(s,o)),Object.freeze(s)}const Ng=new WeakMap;function pT(o){const p=Ng.get(o),i=!p;let a=p??{},s=!p;function l(){s||(a={...a},s=!0)}const u={_cache:[],*[Symbol.iterator](){this._cache.length&&(yield*this._cache);for(const d of o.accounts.slice(this._cache.length)){const h=rc(o,d);this._cache.push(h),yield h}},some(d){if(this._cache.some(d))return!0;for(const h of o.accounts.slice(this._cache.length)){const c=rc(o,h);if(this._cache.push(c),d(c))return!0}return!1},get length(){return o.accounts.length}};return(i||a.accounts.length!==o.accounts.length||u.some(d=>!a.accounts.includes(d)))&&(l(),a.accounts=Object.freeze(Array.from(u))),(i||Ss(a.features,Object.keys(o.features)))&&(l(),a.features=Object.freeze(Object.keys(o.features))),(i||Ss(a.chains,o.chains))&&(l(),a.chains=Object.freeze([...o.chains])),(i||a.icon!==o.icon||a.name!==o.name||a.version!==o.version)&&(l(),a.icon=o.icon,a.name=o.name,a.version=o.version),s&&(Ng.set(o,a),_p(a,o)),Object.freeze(a)}function mT(o,p){if(o.address!==p.address)return!1;const i=Ci(o),a=Ci(p);return i===a}function vT(o,p){const i=Ci(p),a=Ci(o);return i===a}function yT(o){return`${Ci(o).name.replace(":","_")}:${o.address}`}function Ps(o,p){const i=Ci(o);if(!(p in i.features)){const a=new qa(hT,{featureName:p,supportedChains:[...i.chains],supportedFeatures:Object.keys(i.features),walletName:i.name});throw Os(a,Ps),a}return i.features[p]}function zs(o,p){if(!o.features.includes(p)){const i=new qa(cT,{address:o.address,featureName:p,supportedChains:[...o.chains],supportedFeatures:[...o.features]});throw Os(i,zs),i}return Ps(o,p)}const TT="standard:connect",wT="standard:disconnect",bp="standard:events",hs=new WeakMap,ms=new Map;function xT(){return{current:void 0}}function Bg(o){return{get current(){return hs.get(o)},set current(p){var i;p!==hs.get(o)&&(p===void 0?hs.delete(o):hs.set(o,p),(i=ms.get(o))==null||i.forEach(a=>a()))}}}function Rp(o){const p=j.useCallback(s=>{let l=ms.get(o);l==null&&ms.set(o,l=new Set);function u(){i.current=Bg(o),s()}return l.add(u),()=>{i.current=void 0,l.delete(u),l.size===0&&ms.delete(o)}},[o]),i=j.useRef(void 0),a=j.useCallback(()=>i.current||(i.current=Bg(o)),[o]);return j.useSyncExternalStore(p,a,xT)}function yc(o){const p=Ps(o,TT),i=Ci(o),a=Rp(i),s=j.useCallback(async function(d,...h){if(a.current)return a.current;const c=p.connect(d,...h).then(({accounts:g})=>g.map(rc.bind(null,i))).finally(()=>{a.current=void 0});return a.current=c,await c},[p,a,i]);return[!!a.current,s]}function Tc(o){const p=Ps(o,wT),i=Ci(o),a=Rp(i),s=j.useCallback(async function(...d){if(a.current)return a.current;const h=p.disconnect(...d).finally(()=>{a.current=void 0});return a.current=h,await h},[p,a]);return[!!a.current,s]}var ET=function(o,p,i,a){if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof p=="function"?o!==p||!a:!p.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?a:i==="a"?a.call(o):a?a.value:p.get(o)},ST=function(o,p,i,a,s){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof p=="function"?o!==p||!s:!p.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?s.call(o,i):s?s.value=i:p.set(o,i),i},vs;let Yr;const Ls=new Set;function _T(o){Qr=void 0,Ls.add(o)}function bT(o){Qr=void 0,Ls.delete(o)}const Ga={};function RT(){if(Yr||(Yr=Object.freeze({register:Hg,get:CT,on:DT}),typeof window>"u"))return Yr;const o=Object.freeze({register:Hg});try{window.addEventListener("wallet-standard:register-wallet",({detail:p})=>p(o))}catch(p){console.error(`wallet-standard:register-wallet event listener could not be added
`,p)}try{window.dispatchEvent(new AT(o))}catch(p){console.error(`wallet-standard:app-ready event could not be dispatched
`,p)}return Yr}function Hg(...o){var p;return o=o.filter(i=>!Ls.has(i)),o.length?(o.forEach(i=>_T(i)),(p=Ga.register)==null||p.forEach(i=>Ug(()=>i(...o))),function(){var a;o.forEach(s=>bT(s)),(a=Ga.unregister)==null||a.forEach(s=>Ug(()=>s(...o)))}):()=>{}}let Qr;function CT(){return Qr||(Qr=[...Ls]),Qr}function DT(o,p){var i;return(i=Ga[o])!=null&&i.push(p)||(Ga[o]=[p]),function(){var s;Ga[o]=(s=Ga[o])==null?void 0:s.filter(l=>p!==l)}}function Ug(o){try{o()}catch(p){console.error(p)}}class AT extends Event{get detail(){return ET(this,vs,"f")}get type(){return"wallet-standard:app-ready"}constructor(p){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),vs.set(this,void 0),ST(this,vs,p,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}vs=new WeakMap;function Fg(o){return bp in o.features}const jg=Symbol();function OT(o){const p=j.useRef(jg);return p.current===jg&&(p.current=o()),p.current}const MT=[];function PT(){return MT}function zT(){const{get:o,on:p}=OT(RT),i=j.useRef(o()),a=j.useRef(i.current),s=j.useCallback(()=>{const u=o();return u!==i.current&&(a.current=u),i.current=u,a.current},[o]),l=j.useCallback(u=>{const d=new Map;function h(v){const y=v.features[bp].on("change",()=>{a.current=[...o()],u()});return d.set(v,y),y}const c=p("register",(...v)=>{v.filter(Fg).map(h),u()}),g=p("unregister",(...v)=>{v.forEach(y=>{const w=d.get(y);w&&(d.delete(y),w())}),u()});return o().filter(Fg).map(h),()=>{c(),g(),d.forEach(v=>v()),d.clear()}},[o,p]);return j.useSyncExternalStore(l,s,PT)}function Ns(){const o=zT();return j.useMemo(()=>o.map(pT),[o])}const lc="solana:signAndSendTransaction",LT="solana:signMessage",NT="solana:signTransaction",Bs=j.createContext(null,null),sc="solana:chosen-wallet-and-address";let Cp=!1;async function BT(o){let p=zs(o,LT),i=ps.encode(crypto.getRandomValues(new Uint8Array(Array.from({length:12})))),s=await(await fetch(`${Ft}/authn/challenge`,{method:"POST",body:JSON.stringify({address:o.address,nonce:i}),headers:{"content-type":"application/json"}})).json(),l=Ms(o);s.message;let u=[{message:ps.decode(s.message)}].map(function(y){return{...y,account:l}}),d=await p.signMessage(...u),{signature:h,signedMessage:c}=d[0];if(!h)throw new Error("??");let g=await fetch(`${Ft}/authn/verify`,{method:"POST",body:JSON.stringify({address:o.address,nonce:i,signature:ps.encode(h)}),headers:{"Content-type":"application/json"}});if(!g.ok)throw new Error("Failed!");let{handle:v}=await g.json();window.location.replace(`${Ft}/authn?handle=${v}`)}function Gg(o){if(Cp)return;const p=localStorage.getItem(sc);if(!p||typeof p!="string")return;const[i,a]=p;if(!(!i||!a)){for(const s of o)if(s.name===i){for(const l of s.accounts)if(l.address===a)return l}}}function HT({children:o}){let p=Ns(),[i,a]=j.useState(function(){return Gg(p)});function s(u){a(function(d){Cp=!0;let h=u;typeof u=="function"&&(h=u(d));let c;return h&&(c=yT(h)),localStorage.removeItem(sc),c&&localStorage.setItem(sc,c),h})}let l=j.useMemo(function(){if(i)for(let u of p){for(let d of u.accounts)if(mT(i,d))return d;if(vT(i,u)&&u.accounts[0])return u.accounts[0]}},[i,p]);return j.useEffect(function(){let u=Gg(p);u&&a(u)},[p]),j.useEffect(function(){i&&!l&&a(void 0),l&&BT(l)},[i,l]),F.jsx(Bs.Provider,{value:j.useMemo(function(){return[l,s,[l]]}),children:o})}function UT(){return F.jsx(F.Fragment,{children:F.jsxs("svg",{width:"219",xmlns:"http://www.w3.org/2000/svg",height:"216",id:"screenshot-e384008e-ccbd-80a0-8006-05ea9f514786",viewBox:"-161 -1591 219 216",style:{display:"block",WebkitPrintColorAdjust:"exact"},xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",version:"1.1",children:[F.jsx("style",{}),F.jsxs("g",{id:"shape-e384008e-ccbd-80a0-8006-05ea9f514786",style:{fill:"#000000"},filter:"url(#filter-render-286)",width:"160",height:"160",rx:"0",ry:"0",children:[F.jsxs("defs",{children:[F.jsxs("filter",{id:"filter-render-286",x:"-0.09202453987730061",y:"-0.09375",width:"1.2576687116564418",height:"1.2625",filterUnits:"objectBoundingBox",colorInterpolationFilters:"sRGB",children:[F.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),F.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),F.jsx("feOffset",{dx:"4",dy:"4"}),F.jsx("feGaussianBlur",{stdDeviation:"0"}),F.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),F.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"filter_e384008e-ccbd-80a0-8006-05eac53f6b70"}),F.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"filter_e384008e-ccbd-80a0-8006-05eac53f6b70",result:"shape"})]}),F.jsxs("filter",{id:"filter-shadow-render-286",x:"-0.09202453987730061",y:"-0.09375",width:"1.2576687116564418",height:"1.2625",filterUnits:"objectBoundingBox",colorInterpolationFilters:"sRGB",children:[F.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),F.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),F.jsx("feOffset",{dx:"4",dy:"4"}),F.jsx("feGaussianBlur",{stdDeviation:"0"}),F.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),F.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"filter_e384008e-ccbd-80a0-8006-05eac53f6b70"}),F.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"filter_e384008e-ccbd-80a0-8006-05eac53f6b70",result:"shape"})]})]}),F.jsx("g",{id:"shape-e384008e-ccbd-80a0-8006-05ea9f57d81d",style:{display:"none"},children:F.jsx("g",{className:"fills",id:"fills-e384008e-ccbd-80a0-8006-05ea9f57d81d",children:F.jsx("rect",{rx:"0",ry:"0",x:"-145",y:"-1575",transform:"matrix(1.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000)",width:"160",height:"160",fill:"none",style:{fill:"none"}})})}),F.jsx("g",{id:"shape-e384008e-ccbd-80a0-8006-05ea9f5b68cc",children:F.jsx("g",{className:"fills",id:"fills-e384008e-ccbd-80a0-8006-05ea9f5b68cc",children:F.jsx("path",{d:"M-65.000,-1575.000L-46.459,-1552.063L-17.977,-1559.721L-16.459,-1530.267L11.085,-1519.721L-5.000,-1495.000L11.085,-1470.279L-16.459,-1459.733L-17.977,-1430.279L-46.459,-1437.937L-65.000,-1415.000L-83.541,-1437.937L-112.023,-1430.279L-113.541,-1459.733L-141.085,-1470.279L-125.000,-1495.000L-141.085,-1519.721L-113.541,-1530.267L-112.023,-1559.721L-83.541,-1552.063L-65.000,-1575.000Z",style:{fill:"#feef00"}})})}),F.jsx("g",{id:"shape-e384008e-ccbd-80a0-8006-05eb06010ff6",children:F.jsxs("g",{transform:"matrix(1.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000)",className:"text-container",x:"-145",y:"-1535",width:"163",height:"91.99999999999955",rx:"0",ry:"0",children:[F.jsxs("defs",{children:[F.jsx("pattern",{patternUnits:"userSpaceOnUse",x:"-145",y:"-1535",width:"72",height:"79.1875",id:"fill-0-render-289-0",children:F.jsx("g",{children:F.jsx("rect",{width:"72",height:"79.1875",style:{fill:"#000000",fillOpacity:"1"}})})}),F.jsx("pattern",{patternUnits:"userSpaceOnUse",x:"-145",y:"-1535",width:"72",height:"79.1875",id:"fill-1-render-289-0",children:F.jsx("g",{children:F.jsx("rect",{width:"72",height:"79.1875",style:{fill:"#000000",fillOpacity:"1"}})})})]}),F.jsx("g",{className:"fills",id:"fills-e384008e-ccbd-80a0-8006-05eb06010ff6",children:F.jsx("text",{x:"-99.5",y:"-1496",dominantBaseline:"ideographic",textLength:"72",lengthAdjust:"spacingAndGlyphs",style:{textTransform:"uppercase",fontFamily:"Ubuntu",letterSpacing:"normal",fontStyle:"normal",fontWeight:700,whiteSpace:"pre",fontSize:"36px",textDecoration:"none solid rgb(0, 0, 0)",direction:"ltr",fill:"#000000",fillOopacity:1},children:"join"})}),F.jsxs("defs",{children:[F.jsx("pattern",{patternUnits:"userSpaceOnUse",x:"-145",y:"-1535",width:"72",height:"79.1875",id:"fill-0-render-289-1",children:F.jsx("g",{children:F.jsx("rect",{width:"72",height:"79.1875",style:{fill:"#000000",fillOpacity:"1"}})})}),F.jsx("pattern",{patternUnits:"userSpaceOnUse",x:"-145",y:"-1535",width:"72",height:"79.1875",id:"fill-1-render-289-1",children:F.jsx("g",{children:F.jsx("rect",{width:"72",height:"79.1875",style:{fill:"#000000",fillOpacity:"1"}})})})]}),F.jsx("g",{className:"fills",id:"fills-e384008e-ccbd-80a0-8006-05eb06010ff6",children:F.jsx("text",{x:"-99.5",y:"-1452.8125",dominantBaseline:"ideographic",textLength:"72",lengthAdjust:"spacingAndGlyphs",style:{textTransform:"uppercase",fontFamily:"Ubuntu Mono",letterSpacing:"normal",fontStyle:"normal",fontWeight:700,whiteSpace:"pre",fontSize:"36px",textDecoration:"none solid rgb(0, 0, 0)",direction:"ltr",fill:"#000000",fillOopacity:1},children:"now!"})})]})})]})]})})}function FT(){let[o,p]=j.useState("mentor");j.useEffect(function(){},[]);let i=j.useContext(As),[a,s]=j.useState(!0),[l,u]=j.useContext(Bs),h=Ns()[0],[c,g]=yc(h);Tc(h);async function v(w){let _=await g();u(_[0])}function y(w,_=7){if(!w)return w;let b=w==null?void 0:w.toString().substring(0,_);return w.length>_?`${b}...`:w}return j.useEffect(function(){i&&s(!1)},[i]),a?F.jsx("div",{children:"Loading..."}):F.jsx(F.Fragment,{children:F.jsxs("div",{className:"landing",style:{textTransform:"uppercase"},children:[F.jsxs("h1",{children:["welcome to buoy ",F.jsx("b",{children:i&&y(i.address)})]}),F.jsx("h2",{children:"the place to be!"}),F.jsx("a",{onClick:function(w){if(w.preventDefault(),!i.address){v();return}window.location.replace("/#zone")},className:"star-sign",children:F.jsx(UT,{})}),F.jsx("button",{className:"button",style:{background:Ui.color.mentor},onClick:function(){p("mentor")},children:"TEACH TO EARN"}),F.jsx("button",{className:"button",style:{background:Ui.color.student},onClick:function(){p("student")},children:"PAY TO LEARN"}),F.jsx("button",{className:"button",onClick:function(){window.location.replace("/#zone")},children:"ENTER THE ZONE"}),o=="mentor"&&F.jsxs("div",{className:"button pane",style:{background:Ui.color.mentor},children:[F.jsx("h2",{children:"YOUR FEEDBACK IS VALUABLE! GET PAID!"}),F.jsx("h4",{children:`YOUR INSIGHTS CAN BE CRUCIAL TO SOMEONE'S LEARNING JOURNEY.

THIS PLATFORM'S MISSION IS TO PROVIDE A WAY!`})]}),o=="student"&&F.jsxs("div",{id:"mentor",className:"button pane",style:{background:Ui.color.student},children:[F.jsx("h2",{children:"LEARN TO DRAW WITH ALMOST NO EFFORT!"}),F.jsx("h4",{children:`DON'T KNOW WHERE TO BEGIN?

THIS PLATFORM OFFERS ALGORITHMIC CURRICULUMS THAT ACT AS A GUARDRAIL FOR YOUR LEARNING.

THIS IS A VERY LOW BARRIER TO ENTRY AND A GREAT WAY TO EFFORTLESSLY INVEST IN YOUR SKILLS.

YOU'LL RECEIVE VALUABLE FEEDBACK FROM EXPERIENCED MENTORS TO HELP YOU IMPROVE.`})]})]})})}function Dp({style:o,value:p}){return console.log(["LOOKING FOR SPL",p]),F.jsx("div",{className:"picker",style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:F.jsxs("div",{className:"button card",style:{...o,padding:"1em",display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"space-between",justifyContent:"center",textOverflow:"ellipsis",overflow:"hidden"},children:[F.jsxs("div",{children:[F.jsxs("p",{children:["- address: ",p.address]}),F.jsxs("p",{children:["- access: ",p.access]}),p.spl&&F.jsxs("span",{children:["- minter: ",p.spl.data.minter]})]}),F.jsx("div",{style:{width:"72px",height:"72px",borderRadius:"100% 100%",background:`url('${Ft}/cards/${p.identifier}')`,backgroundSize:"cover"}})]})})}function jT(o){const p=j.useRef(null);let i=p.current,a=i==null?void 0:i.getContext("2d");j.useEffect(function(){i=p.current,i&&(a=i.getContext("2d"))},[]);let s=!1;function l(h){i&&(s=!0,a.beginPath())}function u(h){s=!1,a&&a.stroke()}function d(h){if(!s||!a)return;let c=i.getBoundingClientRect();a.lineWidth=5,a.lineCap="round",a.lineTo(h.clientX-c.left,h.clientY-c.top),a.stroke()}return F.jsx("canvas",{ref:p,width:o.width,height:o.height,onPointerDown:l,onPointerUp:u,onPointerMove:d,style:{touchAction:"none",border:`2px dashed ${o.dashes||"red"}`}})}var ys={exports:{}},GT=ys.exports,kg;function kT(){return kg||(kg=1,function(o){//! openseadragon 5.0.1
//! Built on 2024-12-09
//! Git commit: v5.0.1-0-480de92d
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function p(i){return new p.Viewer(i)}(function(i){i.version={versionStr:"5.0.1",major:parseInt("5",10),minor:parseInt("0",10),revision:parseInt("1",10)};var a={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},s=Object.prototype.toString,l=Object.prototype.hasOwnProperty;i.isFunction=function(u){return i.type(u)==="function"},i.isArray=Array.isArray||function(u){return i.type(u)==="array"},i.isWindow=function(u){return u&&typeof u=="object"&&"setInterval"in u},i.type=function(u){return u==null?String(u):a[s.call(u)]||"object"},i.isPlainObject=function(u){if(!u||p.type(u)!=="object"||u.nodeType||i.isWindow(u)||u.constructor&&!l.call(u,"constructor")&&!l.call(u.constructor.prototype,"isPrototypeOf"))return!1;var d;for(var h in u)d=h;return d===void 0||l.call(u,d)},i.isEmptyObject=function(u){for(var d in u)return!1;return!0},i.freezeObject=function(u){return Object.freeze?i.freezeObject=Object.freeze:i.freezeObject=function(d){return d},i.freezeObject(u)},i.supportsCanvas=function(){var u=document.createElement("canvas");return!!(i.isFunction(u.getContext)&&u.getContext("2d"))}(),i.isCanvasTainted=function(u){var d=!1;try{u.getContext("2d").getImageData(0,0,1,1)}catch{d=!0}return d},i.supportsAddEventListener=function(){return!!(document.documentElement.addEventListener&&document.addEventListener)}(),i.supportsRemoveEventListener=function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)}(),i.supportsEventListenerOptions=function(){var u=0;if(i.supportsAddEventListener)try{var d={get capture(){return u++,!1},get once(){return u++,!1},get passive(){return u++,!1}};window.addEventListener("test",null,d),window.removeEventListener("test",null,d)}catch{u=0}return u>=3}(),i.getCurrentPixelDensityRatio=function(){if(i.supportsCanvas){var u=document.createElement("canvas").getContext("2d"),d=window.devicePixelRatio||1,h=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return Math.max(d,1)/h}else return 1},i.pixelDensityRatio=i.getCurrentPixelDensityRatio()})(p),function(i){i.extend=function(){var h,c,g,v,y,w,_=arguments[0]||{},b=arguments.length,C=!1,A=1;for(typeof _=="boolean"&&(C=_,_=arguments[1]||{},A=2),typeof _!="object"&&!p.isFunction(_)&&(_={}),b===A&&(_=this,--A);A<b;A++)if(h=arguments[A],h!==null||h!==void 0)for(c in h){var z=Object.getOwnPropertyDescriptor(h,c);if(z!==void 0){if(z.get||z.set){Object.defineProperty(_,c,z);continue}v=z.value}else{i.console.warn('Could not copy inherited property "'+c+'".');continue}_!==v&&(C&&v&&(p.isPlainObject(v)||(y=p.isArray(v)))?(g=_[c],y?(y=!1,w=g&&p.isArray(g)?g:[]):w=g&&p.isPlainObject(g)?g:{},_[c]=p.extend(C,w,v)):v!==void 0&&(_[c]=v))}return _};var a=function(){if(typeof navigator!="object")return!1;var h=navigator.userAgent;return typeof h!="string"?!1:h.indexOf("iPhone")!==-1||h.indexOf("iPad")!==-1||h.indexOf("iPod")!==-1};i.extend(i,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:a(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,maxTilesPerFrame:1,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,overlayPreserveContentDirection:!0,opacity:1,compositeOperation:null,drawer:["webgl","canvas","html"],drawerOptions:{webgl:{},canvas:{},html:{},custom:{}},preload:!1,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},delegate:function(h,c){return function(){var g=arguments;return g===void 0&&(g=[]),c.apply(h,g)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(h){return i._viewers.get(this.getElement(h))},getElement:function(h){return typeof h=="string"&&(h=document.getElementById(h)),h},getElementPosition:function(h){var c=new i.Point,g,v;for(h=i.getElement(h),g=i.getElementStyle(h).position==="fixed",v=d(h,g);v;)c.x+=h.offsetLeft,c.y+=h.offsetTop,g&&(c=c.plus(i.getPageScroll())),h=v,g=i.getElementStyle(h).position==="fixed",v=d(h,g);return c},getElementOffset:function(h){h=i.getElement(h);var c=h&&h.ownerDocument,g,v,y={top:0,left:0};return c?(g=c.documentElement,typeof h.getBoundingClientRect<"u"&&(y=h.getBoundingClientRect()),v=c===c.window?c:c.nodeType===9?c.defaultView||c.parentWindow:!1,new i.Point(y.left+(v.pageXOffset||g.scrollLeft)-(g.clientLeft||0),y.top+(v.pageYOffset||g.scrollTop)-(g.clientTop||0))):new i.Point},getElementSize:function(h){return h=i.getElement(h),new i.Point(h.clientWidth,h.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(h){return h=i.getElement(h),h.currentStyle}:function(h){return h=i.getElement(h),window.getComputedStyle(h,"")},getCssPropertyWithVendorPrefix:function(h){var c={};return i.getCssPropertyWithVendorPrefix=function(g){if(c[g]!==void 0)return c[g];var v=document.createElement("div").style,y=null;if(v[g]!==void 0)y=g;else for(var w=["Webkit","Moz","MS","O","webkit","moz","ms","o"],_=i.capitalizeFirstLetter(g),b=0;b<w.length;b++){var C=w[b]+_;if(v[C]!==void 0){y=C;break}}return c[g]=y,y},i.getCssPropertyWithVendorPrefix(h)},capitalizeFirstLetter:function(h){return h.charAt(0).toUpperCase()+h.slice(1)},positiveModulo:function(h,c){var g=h%c;return g<0&&(g+=c),g},pointInElement:function(h,c){h=i.getElement(h);var g=i.getElementOffset(h),v=i.getElementSize(h);return c.x>=g.x&&c.x<g.x+v.x&&c.y<g.y+v.y&&c.y>=g.y},getMousePosition:function(h){if(typeof h.pageX=="number")i.getMousePosition=function(c){var g=new i.Point;return g.x=c.pageX,g.y=c.pageY,g};else if(typeof h.clientX=="number")i.getMousePosition=function(c){var g=new i.Point;return g.x=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,g.y=c.clientY+document.body.scrollTop+document.documentElement.scrollTop,g};else throw new Error("Unknown event mouse position, no known technique.");return i.getMousePosition(h)},getPageScroll:function(){var h=document.documentElement||{},c=document.body||{};if(typeof window.pageXOffset=="number")i.getPageScroll=function(){return new i.Point(window.pageXOffset,window.pageYOffset)};else if(c.scrollLeft||c.scrollTop)i.getPageScroll=function(){return new i.Point(document.body.scrollLeft,document.body.scrollTop)};else if(h.scrollLeft||h.scrollTop)i.getPageScroll=function(){return new i.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new i.Point(0,0);return i.getPageScroll()},setPageScroll:function(h){if(typeof window.scrollTo<"u")i.setPageScroll=function(v){window.scrollTo(v.x,v.y)};else{var c=i.getPageScroll();if(c.x===h.x&&c.y===h.y)return;document.body.scrollLeft=h.x,document.body.scrollTop=h.y;var g=i.getPageScroll();if(g.x!==c.x&&g.y!==c.y){i.setPageScroll=function(v){document.body.scrollLeft=v.x,document.body.scrollTop=v.y};return}if(document.documentElement.scrollLeft=h.x,document.documentElement.scrollTop=h.y,g=i.getPageScroll(),g.x!==c.x&&g.y!==c.y){i.setPageScroll=function(v){document.documentElement.scrollLeft=v.x,document.documentElement.scrollTop=v.y};return}i.setPageScroll=function(v){}}i.setPageScroll(h)},getWindowSize:function(){var h=document.documentElement||{},c=document.body||{};if(typeof window.innerWidth=="number")i.getWindowSize=function(){return new i.Point(window.innerWidth,window.innerHeight)};else if(h.clientWidth||h.clientHeight)i.getWindowSize=function(){return new i.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(c.clientWidth||c.clientHeight)i.getWindowSize=function(){return new i.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return i.getWindowSize()},makeCenteredNode:function(h){h=i.getElement(h);var c=[i.makeNeutralElement("div"),i.makeNeutralElement("div"),i.makeNeutralElement("div")];return i.extend(c[0].style,{display:"table",height:"100%",width:"100%"}),i.extend(c[1].style,{display:"table-row"}),i.extend(c[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),c[0].appendChild(c[1]),c[1].appendChild(c[2]),c[2].appendChild(h),c[0]},makeNeutralElement:function(h){var c=document.createElement(h),g=c.style;return g.background="transparent none",g.border="none",g.margin="0px",g.padding="0px",g.position="static",c},now:function(){return Date.now?i.now=Date.now:i.now=function(){return new Date().getTime()},i.now()},makeTransparentImage:function(h){var c=i.makeNeutralElement("img");return c.src=h,c},setElementOpacity:function(h,c,g){var v,y;h=i.getElement(h),g&&!i.Browser.alpha&&(c=Math.round(c)),i.Browser.opacity?h.style.opacity=c<1?c:"":c<1?(v=Math.round(100*c),y="alpha(opacity="+v+")",h.style.filter=y):h.style.filter=""},setElementTouchActionNone:function(h){h=i.getElement(h),typeof h.style.touchAction<"u"?h.style.touchAction="none":typeof h.style.msTouchAction<"u"&&(h.style.msTouchAction="none")},setElementPointerEvents:function(h,c){h=i.getElement(h),typeof h.style<"u"&&typeof h.style.pointerEvents<"u"&&(h.style.pointerEvents=c)},setElementPointerEventsNone:function(h){i.setElementPointerEvents(h,"none")},addClass:function(h,c){h=i.getElement(h),h.className?(" "+h.className+" ").indexOf(" "+c+" ")===-1&&(h.className+=" "+c):h.className=c},indexOf:function(h,c,g){return Array.prototype.indexOf?this.indexOf=function(v,y,w){return v.indexOf(y,w)}:this.indexOf=function(v,y,w){var _,b=w||0,C;if(!v)throw new TypeError;if(C=v.length,C===0||b>=C)return-1;for(b<0&&(b=C-Math.abs(b)),_=b;_<C;_++)if(v[_]===y)return _;return-1},this.indexOf(h,c,g)},removeClass:function(h,c){var g,v=[],y;for(h=i.getElement(h),g=h.className.split(/\s+/),y=0;y<g.length;y++)g[y]&&g[y]!==c&&v.push(g[y]);h.className=v.join(" ")},normalizeEventListenerOptions:function(h){var c;return typeof h<"u"?typeof h=="boolean"?c=i.supportsEventListenerOptions?{capture:h}:h:c=i.supportsEventListenerOptions?h:typeof h.capture<"u"?h.capture:!1:c=i.supportsEventListenerOptions?{capture:!1}:!1,c},addEvent:function(){if(i.supportsAddEventListener)return function(h,c,g,v){v=i.normalizeEventListenerOptions(v),h=i.getElement(h),h.addEventListener(c,g,v)};if(document.documentElement.attachEvent&&document.attachEvent)return function(h,c,g){h=i.getElement(h),h.attachEvent("on"+c,g)};throw new Error("No known event model.")}(),removeEvent:function(){if(i.supportsRemoveEventListener)return function(h,c,g,v){v=i.normalizeEventListenerOptions(v),h=i.getElement(h),h.removeEventListener(c,g,v)};if(document.documentElement.detachEvent&&document.detachEvent)return function(h,c,g){h=i.getElement(h),h.detachEvent("on"+c,g)};throw new Error("No known event model.")}(),cancelEvent:function(h){h.preventDefault()},eventIsCanceled:function(h){return h.defaultPrevented},stopEvent:function(h){h.stopPropagation()},createCallback:function(h,c){console.error("The createCallback function is deprecated and will be removed in future versions. Please use alternativeFunction instead.");var g=[],v;for(v=2;v<arguments.length;v++)g.push(arguments[v]);return function(){var y=g.concat([]),w;for(w=0;w<arguments.length;w++)y.push(arguments[w]);return c.apply(h,y)}},getUrlParameter:function(h){var c=u[h];return c||null},getUrlProtocol:function(h){var c=h.match(/^([a-z]+:)\/\//i);return c===null?window.location.protocol:c[1].toLowerCase()},createAjaxRequest:function(){if(window.XMLHttpRequest)return i.createAjaxRequest=function(){return new XMLHttpRequest},new XMLHttpRequest;throw new Error("Browser doesn't support XMLHttpRequest.")},makeAjaxRequest:function(h,c,g){var v,y,w,_;i.isPlainObject(h)&&(c=h.success,g=h.error,v=h.withCredentials,y=h.headers,w=h.responseType||null,_=h.postData||null,h=h.url);var b=i.getUrlProtocol(h),C=i.createAjaxRequest();if(!i.isFunction(c))throw new Error("makeAjaxRequest requires a success callback");C.onreadystatechange=function(){C.readyState===4&&(C.onreadystatechange=function(){},C.status>=200&&C.status<300||C.status===0&&b!=="http:"&&b!=="https:"?c(C):i.isFunction(g)?g(C):i.console.error("AJAX request returned %d: %s",C.status,h))};var A=_?"POST":"GET";try{if(C.open(A,h,!0),w&&(C.responseType=w),y)for(var z in y)Object.prototype.hasOwnProperty.call(y,z)&&y[z]&&C.setRequestHeader(z,y[z]);v&&(C.withCredentials=!0),C.send(_)}catch(H){i.console.error("%s while making AJAX request: %s",H.name,H.message),C.onreadystatechange=function(){},i.isFunction(g)&&g(C,H)}return C},jsonp:function(h){var c,g=h.url,v=document.head||document.getElementsByTagName("head")[0]||document.documentElement,y=h.callbackName||"openseadragon"+i.now(),w=window[y],_="$1"+y+"$2",b=h.param||"callback",C=h.callback;g=g.replace(/(=)\?(&|$)|\?\?/i,_),g+=(/\?/.test(g)?"&":"?")+b+"="+y,window[y]=function(A){if(w)window[y]=w;else try{delete window[y]}catch{}C&&i.isFunction(C)&&C(A)},c=document.createElement("script"),(h.async!==void 0||h.async!==!1)&&(c.async="async"),h.scriptCharset&&(c.charset=h.scriptCharset),c.src=g,c.onload=c.onreadystatechange=function(A,z){(z||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,v&&c.parentNode&&v.removeChild(c),c=void 0)},v.insertBefore(c,v.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(h){if(window.DOMParser)i.parseXml=function(c){var g=null,v;return v=new DOMParser,g=v.parseFromString(c,"text/xml"),g};else throw new Error("Browser doesn't support XML DOM.");return i.parseXml(h)},parseJSON:function(h){return i.parseJSON=window.JSON.parse,i.parseJSON(h)},imageFormatSupported:function(h){return h=h||"",!!l[h.toLowerCase()]},setImageFormatsSupported:function(h){i.extend(l,h)}});var s=function(h){};i.console=window.console||{log:s,debug:s,info:s,warn:s,error:s,assert:s},i.Browser={vendor:i.BROWSERS.UNKNOWN,version:0,alpha:!0};var l={avif:!0,bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1,webp:!0},u={};(function(){var h=navigator.appVersion,c=navigator.userAgent,g;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(i.Browser.vendor=i.BROWSERS.IE,i.Browser.version=parseFloat(c.substring(c.indexOf("MSIE")+5,c.indexOf(";",c.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(c.indexOf("Edge")>=0?(i.Browser.vendor=i.BROWSERS.EDGE,i.Browser.version=parseFloat(c.substring(c.indexOf("Edge")+5))):c.indexOf("Edg")>=0?(i.Browser.vendor=i.BROWSERS.CHROMEEDGE,i.Browser.version=parseFloat(c.substring(c.indexOf("Edg")+4))):c.indexOf("Firefox")>=0?(i.Browser.vendor=i.BROWSERS.FIREFOX,i.Browser.version=parseFloat(c.substring(c.indexOf("Firefox")+8))):c.indexOf("Safari")>=0?(i.Browser.vendor=c.indexOf("Chrome")>=0?i.BROWSERS.CHROME:i.BROWSERS.SAFARI,i.Browser.version=parseFloat(c.substring(c.substring(0,c.indexOf("Safari")).lastIndexOf("/")+1,c.indexOf("Safari")))):(g=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),g.exec(c)!==null&&(i.Browser.vendor=i.BROWSERS.IE,i.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":i.Browser.vendor=i.BROWSERS.OPERA,i.Browser.version=parseFloat(h);break}var v=window.location.search.substring(1),y=v.split("&"),w,_,b;for(b=0;b<y.length;b++)if(w=y[b],_=w.indexOf("="),_>0){var C=w.substring(0,_),A=w.substring(_+1);try{u[C]=decodeURIComponent(A)}catch{i.console.error("Ignoring malformed URL parameter: %s=%s",C,A)}}i.Browser.alpha=!(i.Browser.vendor===i.BROWSERS.CHROME&&i.Browser.version<2),i.Browser.opacity=!0,i.Browser.vendor===i.BROWSERS.IE&&i.console.error("Internet Explorer is not supported by OpenSeadragon")})(),function(h){var c=h.requestAnimationFrame||h.mozRequestAnimationFrame||h.webkitRequestAnimationFrame||h.msRequestAnimationFrame,g=h.cancelAnimationFrame||h.mozCancelAnimationFrame||h.webkitCancelAnimationFrame||h.msCancelAnimationFrame;if(c&&g)i.requestAnimationFrame=function(){return c.apply(h,arguments)},i.cancelAnimationFrame=function(){return g.apply(h,arguments)};else{var v=[],y=[],w=0,_;i.requestAnimationFrame=function(b){return v.push([++w,b]),_||(_=setInterval(function(){if(v.length){var C=i.now(),A=y;for(y=v,v=A;y.length;)y.shift()[1](C)}else clearInterval(_),_=void 0},1e3/50)),w},i.cancelAnimationFrame=function(b){var C,A;for(C=0,A=v.length;C<A;C+=1)if(v[C][0]===b){v.splice(C,1);return}for(C=0,A=y.length;C<A;C+=1)if(y[C][0]===b){y.splice(C,1);return}}}}(window);function d(h,c){return c&&h!==document.body?document.body:h.offsetParent}}(p),function(i,a){o.exports?o.exports=a():i.OpenSeadragon=a()}(GT,function(){return p}),function(i){class a{constructor(l){l||(l=[0,0,0,0,0,0,0,0,0]),this.values=l}static makeIdentity(){return new a([1,0,0,0,1,0,0,0,1])}static makeTranslation(l,u){return new a([1,0,0,0,1,0,l,u,1])}static makeRotation(l){var u=Math.cos(l),d=Math.sin(l);return new a([u,-d,0,d,u,0,0,0,1])}static makeScaling(l,u){return new a([l,0,0,0,u,0,0,0,1])}multiply(l){let u=this.values,d=l.values;var h=u[0*3+0],c=u[0*3+1],g=u[0*3+2],v=u[1*3+0],y=u[1*3+1],w=u[1*3+2],_=u[2*3+0],b=u[2*3+1],C=u[2*3+2],A=d[0*3+0],z=d[0*3+1],H=d[0*3+2],ae=d[1*3+0],Q=d[1*3+1],U=d[1*3+2],pe=d[2*3+0],ye=d[2*3+1],ge=d[2*3+2];return new a([A*h+z*v+H*_,A*c+z*y+H*b,A*g+z*w+H*C,ae*h+Q*v+U*_,ae*c+Q*y+U*b,ae*g+Q*w+U*C,pe*h+ye*v+ge*_,pe*c+ye*y+ge*b,pe*g+ye*w+ge*C])}}i.Mat3=a}(p),function(i){var a={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.fullscreenElement},a.requestFullScreen=function(s){return s.requestFullscreen().catch(function(l){i.console.error("Fullscreen request failed: ",l)})},a.exitFullScreen=function(){document.exitFullscreen().catch(function(s){i.console.error("Error while exiting fullscreen: ",s)})},a.fullScreenEventName="fullscreenchange",a.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.msFullscreenElement},a.requestFullScreen=function(s){return s.msRequestFullscreen()},a.exitFullScreen=function(){document.msExitFullscreen()},a.fullScreenEventName="MSFullscreenChange",a.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.webkitFullscreenElement},a.requestFullScreen=function(s){return s.webkitRequestFullscreen()},a.exitFullScreen=function(){document.webkitExitFullscreen()},a.fullScreenEventName="webkitfullscreenchange",a.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},a.requestFullScreen=function(s){return s.webkitRequestFullScreen()},a.exitFullScreen=function(){document.webkitCancelFullScreen()},a.fullScreenEventName="webkitfullscreenchange",a.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(a.supportsFullScreen=!0,a.getFullScreenElement=function(){return document.mozFullScreenElement},a.requestFullScreen=function(s){return s.mozRequestFullScreen()},a.exitFullScreen=function(){document.mozCancelFullScreen()},a.fullScreenEventName="mozfullscreenchange",a.fullScreenErrorEventName="mozfullscreenerror"),a.isFullScreen=function(){return a.getFullScreenElement()!==null},a.cancelFullScreen=function(){i.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),a.exitFullScreen()},i.extend(i,a)}(p),function(i){i.EventSource=function(){this.events={},this._rejectedEventList={}},i.EventSource.prototype={addOnceHandler:function(a,s,l,u,d){var h=this;u=u||1;var c=0,g=function(v){return c++,c===u&&h.removeHandler(a,g),s(v)};return this.addHandler(a,g,l,d)},addHandler:function(a,s,l,u){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,a))return i.console.error(`Error adding handler for ${a}. ${this._rejectedEventList[a]}`),!1;var d=this.events[a];if(d||(this.events[a]=d=[]),s&&i.isFunction(s)){var h=d.length,c={handler:s,userData:l||null,priority:u||0};for(d[h]=c;h>0&&d[h-1].priority<d[h].priority;)d[h]=d[h-1],d[h-1]=c,h--}return!0},removeHandler:function(a,s){var l=this.events[a],u=[],d;if(l&&i.isArray(l)){for(d=0;d<l.length;d++)l[d].handler!==s&&u.push(l[d]);this.events[a]=u}},numberOfHandlers:function(a){var s=this.events[a];return s?s.length:0},removeAllHandlers:function(a){if(a)this.events[a]=[];else for(var s in this.events)this.events[s]=[]},getHandler:function(a){var s=this.events[a];return!s||!s.length?null:(s=s.length===1?[s[0]]:Array.apply(null,s),function(l,u){var d,h=s.length;for(d=0;d<h;d++)s[d]&&(u.eventSource=l,u.userData=s[d].userData,s[d].handler(u))})},raiseEvent:function(a,s){if(Object.prototype.hasOwnProperty.call(this._rejectedEventList,a))return i.console.error(`Error adding handler for ${a}. ${this._rejectedEventList[a]}`),!1;var l=this.getHandler(a);return l&&l(this,s||{}),!0},rejectEventHandler(a,s=""){this._rejectedEventList[a]=s},allowEventHandler(a){delete this._rejectedEventList[a]}}}(p),function(i){var a={};i.MouseTracker=function(S){var x=arguments;i.isPlainObject(S)||(S={element:x[0],clickTimeThreshold:x[1],clickDistThreshold:x[2]}),this.hash=Math.random(),this.element=i.getElement(S.element),this.clickTimeThreshold=S.clickTimeThreshold||i.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=S.clickDistThreshold||i.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=S.dblClickTimeThreshold||i.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=S.dblClickDistThreshold||i.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=S.userData||null,this.stopDelay=S.stopDelay||50,this.preProcessEventHandler=S.preProcessEventHandler||null,this.contextMenuHandler=S.contextMenuHandler||null,this.enterHandler=S.enterHandler||null,this.leaveHandler=S.leaveHandler||null,this.exitHandler=S.exitHandler||null,this.overHandler=S.overHandler||null,this.outHandler=S.outHandler||null,this.pressHandler=S.pressHandler||null,this.nonPrimaryPressHandler=S.nonPrimaryPressHandler||null,this.releaseHandler=S.releaseHandler||null,this.nonPrimaryReleaseHandler=S.nonPrimaryReleaseHandler||null,this.moveHandler=S.moveHandler||null,this.scrollHandler=S.scrollHandler||null,this.clickHandler=S.clickHandler||null,this.dblClickHandler=S.dblClickHandler||null,this.dragHandler=S.dragHandler||null,this.dragEndHandler=S.dragEndHandler||null,this.pinchHandler=S.pinchHandler||null,this.stopHandler=S.stopHandler||null,this.keyDownHandler=S.keyDownHandler||null,this.keyUpHandler=S.keyUpHandler||null,this.keyHandler=S.keyHandler||null,this.focusHandler=S.focusHandler||null,this.blurHandler=S.blurHandler||null;var D=this;a[this.hash]={click:function(M){H(D,M)},dblclick:function(M){ae(D,M)},keydown:function(M){Q(D,M)},keyup:function(M){U(D,M)},keypress:function(M){pe(D,M)},focus:function(M){ye(D,M)},blur:function(M){ge(D,M)},contextmenu:function(M){Ge(D,M)},wheel:function(M){ce(D,M)},mousewheel:function(M){ue(D,M)},DOMMouseScroll:function(M){ue(D,M)},MozMousePixelScroll:function(M){ue(D,M)},losecapture:function(M){Pe(D,M)},mouseenter:function(M){J(D,M)},mouseleave:function(M){Ee(D,M)},mouseover:function(M){Ve(D,M)},mouseout:function(M){Ce(D,M)},mousedown:function(M){Et(D,M)},mouseup:function(M){lt(D,M)},mousemove:function(M){jt(D,M)},touchstart:function(M){ze(D,M)},touchend:function(M){k(D,M)},touchmove:function(M){oe(D,M)},touchcancel:function(M){me(D,M)},gesturestart:function(M){Le(D,M)},gesturechange:function(M){L(D,M)},gotpointercapture:function(M){ee(D,M)},lostpointercapture:function(M){ve(D,M)},pointerenter:function(M){J(D,M)},pointerleave:function(M){Ee(D,M)},pointerover:function(M){Ve(D,M)},pointerout:function(M){Ce(D,M)},pointerdown:function(M){Et(D,M)},pointerup:function(M){lt(D,M)},pointermove:function(M){jt(D,M)},pointercancel:function(M){qt(D,M)},pointerupcaptured:function(M){Yt(D,M)},pointermovecaptured:function(M){Ai(D,M)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,i.MouseTracker.havePointerEvents&&i.setElementPointerEvents(this.element,"auto"),this.exitHandler&&i.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),S.startDisabled||this.setTracking(!0)},i.MouseTracker.prototype={destroy:function(){h(this),this.element=null,a[this.hash]=null,delete a[this.hash]},isTracking:function(){return a[this.hash].tracking},setTracking:function(S){return S?d(this):h(this),this},getActivePointersListByType:function(S){var x=a[this.hash],D,M=x?x.activePointersLists.length:0,K;for(D=0;D<M;D++)if(x.activePointersLists[D].type===S)return x.activePointersLists[D];return K=new i.MouseTracker.GesturePointList(S),x&&x.activePointersLists.push(K),K},getActivePointerCount:function(){var S=a[this.hash],x,D=S.activePointersLists.length,M=0;for(x=0;x<D;x++)M+=S.activePointersLists[x].getLength();return M},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var s=function(){try{return window.self!==window.top}catch{return!0}}();function l(S){try{return S.addEventListener&&S.removeEventListener}catch{return!1}}i.MouseTracker.gesturePointVelocityTracker=function(){var S=[],x=0,D=0,M=function(Qe,be){return Qe.hash.toString()+be.type+be.id.toString()},K=function(){var Qe,be=S.length,Pt,pt,xi=i.now(),ki,Pi,Hn;for(ki=xi-D,D=xi,Qe=0;Qe<be;Qe++)Pt=S[Qe],pt=Pt.gPoint,pt.direction=Math.atan2(pt.currentPos.y-Pt.lastPos.y,pt.currentPos.x-Pt.lastPos.x),Pi=Pt.lastPos.distanceTo(pt.currentPos),Pt.lastPos=pt.currentPos,Hn=1e3*Pi/(ki+1),pt.speed=.75*Hn+.25*pt.speed},se=function(Qe,be){var Pt=M(Qe,be);S.push({guid:Pt,gPoint:be,lastPos:be.currentPos}),S.length===1&&(D=i.now(),x=window.setInterval(K,50))},_e=function(Qe,be){var Pt=M(Qe,be),pt,xi=S.length;for(pt=0;pt<xi;pt++)if(S[pt].guid===Pt){S.splice(pt,1),xi--,xi===0&&window.clearInterval(x);break}};return{addPoint:se,removePoint:_e}}(),i.MouseTracker.captureElement=document,i.MouseTracker.wheelEventName="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",i.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",i.MouseTracker.wheelEventName],i.MouseTracker.wheelEventName==="DOMMouseScroll"&&i.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(i.MouseTracker.havePointerEvents=!0,i.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),i.MouseTracker.havePointerCapture=function(){var S=document.createElement("div");return i.isFunction(S.setPointerCapture)&&i.isFunction(S.releasePointerCapture)}(),i.MouseTracker.havePointerCapture&&i.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(i.MouseTracker.havePointerEvents=!1,i.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),i.MouseTracker.mousePointerId="legacy-mouse",i.MouseTracker.havePointerCapture=function(){var S=document.createElement("div");return i.isFunction(S.setCapture)&&i.isFunction(S.releaseCapture)}(),i.MouseTracker.havePointerCapture&&i.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&i.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&i.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),i.MouseTracker.GesturePointList=function(S){this._gPoints=[],this.type=S,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},i.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(S){return this._gPoints.push(S)},removeById:function(S){var x,D=this._gPoints.length;for(x=0;x<D;x++)if(this._gPoints[x].id===S){this._gPoints.splice(x,1);break}return this._gPoints.length},getByIndex:function(S){return S<this._gPoints.length?this._gPoints[S]:null},getById:function(S){var x,D=this._gPoints.length;for(x=0;x<D;x++)if(this._gPoints[x].id===S)return this._gPoints[x];return null},getPrimary:function(S){var x,D=this._gPoints.length;for(x=0;x<D;x++)if(this._gPoints[x].isPrimary)return this._gPoints[x];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(i.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function u(S){var x=a[S.hash],D,M,K,se,_e,Qe=x.activePointersLists.length;for(D=0;D<Qe;D++)if(K=x.activePointersLists[D],K.getLength()>0){for(_e=[],se=K.asArray(),M=0;M<se.length;M++)_e.push(se[M]);for(M=0;M<_e.length;M++)Mi(S,K,_e[M])}for(D=0;D<Qe;D++)x.activePointersLists.pop();x.sentDragEvent=!1}function d(S){var x=a[S.hash],D,M;if(!x.tracking){for(M=0;M<i.MouseTracker.subscribeEvents.length;M++)D=i.MouseTracker.subscribeEvents[M],i.addEvent(S.element,D,x[D],D===i.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);u(S),x.tracking=!0}}function h(S){var x=a[S.hash],D,M;if(x.tracking){for(M=0;M<i.MouseTracker.subscribeEvents.length;M++)D=i.MouseTracker.subscribeEvents[M],i.removeEvent(S.element,D,x[D],!1);u(S),x.tracking=!1}}function c(S,x){var D=a[S.hash];if(x==="pointerevent")return{upName:"pointerup",upHandler:D.pointerupcaptured,moveName:"pointermove",moveHandler:D.pointermovecaptured};if(x==="mouse")return{upName:"pointerup",upHandler:D.pointerupcaptured,moveName:"pointermove",moveHandler:D.pointermovecaptured};if(x==="touch")return{upName:"touchend",upHandler:D.touchendcaptured,moveName:"touchmove",moveHandler:D.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function g(S,x){var D;if(i.MouseTracker.havePointerCapture)if(i.MouseTracker.havePointerEvents)try{S.element.setPointerCapture(x.id)}catch{i.console.warn("setPointerCapture() called on invalid pointer ID");return}else S.element.setCapture(!0);else D=c(S,i.MouseTracker.havePointerEvents?"pointerevent":x.type),s&&l(window.top)&&i.addEvent(window.top,D.upName,D.upHandler,!0),i.addEvent(i.MouseTracker.captureElement,D.upName,D.upHandler,!0),i.addEvent(i.MouseTracker.captureElement,D.moveName,D.moveHandler,!0);I(S,x,!0)}function v(S,x){var D,M,K;if(i.MouseTracker.havePointerCapture)if(i.MouseTracker.havePointerEvents){if(M=S.getActivePointersListByType(x.type),K=M.getById(x.id),!K||!K.captured)return;try{S.element.releasePointerCapture(x.id)}catch{}}else S.element.releaseCapture();else D=c(S,i.MouseTracker.havePointerEvents?"pointerevent":x.type),s&&l(window.top)&&i.removeEvent(window.top,D.upName,D.upHandler,!0),i.removeEvent(i.MouseTracker.captureElement,D.moveName,D.moveHandler,!0),i.removeEvent(i.MouseTracker.captureElement,D.upName,D.upHandler,!0);I(S,x,!1)}function y(S){return i.MouseTracker.havePointerEvents?S.pointerId:i.MouseTracker.mousePointerId}function w(S){return i.MouseTracker.havePointerEvents&&S.pointerType?S.pointerType:"mouse"}function _(S){return i.MouseTracker.havePointerEvents?S.isPrimary:!0}function b(S){return i.getMousePosition(S)}function C(S,x){return A(b(S),x)}function A(S,x){var D=i.getElementOffset(x);return S.minus(D)}function z(S,x){return new i.Point((S.x+x.x)/2,(S.y+x.y)/2)}function H(S,x){var D={originalEvent:x,eventType:"click",pointerType:"mouse",isEmulated:!1};O(S,D),D.preventDefault&&!D.defaultPrevented&&i.cancelEvent(x),D.stopPropagation&&i.stopEvent(x)}function ae(S,x){var D={originalEvent:x,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};O(S,D),D.preventDefault&&!D.defaultPrevented&&i.cancelEvent(x),D.stopPropagation&&i.stopEvent(x)}function Q(S,x){var D=null,M={originalEvent:x,eventType:"keydown",pointerType:"",isEmulated:!1};O(S,M),S.keyDownHandler&&!M.preventGesture&&!M.defaultPrevented&&(D={eventSource:S,keyCode:x.keyCode?x.keyCode:x.charCode,ctrl:x.ctrlKey,shift:x.shiftKey,alt:x.altKey,meta:x.metaKey,originalEvent:x,preventDefault:M.preventDefault||M.defaultPrevented,userData:S.userData},S.keyDownHandler(D)),(D&&D.preventDefault||M.preventDefault&&!M.defaultPrevented)&&i.cancelEvent(x),M.stopPropagation&&i.stopEvent(x)}function U(S,x){var D=null,M={originalEvent:x,eventType:"keyup",pointerType:"",isEmulated:!1};O(S,M),S.keyUpHandler&&!M.preventGesture&&!M.defaultPrevented&&(D={eventSource:S,keyCode:x.keyCode?x.keyCode:x.charCode,ctrl:x.ctrlKey,shift:x.shiftKey,alt:x.altKey,meta:x.metaKey,originalEvent:x,preventDefault:M.preventDefault||M.defaultPrevented,userData:S.userData},S.keyUpHandler(D)),(D&&D.preventDefault||M.preventDefault&&!M.defaultPrevented)&&i.cancelEvent(x),M.stopPropagation&&i.stopEvent(x)}function pe(S,x){var D=null,M={originalEvent:x,eventType:"keypress",pointerType:"",isEmulated:!1};O(S,M),S.keyHandler&&!M.preventGesture&&!M.defaultPrevented&&(D={eventSource:S,keyCode:x.keyCode?x.keyCode:x.charCode,ctrl:x.ctrlKey,shift:x.shiftKey,alt:x.altKey,meta:x.metaKey,originalEvent:x,preventDefault:M.preventDefault||M.defaultPrevented,userData:S.userData},S.keyHandler(D)),(D&&D.preventDefault||M.preventDefault&&!M.defaultPrevented)&&i.cancelEvent(x),M.stopPropagation&&i.stopEvent(x)}function ye(S,x){var D={originalEvent:x,eventType:"focus",pointerType:"",isEmulated:!1};O(S,D),S.focusHandler&&!D.preventGesture&&S.focusHandler({eventSource:S,originalEvent:x,userData:S.userData})}function ge(S,x){var D={originalEvent:x,eventType:"blur",pointerType:"",isEmulated:!1};O(S,D),S.blurHandler&&!D.preventGesture&&S.blurHandler({eventSource:S,originalEvent:x,userData:S.userData})}function Ge(S,x){var D=null,M={originalEvent:x,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};O(S,M),S.contextMenuHandler&&!M.preventGesture&&!M.defaultPrevented&&(D={eventSource:S,position:A(b(x),S.element),originalEvent:M.originalEvent,preventDefault:M.preventDefault||M.defaultPrevented,userData:S.userData},S.contextMenuHandler(D)),(D&&D.preventDefault||M.preventDefault&&!M.defaultPrevented)&&i.cancelEvent(x),M.stopPropagation&&i.stopEvent(x)}function ce(S,x){de(S,x,x)}function ue(S,x){var D={target:x.target||x.srcElement,type:"wheel",shiftKey:x.shiftKey||!1,clientX:x.clientX,clientY:x.clientY,pageX:x.pageX?x.pageX:x.clientX,pageY:x.pageY?x.pageY:x.clientY,deltaMode:x.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};i.MouseTracker.wheelEventName==="mousewheel"?D.deltaY=-x.wheelDelta/i.DEFAULT_SETTINGS.pixelsPerWheelLine:D.deltaY=x.detail,de(S,D,x)}function de(S,x,D){var M=0,K,se=null;M=x.deltaY?x.deltaY<0?1:-1:0,K={originalEvent:x,eventType:"wheel",pointerType:"mouse",isEmulated:x!==D},O(S,K),S.scrollHandler&&!K.preventGesture&&!K.defaultPrevented&&(se={eventSource:S,pointerType:"mouse",position:C(x,S.element),scroll:M,shift:x.shiftKey,isTouchEvent:!1,originalEvent:D,preventDefault:K.preventDefault||K.defaultPrevented,userData:S.userData},S.scrollHandler(se)),K.stopPropagation&&i.stopEvent(D),(se&&se.preventDefault||K.preventDefault&&!K.defaultPrevented)&&i.cancelEvent(D)}function Pe(S,x){var D={id:i.MouseTracker.mousePointerId,type:"mouse"},M={originalEvent:x,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};O(S,M),x.target===S.element&&I(S,D,!1),M.stopPropagation&&i.stopEvent(x)}function ze(S,x){var D,M,K=x.changedTouches.length,se,_e=S.getActivePointersListByType("touch");D=i.now(),_e.getLength()>x.touches.length-K&&i.console.warn("Tracked touch contact count doesn't match event.touches.length");var Qe={originalEvent:x,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(O(S,Qe),M=0;M<K;M++)se={id:x.changedTouches[M].identifier,type:"touch",isPrimary:_e.getLength()===0,currentPos:b(x.changedTouches[M]),currentTime:D},le(S,Qe,se),Ue(S,Qe,se,0),I(S,se,!0);Qe.preventDefault&&!Qe.defaultPrevented&&i.cancelEvent(x),Qe.stopPropagation&&i.stopEvent(x)}function k(S,x){var D,M,K=x.changedTouches.length,se;D=i.now();var _e={originalEvent:x,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(O(S,_e),M=0;M<K;M++)se={id:x.changedTouches[M].identifier,type:"touch",currentPos:b(x.changedTouches[M]),currentTime:D},$e(S,_e,se,0),I(S,se,!1),fe(S,_e,se);_e.preventDefault&&!_e.defaultPrevented&&i.cancelEvent(x),_e.stopPropagation&&i.stopEvent(x)}function oe(S,x){var D,M,K=x.changedTouches.length,se;D=i.now();var _e={originalEvent:x,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(O(S,_e),M=0;M<K;M++)se={id:x.changedTouches[M].identifier,type:"touch",currentPos:b(x.changedTouches[M]),currentTime:D},Ie(S,_e,se);_e.preventDefault&&!_e.defaultPrevented&&i.cancelEvent(x),_e.stopPropagation&&i.stopEvent(x)}function me(S,x){var D=x.changedTouches.length,M,K,se={originalEvent:x,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(O(S,se),M=0;M<D;M++)K={id:x.changedTouches[M].identifier,type:"touch"},Te(S,se,K);se.stopPropagation&&i.stopEvent(x)}function Le(S,x){return i.eventIsCanceled(x)||x.preventDefault(),!1}function L(S,x){return i.eventIsCanceled(x)||x.preventDefault(),!1}function ee(S,x){var D={originalEvent:x,eventType:"gotpointercapture",pointerType:w(x),isEmulated:!1};O(S,D),x.target===S.element&&I(S,{id:x.pointerId,type:w(x)},!0),D.stopPropagation&&i.stopEvent(x)}function ve(S,x){var D={originalEvent:x,eventType:"lostpointercapture",pointerType:w(x),isEmulated:!1};O(S,D),x.target===S.element&&I(S,{id:x.pointerId,type:w(x)},!1),D.stopPropagation&&i.stopEvent(x)}function J(S,x){var D={id:y(x),type:w(x),isPrimary:_(x),currentPos:b(x),currentTime:i.now()},M={originalEvent:x,eventType:"pointerenter",pointerType:D.type,isEmulated:!1};O(S,M),le(S,M,D)}function Ee(S,x){var D={id:y(x),type:w(x),isPrimary:_(x),currentPos:b(x),currentTime:i.now()},M={originalEvent:x,eventType:"pointerleave",pointerType:D.type,isEmulated:!1};O(S,M),fe(S,M,D)}function Ve(S,x){var D={id:y(x),type:w(x),isPrimary:_(x),currentPos:b(x),currentTime:i.now()},M={originalEvent:x,eventType:"pointerover",pointerType:D.type,isEmulated:!1};O(S,M),we(S,M,D),M.preventDefault&&!M.defaultPrevented&&i.cancelEvent(x),M.stopPropagation&&i.stopEvent(x)}function Ce(S,x){var D={id:y(x),type:w(x),isPrimary:_(x),currentPos:b(x),currentTime:i.now()},M={originalEvent:x,eventType:"pointerout",pointerType:D.type,isEmulated:!1};O(S,M),ie(S,M,D),M.preventDefault&&!M.defaultPrevented&&i.cancelEvent(x),M.stopPropagation&&i.stopEvent(x)}function Et(S,x){var D={id:y(x),type:w(x),isPrimary:_(x),currentPos:b(x),currentTime:i.now()},M=i.MouseTracker.havePointerEvents&&D.type==="touch",K={originalEvent:x,eventType:"pointerdown",pointerType:D.type,isEmulated:!1};O(S,K),Ue(S,K,D,x.button),K.preventDefault&&!K.defaultPrevented&&i.cancelEvent(x),K.stopPropagation&&i.stopEvent(x),K.shouldCapture&&(M?I(S,D,!0):g(S,D))}function lt(S,x){vt(S,x)}function Yt(S,x){var D=S.getActivePointersListByType(w(x));D.getById(x.pointerId)&&vt(S,x),i.stopEvent(x)}function vt(S,x){var D;D={id:y(x),type:w(x),isPrimary:_(x),currentPos:b(x),currentTime:i.now()};var M={originalEvent:x,eventType:"pointerup",pointerType:D.type,isEmulated:!1};O(S,M),$e(S,M,D,x.button),M.preventDefault&&!M.defaultPrevented&&i.cancelEvent(x),M.stopPropagation&&i.stopEvent(x),M.shouldReleaseCapture&&(x.target===S.element?v(S,D):I(S,D,!1))}function jt(S,x){Oi(S,x)}function Ai(S,x){var D=S.getActivePointersListByType(w(x));D.getById(x.pointerId)&&Oi(S,x),i.stopEvent(x)}function Oi(S,x){var D={id:y(x),type:w(x),isPrimary:_(x),currentPos:b(x),currentTime:i.now()},M={originalEvent:x,eventType:"pointermove",pointerType:D.type,isEmulated:!1};O(S,M),Ie(S,M,D),M.preventDefault&&!M.defaultPrevented&&i.cancelEvent(x),M.stopPropagation&&i.stopEvent(x)}function qt(S,x){var D={id:x.pointerId,type:w(x)},M={originalEvent:x,eventType:"pointercancel",pointerType:D.type,isEmulated:!1};O(S,M),Te(S,M,D),M.stopPropagation&&i.stopEvent(x)}function Gi(S,x){return x.speed=0,x.direction=0,x.contactPos=x.currentPos,x.contactTime=x.currentTime,x.lastPos=x.currentPos,x.lastTime=x.currentTime,S.add(x)}function Mi(S,x,D){var M,K=x.getById(D.id);return K?(K.captured&&(i.console.warn("stopTrackingPointer() called on captured pointer"),v(S,K)),x.removeContact(),M=x.removeById(D.id)):M=x.getLength(),M}function T(S,x){switch(x.eventType){case"pointermove":x.isStoppable=!0,x.isCancelable=!0,x.preventDefault=!1,x.preventGesture=!S.hasGestureHandlers,x.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":x.isStoppable=!0,x.isCancelable=!0,x.preventDefault=!1,x.preventGesture=!1,x.stopPropagation=!1;break;case"pointerdown":x.isStoppable=!0,x.isCancelable=!0,x.preventDefault=!1,x.preventGesture=!S.hasGestureHandlers,x.stopPropagation=!1;break;case"pointerup":x.isStoppable=!0,x.isCancelable=!0,x.preventDefault=!1,x.preventGesture=!S.hasGestureHandlers,x.stopPropagation=!1;break;case"wheel":x.isStoppable=!0,x.isCancelable=!0,x.preventDefault=!1,x.preventGesture=!S.hasScrollHandler,x.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":x.isStoppable=!0,x.isCancelable=!1,x.preventDefault=!1,x.preventGesture=!1,x.stopPropagation=!1;break;case"click":x.isStoppable=!0,x.isCancelable=!0,x.preventDefault=!!S.clickHandler,x.preventGesture=!1,x.stopPropagation=!1;break;case"dblclick":x.isStoppable=!0,x.isCancelable=!0,x.preventDefault=!!S.dblClickHandler,x.preventGesture=!1,x.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:x.isStoppable=!1,x.isCancelable=!1,x.preventDefault=!1,x.preventGesture=!1,x.stopPropagation=!1;break}}function O(S,x){x.eventSource=S,x.eventPhase=x.originalEvent&&typeof x.originalEvent.eventPhase<"u"?x.originalEvent.eventPhase:0,x.defaultPrevented=i.eventIsCanceled(x.originalEvent),x.shouldCapture=!1,x.shouldReleaseCapture=!1,x.userData=S.userData,T(S,x),S.preProcessEventHandler&&S.preProcessEventHandler(x)}function I(S,x,D){var M=S.getActivePointersListByType(x.type),K=M.getById(x.id);K?D&&!K.captured?(K.captured=!0,M.captureCount++):!D&&K.captured&&(K.captured=!1,M.captureCount--,M.captureCount<0&&(M.captureCount=0,i.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):i.console.warn("updatePointerCaptured() called on untracked pointer")}function le(S,x,D){var M=S.getActivePointersListByType(D.type),K;K=M.getById(D.id),K?(K.insideElement=!0,K.lastPos=K.currentPos,K.lastTime=K.currentTime,K.currentPos=D.currentPos,K.currentTime=D.currentTime,D=K):(D.captured=!1,D.insideElementPressed=!1,D.insideElement=!0,Gi(M,D)),S.enterHandler&&S.enterHandler({eventSource:S,pointerType:D.type,position:A(D.currentPos,S.element),buttons:M.buttons,pointers:S.getActivePointerCount(),insideElementPressed:D.insideElementPressed,buttonDownAny:M.buttons!==0,isTouchEvent:D.type==="touch",originalEvent:x.originalEvent,userData:S.userData})}function fe(S,x,D){var M=S.getActivePointersListByType(D.type),K,se;K=M.getById(D.id),K?(K.captured?(K.insideElement=!1,K.lastPos=K.currentPos,K.lastTime=K.currentTime,K.currentPos=D.currentPos,K.currentTime=D.currentTime):Mi(S,M,K),D=K):(D.captured=!1,D.insideElementPressed=!1),(S.leaveHandler||S.exitHandler)&&(se={eventSource:S,pointerType:D.type,position:D.currentPos&&A(D.currentPos,S.element),buttons:M.buttons,pointers:S.getActivePointerCount(),insideElementPressed:D.insideElementPressed,buttonDownAny:M.buttons!==0,isTouchEvent:D.type==="touch",originalEvent:x.originalEvent,userData:S.userData},S.leaveHandler&&S.leaveHandler(se),S.exitHandler&&S.exitHandler(se))}function we(S,x,D){var M,K;M=S.getActivePointersListByType(D.type),K=M.getById(D.id),K?D=K:(D.captured=!1,D.insideElementPressed=!1),S.overHandler&&S.overHandler({eventSource:S,pointerType:D.type,position:A(D.currentPos,S.element),buttons:M.buttons,pointers:S.getActivePointerCount(),insideElementPressed:D.insideElementPressed,buttonDownAny:M.buttons!==0,isTouchEvent:D.type==="touch",originalEvent:x.originalEvent,userData:S.userData})}function ie(S,x,D){var M,K;M=S.getActivePointersListByType(D.type),K=M.getById(D.id),K?D=K:(D.captured=!1,D.insideElementPressed=!1),S.outHandler&&S.outHandler({eventSource:S,pointerType:D.type,position:D.currentPos&&A(D.currentPos,S.element),buttons:M.buttons,pointers:S.getActivePointerCount(),insideElementPressed:D.insideElementPressed,buttonDownAny:M.buttons!==0,isTouchEvent:D.type==="touch",originalEvent:x.originalEvent,userData:S.userData})}function Ue(S,x,D,M){var K=a[S.hash],se=S.getActivePointersListByType(D.type),_e;if(typeof x.originalEvent.buttons<"u"?se.buttons=x.originalEvent.buttons:M===0?se.buttons|=1:M===1?se.buttons|=4:M===2?se.buttons|=2:M===3?se.buttons|=8:M===4?se.buttons|=16:M===5&&(se.buttons|=32),M!==0){x.shouldCapture=!1,x.shouldReleaseCapture=!1,S.nonPrimaryPressHandler&&!x.preventGesture&&!x.defaultPrevented&&(x.preventDefault=!0,S.nonPrimaryPressHandler({eventSource:S,pointerType:D.type,position:A(D.currentPos,S.element),button:M,buttons:se.buttons,isTouchEvent:D.type==="touch",originalEvent:x.originalEvent,userData:S.userData}));return}_e=se.getById(D.id),_e?(_e.insideElementPressed=!0,_e.insideElement=!0,_e.originalTarget=x.originalEvent.target,_e.contactPos=D.currentPos,_e.contactTime=D.currentTime,_e.lastPos=_e.currentPos,_e.lastTime=_e.currentTime,_e.currentPos=D.currentPos,_e.currentTime=D.currentTime,D=_e):(D.captured=!1,D.insideElementPressed=!0,D.insideElement=!0,D.originalTarget=x.originalEvent.target,Gi(se,D)),se.addContact(),!x.preventGesture&&!x.defaultPrevented?(x.shouldCapture=!0,x.shouldReleaseCapture=!1,x.preventDefault=!0,(S.dragHandler||S.dragEndHandler||S.pinchHandler)&&i.MouseTracker.gesturePointVelocityTracker.addPoint(S,D),se.contacts===1?S.pressHandler&&!x.preventGesture&&S.pressHandler({eventSource:S,pointerType:D.type,position:A(D.contactPos,S.element),buttons:se.buttons,isTouchEvent:D.type==="touch",originalEvent:x.originalEvent,userData:S.userData}):se.contacts===2&&S.pinchHandler&&D.type==="touch"&&(K.pinchGPoints=se.asArray(),K.lastPinchDist=K.currentPinchDist=K.pinchGPoints[0].currentPos.distanceTo(K.pinchGPoints[1].currentPos),K.lastPinchCenter=K.currentPinchCenter=z(K.pinchGPoints[0].currentPos,K.pinchGPoints[1].currentPos))):(x.shouldCapture=!1,x.shouldReleaseCapture=!1)}function $e(S,x,D,M){var K=a[S.hash],se=S.getActivePointersListByType(D.type),_e,Qe,be,Pt=!1,pt;if(typeof x.originalEvent.buttons<"u"?se.buttons=x.originalEvent.buttons:M===0?se.buttons^=-2:M===1?se.buttons^=-5:M===2?se.buttons^=-3:M===3?se.buttons^=-9:M===4?se.buttons^=-17:M===5&&(se.buttons^=-33),x.shouldCapture=!1,M!==0){x.shouldReleaseCapture=!1,S.nonPrimaryReleaseHandler&&!x.preventGesture&&!x.defaultPrevented&&(x.preventDefault=!0,S.nonPrimaryReleaseHandler({eventSource:S,pointerType:D.type,position:A(D.currentPos,S.element),button:M,buttons:se.buttons,isTouchEvent:D.type==="touch",originalEvent:x.originalEvent,userData:S.userData}));return}be=se.getById(D.id),be?(se.removeContact(),be.captured&&(Pt=!0),be.lastPos=be.currentPos,be.lastTime=be.currentTime,be.currentPos=D.currentPos,be.currentTime=D.currentTime,be.insideElement||Mi(S,se,be),_e=be.currentPos,Qe=be.currentTime):(D.captured=!1,D.insideElementPressed=!1,D.insideElement=!0,Gi(se,D),be=D),!x.preventGesture&&!x.defaultPrevented&&(Pt?(x.shouldReleaseCapture=!0,x.preventDefault=!0,(S.dragHandler||S.dragEndHandler||S.pinchHandler)&&i.MouseTracker.gesturePointVelocityTracker.removePoint(S,be),se.contacts===0?(S.releaseHandler&&_e&&S.releaseHandler({eventSource:S,pointerType:be.type,position:A(_e,S.element),buttons:se.buttons,insideElementPressed:be.insideElementPressed,insideElementReleased:be.insideElement,isTouchEvent:be.type==="touch",originalEvent:x.originalEvent,userData:S.userData}),S.dragEndHandler&&K.sentDragEvent&&S.dragEndHandler({eventSource:S,pointerType:be.type,position:A(be.currentPos,S.element),speed:be.speed,direction:be.direction,shift:x.originalEvent.shiftKey,isTouchEvent:be.type==="touch",originalEvent:x.originalEvent,userData:S.userData}),K.sentDragEvent=!1,(S.clickHandler||S.dblClickHandler)&&be.insideElement&&(pt=Qe-be.contactTime<=S.clickTimeThreshold&&be.contactPos.distanceTo(_e)<=S.clickDistThreshold,S.clickHandler&&S.clickHandler({eventSource:S,pointerType:be.type,position:A(be.currentPos,S.element),quick:pt,shift:x.originalEvent.shiftKey,isTouchEvent:be.type==="touch",originalEvent:x.originalEvent,originalTarget:be.originalTarget,userData:S.userData}),S.dblClickHandler&&pt&&(se.clicks++,se.clicks===1?(K.lastClickPos=_e,K.dblClickTimeOut=setTimeout(function(){se.clicks=0},S.dblClickTimeThreshold)):se.clicks===2&&(clearTimeout(K.dblClickTimeOut),se.clicks=0,K.lastClickPos.distanceTo(_e)<=S.dblClickDistThreshold&&S.dblClickHandler({eventSource:S,pointerType:be.type,position:A(be.currentPos,S.element),shift:x.originalEvent.shiftKey,isTouchEvent:be.type==="touch",originalEvent:x.originalEvent,userData:S.userData}),K.lastClickPos=null)))):se.contacts===2&&S.pinchHandler&&be.type==="touch"&&(K.pinchGPoints=se.asArray(),K.lastPinchDist=K.currentPinchDist=K.pinchGPoints[0].currentPos.distanceTo(K.pinchGPoints[1].currentPos),K.lastPinchCenter=K.currentPinchCenter=z(K.pinchGPoints[0].currentPos,K.pinchGPoints[1].currentPos))):(x.shouldReleaseCapture=!1,S.releaseHandler&&_e&&(S.releaseHandler({eventSource:S,pointerType:be.type,position:A(_e,S.element),buttons:se.buttons,insideElementPressed:be.insideElementPressed,insideElementReleased:be.insideElement,isTouchEvent:be.type==="touch",originalEvent:x.originalEvent,userData:S.userData}),x.preventDefault=!0)))}function Ie(S,x,D){var M=a[S.hash],K=S.getActivePointersListByType(D.type),se,_e,Qe;if(typeof x.originalEvent.buttons<"u"&&(K.buttons=x.originalEvent.buttons),se=K.getById(D.id),se)se.lastPos=se.currentPos,se.lastTime=se.currentTime,se.currentPos=D.currentPos,se.currentTime=D.currentTime;else return;x.shouldCapture=!1,x.shouldReleaseCapture=!1,S.stopHandler&&D.type==="mouse"&&(clearTimeout(S.stopTimeOut),S.stopTimeOut=setTimeout(function(){it(S,x.originalEvent,D.type)},S.stopDelay)),K.contacts===0?S.moveHandler&&S.moveHandler({eventSource:S,pointerType:D.type,position:A(D.currentPos,S.element),buttons:K.buttons,isTouchEvent:D.type==="touch",originalEvent:x.originalEvent,userData:S.userData}):K.contacts===1?(S.moveHandler&&(se=K.asArray()[0],S.moveHandler({eventSource:S,pointerType:se.type,position:A(se.currentPos,S.element),buttons:K.buttons,isTouchEvent:se.type==="touch",originalEvent:x.originalEvent,userData:S.userData})),S.dragHandler&&!x.preventGesture&&!x.defaultPrevented&&(se=K.asArray()[0],Qe=se.currentPos.minus(se.lastPos),S.dragHandler({eventSource:S,pointerType:se.type,position:A(se.currentPos,S.element),buttons:K.buttons,delta:Qe,speed:se.speed,direction:se.direction,shift:x.originalEvent.shiftKey,isTouchEvent:se.type==="touch",originalEvent:x.originalEvent,userData:S.userData}),x.preventDefault=!0,M.sentDragEvent=!0)):K.contacts===2&&(S.moveHandler&&(_e=K.asArray(),S.moveHandler({eventSource:S,pointerType:_e[0].type,position:A(z(_e[0].currentPos,_e[1].currentPos),S.element),buttons:K.buttons,isTouchEvent:_e[0].type==="touch",originalEvent:x.originalEvent,userData:S.userData})),S.pinchHandler&&D.type==="touch"&&!x.preventGesture&&!x.defaultPrevented&&(Qe=M.pinchGPoints[0].currentPos.distanceTo(M.pinchGPoints[1].currentPos),Qe!==M.currentPinchDist&&(M.lastPinchDist=M.currentPinchDist,M.currentPinchDist=Qe,M.lastPinchCenter=M.currentPinchCenter,M.currentPinchCenter=z(M.pinchGPoints[0].currentPos,M.pinchGPoints[1].currentPos),S.pinchHandler({eventSource:S,pointerType:"touch",gesturePoints:M.pinchGPoints,lastCenter:A(M.lastPinchCenter,S.element),center:A(M.currentPinchCenter,S.element),lastDistance:M.lastPinchDist,distance:M.currentPinchDist,shift:x.originalEvent.shiftKey,originalEvent:x.originalEvent,userData:S.userData}),x.preventDefault=!0)))}function Te(S,x,D){var M=S.getActivePointersListByType(D.type),K;K=M.getById(D.id),K&&Mi(S,M,K)}function it(S,x,D){S.stopHandler&&S.stopHandler({eventSource:S,pointerType:D,position:C(x,S.element),buttons:S.getActivePointersListByType(D).buttons,isTouchEvent:D==="touch",originalEvent:x,userData:S.userData})}}(p),function(i){i.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},i.Control=function(a,s,l){var u=a.parentNode;typeof s=="number"&&(i.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),s={anchor:s}),s.attachToViewer=typeof s.attachToViewer>"u"?!0:s.attachToViewer,this.autoFade=typeof s.autoFade>"u"?!0:s.autoFade,this.element=a,this.anchor=s.anchor,this.container=l,this.anchor===i.ControlAnchor.ABSOLUTE?(this.wrapper=i.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof s.top=="number"?s.top+"px":s.top,this.wrapper.style.left=typeof s.left=="number"?s.left+"px":s.left,this.wrapper.style.height=typeof s.height=="number"?s.height+"px":s.height,this.wrapper.style.width=typeof s.width=="number"?s.width+"px":s.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=i.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===i.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),s.attachToViewer?this.anchor===i.ControlAnchor.TOP_RIGHT||this.anchor===i.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):u.appendChild(this.wrapper)},i.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==i.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(a){this.wrapper.style.display=a?this.anchor===i.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(a){i.setElementOpacity(this.wrapper,a,!0)}}}(p),function(i){i.ControlDock=function(s){var l=["topleft","topright","bottomright","bottomleft"],u,d;for(i.extend(!0,this,{id:"controldock-"+i.now()+"-"+Math.floor(Math.random()*1e6),container:i.makeNeutralElement("div"),controls:[]},s),this.container.onsubmit=function(){return!1},this.element&&(this.element=i.getElement(this.element),this.element.appendChild(this.container),i.getElementStyle(this.element).position==="static"&&(this.element.style.position="relative"),this.container.style.width="100%",this.container.style.height="100%"),d=0;d<l.length;d++)u=l[d],this.controls[u]=i.makeNeutralElement("div"),this.controls[u].style.position="absolute",u.match("left")&&(this.controls[u].style.left="0px"),u.match("right")&&(this.controls[u].style.right="0px"),u.match("top")&&(this.controls[u].style.top="0px"),u.match("bottom")&&(this.controls[u].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},i.ControlDock.prototype={addControl:function(s,l){s=i.getElement(s);var u=null;if(!(a(this,s)>=0)){switch(l.anchor){case i.ControlAnchor.TOP_RIGHT:u=this.controls.topright,s.style.position="relative",s.style.paddingRight="0px",s.style.paddingTop="0px";break;case i.ControlAnchor.BOTTOM_RIGHT:u=this.controls.bottomright,s.style.position="relative",s.style.paddingRight="0px",s.style.paddingBottom="0px";break;case i.ControlAnchor.BOTTOM_LEFT:u=this.controls.bottomleft,s.style.position="relative",s.style.paddingLeft="0px",s.style.paddingBottom="0px";break;case i.ControlAnchor.TOP_LEFT:u=this.controls.topleft,s.style.position="relative",s.style.paddingLeft="0px",s.style.paddingTop="0px";break;case i.ControlAnchor.ABSOLUTE:u=this.container,s.style.margin="0px",s.style.padding="0px";break;default:case i.ControlAnchor.NONE:u=this.container,s.style.margin="0px",s.style.padding="0px";break}this.controls.push(new i.Control(s,l,u)),s.style.display="inline-block"}},removeControl:function(s){s=i.getElement(s);var l=a(this,s);return l>=0&&(this.controls[l].destroy(),this.controls.splice(l,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var s;for(s=this.controls.length-1;s>=0;s--)if(this.controls[s].isVisible())return!0;return!1},setControlsEnabled:function(s){var l;for(l=this.controls.length-1;l>=0;l--)this.controls[l].setVisible(s);return this}};function a(s,l){var u=s.controls,d;for(d=u.length-1;d>=0;d--)if(u[d].element===l)return d;return-1}}(p),function(i){i.Placement=i.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(p),function(i){var a={},s=1;i.Viewer=function(T){var O=arguments,I=this,le;i.isPlainObject(T)||(T={id:O[0],xmlPath:O.length>1?O[1]:void 0,prefixUrl:O.length>2?O[2]:void 0,controls:O.length>3?O[3]:void 0,overlays:O.length>4?O[4]:void 0}),T.config&&(i.extend(!0,T,T.config),delete T.config);let fe=["useCanvas"];if(T.drawerOptions=Object.assign({},fe.reduce((ie,Ue)=>(ie[Ue]=T[Ue],delete T[Ue],ie),{}),T.drawerOptions),i.extend(!0,this,{id:T.id,hash:T.hash||s++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},i.DEFAULT_SETTINGS,T),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");typeof a[this.hash]<"u"&&i.console.warn("Hash "+this.hash+" has already been used."),a[this.hash]={fsBoundsDelta:new i.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=i.now(),i.EventSource.call(this),this.addHandler("open-failed",function(ie){var Ue=i.getString("Errors.OpenFailed",ie.eventSource,ie.message);I._showMessage(Ue)}),i.ControlDock.call(this,T),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=i.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(ie){ie.width="100%",ie.height="100%",ie.overflow="hidden",ie.position="absolute",ie.top="0px",ie.left="0px"}(this.canvas.style),i.setElementTouchActionNone(this.canvas),T.tabIndex!==""&&(this.canvas.tabIndex=T.tabIndex===void 0?0:T.tabIndex),this.container.className="openseadragon-container",function(ie){ie.width="100%",ie.height="100%",ie.position="relative",ie.overflow="hidden",ie.left="0px",ie.top="0px",ie.textAlign="left"}(this.container.style),i.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new i.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:i.delegate(this,C),keyDownHandler:i.delegate(this,A),keyHandler:i.delegate(this,z),clickHandler:i.delegate(this,H),dblClickHandler:i.delegate(this,ae),dragHandler:i.delegate(this,Q),dragEndHandler:i.delegate(this,U),enterHandler:i.delegate(this,pe),leaveHandler:i.delegate(this,ye),pressHandler:i.delegate(this,ge),releaseHandler:i.delegate(this,Ge),nonPrimaryPressHandler:i.delegate(this,ce),nonPrimaryReleaseHandler:i.delegate(this,ue),scrollHandler:i.delegate(this,k),pinchHandler:i.delegate(this,de),focusHandler:i.delegate(this,Pe),blurHandler:i.delegate(this,ze)}),this.outerTracker=new i.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:i.delegate(this,oe),leaveHandler:i.delegate(this,me)}),this.toolbar&&(this.toolbar=new i.ControlDock({element:this.toolbar})),this.bindStandardControls(),a[this.hash].prevContainerSize=l(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){a[I.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new i.World({viewer:this}),this.world.addHandler("add-item",function(ie){I.source=I.world.getItemAt(0).source,a[I.hash].forceRedraw=!0,I._updateRequestId||(I._updateRequestId=c(I,Le))}),this.world.addHandler("remove-item",function(ie){I.world.getItemCount()?I.source=I.world.getItemAt(0).source:I.source=null,a[I.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(ie){I.viewport&&I.viewport._setContentBounds(I.world.getHomeBounds(),I.world.getContentFactor())}),this.world.addHandler("item-index-change",function(ie){I.source=I.world.getItemAt(0).source}),this.viewport=new i.Viewport({containerSize:a[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,overlayPreserveContentDirection:this.overlayPreserveContentDirection,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new i.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:T.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new i.TileCache({maxImageCacheCount:this.maxImageCacheCount}),Object.prototype.hasOwnProperty.call(this.drawerOptions,"useCanvas")&&(i.console.error('useCanvas is deprecated, use the "drawer" option to indicate preferred drawer(s)'),this.drawerOptions.useCanvas||(this.drawer=i.HTMLDrawer),delete this.drawerOptions.useCanvas);let we=Array.isArray(this.drawer)?this.drawer:[this.drawer];we.length===0&&(we=[i.DEFAULT_SETTINGS.drawer].flat(),i.console.warn("No valid drawers were selected. Using the default value.")),this.drawer=null;for(const ie of we)if(this.requestDrawer(ie,{mainDrawer:!0,redrawImmediately:!1}))break;if(!this.drawer)throw i.console.error("No drawer could be created!"),"Error with creating the selected drawer(s)";for(this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),this.overlaysContainer=i.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(le=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(le,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(le=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(le,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new i.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime,drawer:this.drawer.getType(),loadTilesWithAjax:this.loadTilesWithAjax,ajaxHeaders:this.ajaxHeaders,ajaxWithCredentials:this.ajaxWithCredentials})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),le=0;le<this.customControls.length;le++)this.addControl(this.customControls[le].id,{anchor:this.customControls[le].anchor});i.requestAnimationFrame(function(){v(I)}),i._viewers.set(this.element,this)},i.extend(i.Viewer.prototype,i.EventSource.prototype,i.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(T){return i.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(T)},openTileSource:function(T){return i.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(T)},get buttons(){return i.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(T,O){var I=this;if(this.close(),!T)return this;if(this.sequenceMode&&i.isArray(T))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof O<"u"&&!isNaN(O)&&(this.initialPage=O),this.tileSources=T,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(i.isArray(T)||(T=[T]),!T.length)return this;this._opening=!0;for(var le=T.length,fe=0,we=0,ie,Ue=function(){if(fe+we===le)if(fe){(I._firstOpen||!I.preserveViewport)&&(I.viewport.goHome(!0),I.viewport.update()),I._firstOpen=!1;var Te=T[0];if(Te.tileSource&&(Te=Te.tileSource),I.overlays&&!I.preserveOverlays)for(var it=0;it<I.overlays.length;it++)I.currentOverlays[it]=d(I,I.overlays[it]);I._drawOverlays(),I._opening=!1,I.raiseEvent("open",{source:Te})}else I._opening=!1,I.raiseEvent("open-failed",ie)},$e=function(Te){(!i.isPlainObject(Te)||!Te.tileSource)&&(Te={tileSource:Te}),Te.index!==void 0&&(i.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete Te.index),Te.collectionImmediately===void 0&&(Te.collectionImmediately=!0);var it=Te.success;Te.success=function(x){if(fe++,Te.tileSource.overlays)for(var D=0;D<Te.tileSource.overlays.length;D++)I.addOverlay(Te.tileSource.overlays[D]);it&&it(x),Ue()};var S=Te.error;Te.error=function(x){we++,ie||(ie=x),S&&S(x),Ue()},I.addTiledImage(Te)},Ie=0;Ie<T.length;Ie++)$e(T[Ie]);return this},close:function(){return a[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),a[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(a[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(i.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),a[this.navigator.hash]=null,delete a[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),a[this.hash]=null,delete a[this.hash],this.canvas=null,this.container=null,i._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},requestDrawer(T,O){const I={mainDrawer:!0,redrawImmediately:!0,drawerOptions:null};O=i.extend(!0,I,O);const le=O.mainDrawer,fe=O.redrawImmediately,we=O.drawerOptions,ie=this.drawer;let Ue=null;if(T&&T.prototype instanceof i.DrawerBase?(Ue=T,T="custom"):typeof T=="string"&&(Ue=i.determineDrawer(T)),Ue||i.console.warn("Unsupported drawer! Drawer must be an existing string type, or a class that extends OpenSeadragon.DrawerBase."),Ue&&Ue.isSupported()){ie&&le&&ie.destroy();const $e=new Ue({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor,options:we||this.drawerOptions[T]});return le&&(this.drawer=$e,fe&&this.forceRedraw()),$e}return!1},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(T){return this.innerTracker.setTracking(T),this.outerTracker.setTracking(T),this.raiseEvent("mouse-enabled",{enabled:T}),this},areControlsEnabled:function(){var T=this.controls.length,O;for(O=0;O<this.controls.length;O++)T=T&&this.controls[O].isVisible();return T},setControlsEnabled:function(T){return T?w(this):v(this),this.raiseEvent("controls-enabled",{enabled:T}),this},setDebugMode:function(T){for(var O=0;O<this.world.getItemCount();O++)this.world.getItemAt(O).debugMode=T;this.debugMode=T,this.forceRedraw()},setAjaxHeaders:function(T,O){if(T===null&&(T={}),!i.isPlainObject(T)){console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(O===void 0&&(O=!0),this.ajaxHeaders=T,O){for(var I=0;I<this.world.getItemCount();I++)this.world.getItemAt(I)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var le in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[le].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(T){this.buttonGroup.addButton(T)},isFullPage:function(){return a[this.hash]&&a[this.hash].fullPage},setFullPage:function(T){var O=document.body,I=O.style,le=document.documentElement.style,fe=this,we,ie;if(T===this.isFullPage())return this;var Ue={fullPage:T,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Ue),Ue.preventDefaultAction)return this;if(T&&this.element){for(this.elementSize=i.getElementSize(this.element),this.pageScroll=i.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=I.margin,this.docMargin=le.margin,I.margin="0",le.margin="0",this.bodyPadding=I.padding,this.docPadding=le.padding,I.padding="0",le.padding="0",this.bodyWidth=I.width,this.docWidth=le.width,I.width="100%",le.width="100%",this.bodyHeight=I.height,this.docHeight=le.height,I.height="100%",le.height="100%",this.bodyDisplay=I.display,I.display="block",this.previousBody=[],a[this.hash].prevElementParent=this.element.parentNode,a[this.hash].prevNextSibling=this.element.nextSibling,a[this.hash].prevElementWidth=this.element.style.width,a[this.hash].prevElementHeight=this.element.style.height,we=O.childNodes.length,ie=0;ie<we;ie++)this.previousBody.push(O.childNodes[0]),O.removeChild(O.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,O.appendChild(this.toolbar.element),i.addClass(this.toolbar.element,"fullpage")),i.addClass(this.element,"fullpage"),O.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=i.getElementSize(this.element).y-i.getElementSize(this.toolbar.element).y+"px"),a[this.hash].fullPage=!0,i.delegate(this,oe)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,I.margin=this.bodyMargin,le.margin=this.docMargin,I.padding=this.bodyPadding,le.padding=this.docPadding,I.width=this.bodyWidth,le.width=this.docWidth,I.height=this.bodyHeight,le.height=this.docHeight,I.display=this.bodyDisplay,O.removeChild(this.element),we=this.previousBody.length,ie=0;ie<we;ie++)O.appendChild(this.previousBody.shift());i.removeClass(this.element,"fullpage"),a[this.hash].prevElementParent.insertBefore(this.element,a[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(O.removeChild(this.toolbar.element),i.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=a[this.hash].prevElementWidth,this.element.style.height=a[this.hash].prevElementHeight;var $e=0,Ie=function(){i.setPageScroll(fe.pageScroll);var Te=i.getPageScroll();$e++,$e<10&&(Te.x!==fe.pageScroll.x||Te.y!==fe.pageScroll.y)&&i.requestAnimationFrame(Ie)};i.requestAnimationFrame(Ie),a[this.hash].fullPage=!1,i.delegate(this,me)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:T}),this},setFullScreen:function(T){var O=this;if(!i.supportsFullScreen)return this.setFullPage(T);if(i.isFullScreen()===T)return this;var I={fullScreen:T,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",I),I.preventDefaultAction)return this;if(T){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var le=function(){var fe=i.isFullScreen();fe||(i.removeEvent(document,i.fullScreenEventName,le),i.removeEvent(document,i.fullScreenErrorEventName,le),O.setFullPage(!1),O.isFullPage()&&(O.element.style.width=O.fullPageStyleWidth,O.element.style.height=O.fullPageStyleHeight)),O.navigator&&O.viewport&&setTimeout(function(){O.navigator.update(O.viewport)}),O.raiseEvent("full-screen",{fullScreen:fe})};i.addEvent(document,i.fullScreenEventName,le),i.addEvent(document,i.fullScreenErrorEventName,le),i.requestFullScreen(document.body)}else i.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return i.isFullScreen()&&this.isFullPage()},setVisible:function(T){return this.container.style.visibility=T?"":"hidden",this.raiseEvent("visible",{visible:T}),this},addTiledImage:function(T){i.console.assert(T,"[Viewer.addTiledImage] options is required"),i.console.assert(T.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),i.console.assert(!T.replace||T.index>-1&&T.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var O=this;T.replace&&(T.replaceItem=O.world.getItemAt(T.index)),this._hideMessage(),T.placeholderFillStyle===void 0&&(T.placeholderFillStyle=this.placeholderFillStyle),T.opacity===void 0&&(T.opacity=this.opacity),T.preload===void 0&&(T.preload=this.preload),T.compositeOperation===void 0&&(T.compositeOperation=this.compositeOperation),T.crossOriginPolicy===void 0&&(T.crossOriginPolicy=T.tileSource.crossOriginPolicy!==void 0?T.tileSource.crossOriginPolicy:this.crossOriginPolicy),T.ajaxWithCredentials===void 0&&(T.ajaxWithCredentials=this.ajaxWithCredentials),T.loadTilesWithAjax===void 0&&(T.loadTilesWithAjax=this.loadTilesWithAjax),i.isPlainObject(T.ajaxHeaders)||(T.ajaxHeaders={});var I={options:T};function le(ie){for(var Ue=0;Ue<O._loadQueue.length;Ue++)if(O._loadQueue[Ue]===I){O._loadQueue.splice(Ue,1);break}O._loadQueue.length===0&&fe(I),O.raiseEvent("add-item-failed",ie),T.error&&T.error(ie)}function fe(ie){O.collectionMode&&(O.world.arrange({immediately:ie.options.collectionImmediately,rows:O.collectionRows,columns:O.collectionColumns,layout:O.collectionLayout,tileSize:O.collectionTileSize,tileMargin:O.collectionTileMargin}),O.world.setAutoRefigureSizes(!0))}if(i.isArray(T.tileSource)){setTimeout(function(){le({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:T.tileSource,options:T})});return}this._loadQueue.push(I);function we(){for(var ie,Ue,$e;O._loadQueue.length&&(ie=O._loadQueue[0],!!ie.tileSource);){if(O._loadQueue.splice(0,1),ie.options.replace){var Ie=O.world.getIndexOfItem(ie.options.replaceItem);Ie!==-1&&(ie.options.index=Ie),O.world.removeItem(ie.options.replaceItem)}Ue=new i.TiledImage({viewer:O,source:ie.tileSource,viewport:O.viewport,drawer:O.drawer,tileCache:O.tileCache,imageLoader:O.imageLoader,x:ie.options.x,y:ie.options.y,width:ie.options.width,height:ie.options.height,fitBounds:ie.options.fitBounds,fitBoundsPlacement:ie.options.fitBoundsPlacement,clip:ie.options.clip,placeholderFillStyle:ie.options.placeholderFillStyle,opacity:ie.options.opacity,preload:ie.options.preload,degrees:ie.options.degrees,flipped:ie.options.flipped,compositeOperation:ie.options.compositeOperation,springStiffness:O.springStiffness,animationTime:O.animationTime,minZoomImageRatio:O.minZoomImageRatio,wrapHorizontal:O.wrapHorizontal,wrapVertical:O.wrapVertical,maxTilesPerFrame:O.maxTilesPerFrame,immediateRender:O.immediateRender,blendTime:O.blendTime,alwaysBlend:O.alwaysBlend,minPixelRatio:O.minPixelRatio,smoothTileEdgesMinZoom:O.smoothTileEdgesMinZoom,iOSDevice:O.iOSDevice,crossOriginPolicy:ie.options.crossOriginPolicy,ajaxWithCredentials:ie.options.ajaxWithCredentials,loadTilesWithAjax:ie.options.loadTilesWithAjax,ajaxHeaders:ie.options.ajaxHeaders,debugMode:O.debugMode,subPixelRoundingForTransparency:O.subPixelRoundingForTransparency}),O.collectionMode&&O.world.setAutoRefigureSizes(!1),O.navigator&&($e=i.extend({},ie.options,{replace:!1,originalTiledImage:Ue,tileSource:ie.tileSource}),O.navigator.addTiledImage($e)),O.world.addItem(Ue,{index:ie.options.index}),O._loadQueue.length===0&&fe(ie),O.world.getItemCount()===1&&!O.preserveViewport&&O.viewport.goHome(!0),ie.options.success&&ie.options.success({item:Ue})}}u(this,T.tileSource,T,function(ie){I.tileSource=ie,we()},function(ie){ie.options=T,le(ie),we()})},addSimpleImage:function(T){i.console.assert(T,"[Viewer.addSimpleImage] options is required"),i.console.assert(T.url,"[Viewer.addSimpleImage] options.url is required");var O=i.extend({},T,{tileSource:{type:"image",url:T.url}});delete O.url,this.addTiledImage(O)},addLayer:function(T){var O=this;i.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var I=i.extend({},T,{success:function(le){O.raiseEvent("add-layer",{options:T,drawer:le.item})},error:function(le){O.raiseEvent("add-layer-failed",le)}});return this.addTiledImage(I),this},getLayerAtLevel:function(T){return i.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(T)},getLevelOfLayer:function(T){return i.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(T)},getLayersCount:function(){return i.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(T,O){return i.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(T,O)},removeLayer:function(T){return i.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(T)},forceRedraw:function(){return a[this.hash].forceRedraw=!0,this},forceResize:function(){a[this.hash].needsResize=!0,a[this.hash].forceResize=!0},bindSequenceControls:function(){var T=i.delegate(this,_),O=i.delegate(this,b),I=i.delegate(this,this.goToNextPage),le=i.delegate(this,this.goToPreviousPage),fe=this.navImages,we=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(we=!1),this.previousButton=new i.Button({element:this.previousButton?i.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.PreviousPage"),srcRest:J(this.prefixUrl,fe.previous.REST),srcGroup:J(this.prefixUrl,fe.previous.GROUP),srcHover:J(this.prefixUrl,fe.previous.HOVER),srcDown:J(this.prefixUrl,fe.previous.DOWN),onRelease:le,onFocus:T,onBlur:O}),this.nextButton=new i.Button({element:this.nextButton?i.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.NextPage"),srcRest:J(this.prefixUrl,fe.next.REST),srcGroup:J(this.prefixUrl,fe.next.GROUP),srcHover:J(this.prefixUrl,fe.next.HOVER),srcDown:J(this.prefixUrl,fe.next.DOWN),onRelease:I,onFocus:T,onBlur:O}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),we&&(this.paging=new i.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:i.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||i.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var T=i.delegate(this,Ee),O=i.delegate(this,Ce),I=i.delegate(this,Yt),le=i.delegate(this,Ve),fe=i.delegate(this,vt),we=i.delegate(this,Ai),ie=i.delegate(this,Oi),Ue=i.delegate(this,qt),$e=i.delegate(this,Gi),Ie=i.delegate(this,Mi),Te=i.delegate(this,_),it=i.delegate(this,b),S=this.navImages,x=[],D=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(D=!1),this.showZoomControl&&(x.push(this.zoomInButton=new i.Button({element:this.zoomInButton?i.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.ZoomIn"),srcRest:J(this.prefixUrl,S.zoomIn.REST),srcGroup:J(this.prefixUrl,S.zoomIn.GROUP),srcHover:J(this.prefixUrl,S.zoomIn.HOVER),srcDown:J(this.prefixUrl,S.zoomIn.DOWN),onPress:T,onRelease:O,onClick:I,onEnter:T,onExit:O,onFocus:Te,onBlur:it})),x.push(this.zoomOutButton=new i.Button({element:this.zoomOutButton?i.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.ZoomOut"),srcRest:J(this.prefixUrl,S.zoomOut.REST),srcGroup:J(this.prefixUrl,S.zoomOut.GROUP),srcHover:J(this.prefixUrl,S.zoomOut.HOVER),srcDown:J(this.prefixUrl,S.zoomOut.DOWN),onPress:le,onRelease:O,onClick:fe,onEnter:le,onExit:O,onFocus:Te,onBlur:it}))),this.showHomeControl&&x.push(this.homeButton=new i.Button({element:this.homeButton?i.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.Home"),srcRest:J(this.prefixUrl,S.home.REST),srcGroup:J(this.prefixUrl,S.home.GROUP),srcHover:J(this.prefixUrl,S.home.HOVER),srcDown:J(this.prefixUrl,S.home.DOWN),onRelease:we,onFocus:Te,onBlur:it})),this.showFullPageControl&&x.push(this.fullPageButton=new i.Button({element:this.fullPageButton?i.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.FullPage"),srcRest:J(this.prefixUrl,S.fullpage.REST),srcGroup:J(this.prefixUrl,S.fullpage.GROUP),srcHover:J(this.prefixUrl,S.fullpage.HOVER),srcDown:J(this.prefixUrl,S.fullpage.DOWN),onRelease:ie,onFocus:Te,onBlur:it})),this.showRotationControl&&(x.push(this.rotateLeftButton=new i.Button({element:this.rotateLeftButton?i.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.RotateLeft"),srcRest:J(this.prefixUrl,S.rotateleft.REST),srcGroup:J(this.prefixUrl,S.rotateleft.GROUP),srcHover:J(this.prefixUrl,S.rotateleft.HOVER),srcDown:J(this.prefixUrl,S.rotateleft.DOWN),onRelease:Ue,onFocus:Te,onBlur:it})),x.push(this.rotateRightButton=new i.Button({element:this.rotateRightButton?i.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.RotateRight"),srcRest:J(this.prefixUrl,S.rotateright.REST),srcGroup:J(this.prefixUrl,S.rotateright.GROUP),srcHover:J(this.prefixUrl,S.rotateright.HOVER),srcDown:J(this.prefixUrl,S.rotateright.DOWN),onRelease:$e,onFocus:Te,onBlur:it}))),this.showFlipControl&&x.push(this.flipButton=new i.Button({element:this.flipButton?i.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:i.getString("Tooltips.Flip"),srcRest:J(this.prefixUrl,S.flip.REST),srcGroup:J(this.prefixUrl,S.flip.GROUP),srcHover:J(this.prefixUrl,S.flip.HOVER),srcDown:J(this.prefixUrl,S.flip.DOWN),onRelease:Ie,onFocus:Te,onBlur:it})),D?(this.buttonGroup=new i.ButtonGroup({buttons:x,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",i.delegate(this,jt)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||i.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||i.ControlAnchor.TOP_LEFT})):this.customButtons=x),this},currentPage:function(){return this._sequenceIndex},goToPage:function(T){return this.tileSources&&T>=0&&T<this.tileSources.length&&(this._sequenceIndex=T,this._updateSequenceButtons(T),this.open(this.tileSources[T]),this.referenceStrip&&this.referenceStrip.setFocus(T),this.raiseEvent("page",{page:T})),this},addOverlay:function(T,O,I,le){var fe;if(i.isPlainObject(T)?fe=T:fe={element:T,location:O,placement:I,onDraw:le},T=i.getElement(fe.element),h(this.currentOverlays,T)>=0)return this;var we=d(this,fe);return this.currentOverlays.push(we),we.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:T,location:fe.location,placement:fe.placement}),this},updateOverlay:function(T,O,I){var le;return T=i.getElement(T),le=h(this.currentOverlays,T),le>=0&&(this.currentOverlays[le].update(O,I),a[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:T,location:O,placement:I})),this},removeOverlay:function(T){var O;return T=i.getElement(T),O=h(this.currentOverlays,T),O>=0&&(this.currentOverlays[O].destroy(),this.currentOverlays.splice(O,1),a[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:T})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return a[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(T){var O;return T=i.getElement(T),O=h(this.currentOverlays,T),O>=0?this.currentOverlays[O]:null},_updateSequenceButtons:function(T){this.nextButton&&(!this.tileSources||this.tileSources.length-1===T?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(T>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(T){this._hideMessage();var O=i.makeNeutralElement("div");O.appendChild(document.createTextNode(T)),this.messageDiv=i.makeCenteredNode(O),i.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var T=this.messageDiv;T&&(T.parentNode.removeChild(T),delete this.messageDiv)},gestureSettingsByDeviceType:function(T){switch(T){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var T,O=this.currentOverlays.length;for(T=0;T<O;T++)this.currentOverlays[T].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new i.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else i.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),i.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){i.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var T=i.pixelDensityRatio,O=i.getCurrentPixelDensityRatio();T!==O&&(i.pixelDensityRatio=O,this.forceResize())},goToPreviousPage:function(){var T=this._sequenceIndex-1;this.navPrevNextWrap&&T<0&&(T+=this.tileSources.length),this.goToPage(T)},goToNextPage:function(){var T=this._sequenceIndex+1;this.navPrevNextWrap&&T>=this.tileSources.length&&(T=0),this.goToPage(T)},isAnimating:function(){return a[this.hash].animating}});function l(T){return T=i.getElement(T),new i.Point(T.clientWidth===0?1:T.clientWidth,T.clientHeight===0?1:T.clientHeight)}function u(T,O,I,le,fe){var we=T;if(i.type(O)==="string"){if(O.match(/^\s*<.*>\s*$/))O=i.parseXml(O);else if(O.match(/^\s*[{[].*[}\]]\s*$/))try{var ie=i.parseJSON(O);O=ie}catch{}}function Ue($e,Ie){$e.ready?le($e):($e.addHandler("ready",function(){le($e)}),$e.addHandler("open-failed",function(Te){fe({message:Te.message,source:Ie})}))}setTimeout(function(){if(i.type(O)==="string")O=new i.TileSource({url:O,crossOriginPolicy:I.crossOriginPolicy!==void 0?I.crossOriginPolicy:T.crossOriginPolicy,ajaxWithCredentials:T.ajaxWithCredentials,ajaxHeaders:I.ajaxHeaders?I.ajaxHeaders:T.ajaxHeaders,splitHashDataForPost:T.splitHashDataForPost,success:function(it){le(it.tileSource)}}),O.addHandler("open-failed",function(it){fe(it)});else if(i.isPlainObject(O)||O.nodeType)if(O.crossOriginPolicy===void 0&&(I.crossOriginPolicy!==void 0||T.crossOriginPolicy!==void 0)&&(O.crossOriginPolicy=I.crossOriginPolicy!==void 0?I.crossOriginPolicy:T.crossOriginPolicy),O.ajaxWithCredentials===void 0&&(O.ajaxWithCredentials=T.ajaxWithCredentials),i.isFunction(O.getTileUrl)){var $e=new i.TileSource(O);$e.getTileUrl=O.getTileUrl,le($e)}else{var Ie=i.TileSource.determineType(we,O);if(!Ie){fe({message:"Unable to load TileSource",source:O});return}var Te=Ie.prototype.configure.apply(we,[O]);Ue(new Ie(Te),O)}else Ue(O,O)})}function d(T,O){if(O instanceof i.Overlay)return O;var I=null;if(O.element)I=i.getElement(O.element);else{var le=O.id?O.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);I=i.getElement(O.id),I||(I=document.createElement("a"),I.href="#/overlay/"+le),I.id=le,i.addClass(I,O.className?O.className:"openseadragon-overlay")}var fe=O.location,we=O.width,ie=O.height;if(!fe){var Ue=O.x,$e=O.y;if(O.px!==void 0){var Ie=T.viewport.imageToViewportRectangle(new i.Rect(O.px,O.py,we||0,ie||0));Ue=Ie.x,$e=Ie.y,we=we!==void 0?Ie.width:void 0,ie=ie!==void 0?Ie.height:void 0}fe=new i.Point(Ue,$e)}var Te=O.placement;return Te&&i.type(Te)==="string"&&(Te=i.Placement[O.placement.toUpperCase()]),new i.Overlay({element:I,location:fe,placement:Te,onDraw:O.onDraw,checkResize:O.checkResize,width:we,height:ie,rotationMode:O.rotationMode})}function h(T,O){var I;for(I=T.length-1;I>=0;I--)if(T[I].element===O)return I;return-1}function c(T,O){return i.requestAnimationFrame(function(){O(T)})}function g(T){i.requestAnimationFrame(function(){y(T)})}function v(T){T.autoHideControls&&(T.controlsShouldFade=!0,T.controlsFadeBeginTime=i.now()+T.controlsFadeDelay,window.setTimeout(function(){g(T)},T.controlsFadeDelay))}function y(T){var O,I,le,fe;if(T.controlsShouldFade){for(O=i.now(),I=O-T.controlsFadeBeginTime,le=1-I/T.controlsFadeLength,le=Math.min(1,le),le=Math.max(0,le),fe=T.controls.length-1;fe>=0;fe--)T.controls[fe].autoFade&&T.controls[fe].setOpacity(le);le>0&&g(T)}}function w(T){var O;for(T.controlsShouldFade=!1,O=T.controls.length-1;O>=0;O--)T.controls[O].setOpacity(1)}function _(){w(this)}function b(){v(this)}function C(T){var O={tracker:T.eventSource,position:T.position,originalEvent:T.originalEvent,preventDefault:T.preventDefault};this.raiseEvent("canvas-contextmenu",O),T.preventDefault=O.preventDefault}function A(T){var O={originalEvent:T.originalEvent,preventDefaultAction:!1,preventVerticalPan:T.preventVerticalPan||!this.panVertical,preventHorizontalPan:T.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",O),!O.preventDefaultAction&&!T.ctrl&&!T.alt&&!T.meta)switch(T.keyCode){case 38:O.preventVerticalPan||(T.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new i.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),T.preventDefault=!0;break;case 40:O.preventVerticalPan||(T.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new i.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),T.preventDefault=!0;break;case 37:O.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new i.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),T.preventDefault=!0;break;case 39:O.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new i.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),T.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),T.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),T.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),T.preventDefault=!0;break;case 87:O.preventVerticalPan||(T.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new i.Point(0,-40))),this.viewport.applyConstraints()),T.preventDefault=!0;break;case 83:O.preventVerticalPan||(T.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new i.Point(0,40))),this.viewport.applyConstraints()),T.preventDefault=!0;break;case 65:O.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new i.Point(-40,0))),this.viewport.applyConstraints()),T.preventDefault=!0;break;case 68:O.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new i.Point(40,0))),this.viewport.applyConstraints()),T.preventDefault=!0;break;case 82:T.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),T.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),T.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:T.preventDefault=!1;break}else T.preventDefault=!1}function z(T){var O={originalEvent:T.originalEvent};this.raiseEvent("canvas-key-press",O)}function H(T){var O,I=document.activeElement===this.canvas;I||this.canvas.focus(),this.viewport.flipped&&(T.position.x=this.viewport.getContainerSize().x-T.position.x);var le={tracker:T.eventSource,position:T.position,quick:T.quick,shift:T.shift,originalEvent:T.originalEvent,originalTarget:T.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",le),!le.preventDefaultAction&&this.viewport&&T.quick&&(O=this.gestureSettingsByDeviceType(T.pointerType),O.clickToZoom===!0&&(this.viewport.zoomBy(T.shift?1/this.zoomPerClick:this.zoomPerClick,O.zoomToRefPoint?this.viewport.pointFromPixel(T.position,!0):null),this.viewport.applyConstraints()),O.dblClickDragToZoom&&(a[this.hash].draggingToZoom===!0?(a[this.hash].lastClickTime=null,a[this.hash].draggingToZoom=!1):a[this.hash].lastClickTime=i.now()))}function ae(T){var O,I={tracker:T.eventSource,position:T.position,shift:T.shift,originalEvent:T.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",I),!I.preventDefaultAction&&this.viewport&&(O=this.gestureSettingsByDeviceType(T.pointerType),O.dblClickToZoom&&(this.viewport.zoomBy(T.shift?1/this.zoomPerClick:this.zoomPerClick,O.zoomToRefPoint?this.viewport.pointFromPixel(T.position,!0):null),this.viewport.applyConstraints()))}function Q(T){var O,I={tracker:T.eventSource,pointerType:T.pointerType,position:T.position,delta:T.delta,speed:T.speed,direction:T.direction,shift:T.shift,originalEvent:T.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",I),O=this.gestureSettingsByDeviceType(T.pointerType),!I.preventDefaultAction&&this.viewport){if(O.dblClickDragToZoom&&a[this.hash].draggingToZoom){var le=Math.pow(this.zoomPerDblClickDrag,T.delta.y/50);this.viewport.zoomBy(le)}else if(O.dragToPan&&!a[this.hash].draggingToZoom){if(this.panHorizontal||(T.delta.x=0),this.panVertical||(T.delta.y=0),this.viewport.flipped&&(T.delta.x=-T.delta.x),this.constrainDuringPan){var fe=this.viewport.deltaPointsFromPixels(T.delta.negate());this.viewport.centerSpringX.target.value+=fe.x,this.viewport.centerSpringY.target.value+=fe.y;var we=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=fe.x,this.viewport.centerSpringY.target.value-=fe.y,we.xConstrained&&(T.delta.x=0),we.yConstrained&&(T.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(T.delta.negate()),O.flickEnabled&&!this.constrainDuringPan)}}}function U(T){var O,I={tracker:T.eventSource,pointerType:T.pointerType,position:T.position,speed:T.speed,direction:T.direction,shift:T.shift,originalEvent:T.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",I),O=this.gestureSettingsByDeviceType(T.pointerType),!I.preventDefaultAction&&this.viewport){if(!a[this.hash].draggingToZoom&&O.dragToPan&&O.flickEnabled&&T.speed>=O.flickMinSpeed){var le=0;this.panHorizontal&&(le=O.flickMomentum*T.speed*Math.cos(T.direction));var fe=0;this.panVertical&&(fe=O.flickMomentum*T.speed*Math.sin(T.direction));var we=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),ie=this.viewport.pointFromPixel(new i.Point(we.x-le,we.y-fe));this.viewport.panTo(ie,!1)}this.viewport.applyConstraints()}O.dblClickDragToZoom&&a[this.hash].draggingToZoom===!0&&(a[this.hash].draggingToZoom=!1)}function pe(T){this.raiseEvent("canvas-enter",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,buttons:T.buttons,pointers:T.pointers,insideElementPressed:T.insideElementPressed,buttonDownAny:T.buttonDownAny,originalEvent:T.originalEvent})}function ye(T){this.raiseEvent("canvas-exit",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,buttons:T.buttons,pointers:T.pointers,insideElementPressed:T.insideElementPressed,buttonDownAny:T.buttonDownAny,originalEvent:T.originalEvent})}function ge(T){var O;if(this.raiseEvent("canvas-press",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,insideElementPressed:T.insideElementPressed,insideElementReleased:T.insideElementReleased,originalEvent:T.originalEvent}),O=this.gestureSettingsByDeviceType(T.pointerType),O.dblClickDragToZoom){var I=a[this.hash].lastClickTime,le=i.now();if(I===null)return;le-I<this.dblClickTimeThreshold&&(a[this.hash].draggingToZoom=!0),a[this.hash].lastClickTime=null}}function Ge(T){this.raiseEvent("canvas-release",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,insideElementPressed:T.insideElementPressed,insideElementReleased:T.insideElementReleased,originalEvent:T.originalEvent})}function ce(T){this.raiseEvent("canvas-nonprimary-press",{tracker:T.eventSource,position:T.position,pointerType:T.pointerType,button:T.button,buttons:T.buttons,originalEvent:T.originalEvent})}function ue(T){this.raiseEvent("canvas-nonprimary-release",{tracker:T.eventSource,position:T.position,pointerType:T.pointerType,button:T.button,buttons:T.buttons,originalEvent:T.originalEvent})}function de(T){var O,I,le,fe,we={tracker:T.eventSource,pointerType:T.pointerType,gesturePoints:T.gesturePoints,lastCenter:T.lastCenter,center:T.center,lastDistance:T.lastDistance,distance:T.distance,shift:T.shift,originalEvent:T.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",we),this.viewport&&(O=this.gestureSettingsByDeviceType(T.pointerType),O.pinchToZoom&&(!we.preventDefaultPanAction||!we.preventDefaultZoomAction)&&(I=this.viewport.pointFromPixel(T.center,!0),O.zoomToRefPoint&&!we.preventDefaultPanAction&&(le=this.viewport.pointFromPixel(T.lastCenter,!0),fe=le.minus(I),this.panHorizontal||(fe.x=0),this.panVertical||(fe.y=0),this.viewport.panBy(fe,!0)),we.preventDefaultZoomAction||this.viewport.zoomBy(T.distance/T.lastDistance,I,!0),this.viewport.applyConstraints()),O.pinchRotate&&!we.preventDefaultRotateAction)){var ie=Math.atan2(T.gesturePoints[0].currentPos.y-T.gesturePoints[1].currentPos.y,T.gesturePoints[0].currentPos.x-T.gesturePoints[1].currentPos.x),Ue=Math.atan2(T.gesturePoints[0].lastPos.y-T.gesturePoints[1].lastPos.y,T.gesturePoints[0].lastPos.x-T.gesturePoints[1].lastPos.x);I=this.viewport.pointFromPixel(T.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(ie-Ue)*(180/Math.PI),I,!0)}}function Pe(T){this.raiseEvent("canvas-focus",{tracker:T.eventSource,originalEvent:T.originalEvent})}function ze(T){this.raiseEvent("canvas-blur",{tracker:T.eventSource,originalEvent:T.originalEvent})}function k(T){var O,I,le,fe,we;fe=i.now(),we=fe-this._lastScrollTime,we>this.minScrollDeltaTime?(this._lastScrollTime=fe,O={tracker:T.eventSource,position:T.position,scroll:T.scroll,shift:T.shift,originalEvent:T.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",O),!O.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(T.position.x=this.viewport.getContainerSize().x-T.position.x),I=this.gestureSettingsByDeviceType(T.pointerType),I.scrollToZoom&&(le=Math.pow(this.zoomPerScroll,T.scroll),this.viewport.zoomBy(le,I.zoomToRefPoint?this.viewport.pointFromPixel(T.position,!0):null),this.viewport.applyConstraints())),T.preventDefault=O.preventDefault):T.preventDefault=!0}function oe(T){a[this.hash].mouseInside=!0,w(this),this.raiseEvent("container-enter",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,buttons:T.buttons,pointers:T.pointers,insideElementPressed:T.insideElementPressed,buttonDownAny:T.buttonDownAny,originalEvent:T.originalEvent})}function me(T){T.pointers<1&&(a[this.hash].mouseInside=!1,a[this.hash].animating||v(this)),this.raiseEvent("container-exit",{tracker:T.eventSource,pointerType:T.pointerType,position:T.position,buttons:T.buttons,pointers:T.pointers,insideElementPressed:T.insideElementPressed,buttonDownAny:T.buttonDownAny,originalEvent:T.originalEvent})}function Le(T){ee(T),T.isOpen()?T._updateRequestId=c(T,Le):T._updateRequestId=!1}function L(T,O){var I=T.viewport,le=I.getZoom(),fe=I.getCenter();I.resize(O,T.preserveImageSizeOnResize),I.panTo(fe,!0);var we;if(T.preserveImageSizeOnResize)we=a[T.hash].prevContainerSize.x/O.x;else{var ie=new i.Point(0,0),Ue=new i.Point(a[T.hash].prevContainerSize.x,a[T.hash].prevContainerSize.y).distanceTo(ie),$e=new i.Point(O.x,O.y).distanceTo(ie);we=$e/Ue*a[T.hash].prevContainerSize.x/O.x}I.zoomTo(le*we,null,!0),a[T.hash].prevContainerSize=O,a[T.hash].forceRedraw=!0,a[T.hash].needsResize=!1,a[T.hash].forceResize=!1}function ee(T){if(!(T._opening||!a[T.hash])){if(T.autoResize||a[T.hash].forceResize){var O;if(T._autoResizePolling){O=l(T.container);var I=a[T.hash].prevContainerSize;O.equals(I)||(a[T.hash].needsResize=!0)}a[T.hash].needsResize&&L(T,O||l(T.container))}var le=T.viewport.update(),fe=T.world.update(le)||le;le&&T.raiseEvent("viewport-change"),T.referenceStrip&&(fe=T.referenceStrip.update(T.viewport)||fe);var we=a[T.hash].animating;!we&&fe&&(T.raiseEvent("animation-start"),w(T));var ie=we&&!fe;ie&&(a[T.hash].animating=!1),(fe||ie||a[T.hash].forceRedraw||T.world.needsDraw())&&(ve(T),T._drawOverlays(),T.navigator&&T.navigator.update(T.viewport),a[T.hash].forceRedraw=!1,fe&&T.raiseEvent("animation")),ie&&(T.raiseEvent("animation-finish"),a[T.hash].mouseInside||v(T)),a[T.hash].animating=fe}}function ve(T){T.imageLoader.clear(),T.world.draw(),T.raiseEvent("update-viewport",{})}function J(T,O){return T?T+O:O}function Ee(){a[this.hash].lastZoomTime=i.now(),a[this.hash].zoomFactor=this.zoomPerSecond,a[this.hash].zooming=!0,Et(this)}function Ve(){a[this.hash].lastZoomTime=i.now(),a[this.hash].zoomFactor=1/this.zoomPerSecond,a[this.hash].zooming=!0,Et(this)}function Ce(){a[this.hash].zooming=!1}function Et(T){i.requestAnimationFrame(i.delegate(T,lt))}function lt(){var T,O,I;a[this.hash].zooming&&this.viewport&&(T=i.now(),O=T-a[this.hash].lastZoomTime,I=Math.pow(a[this.hash].zoomFactor,O/1e3),this.viewport.zoomBy(I),this.viewport.applyConstraints(),a[this.hash].lastZoomTime=T,Et(this))}function Yt(){this.viewport&&(a[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function vt(){this.viewport&&(a[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function jt(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function Ai(){this.viewport&&this.viewport.goHome()}function Oi(){this.isFullPage()&&!i.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function qt(){if(this.viewport){var T=this.viewport.getRotation();this.viewport.flipped?T+=this.rotationIncrement:T-=this.rotationIncrement,this.viewport.setRotation(T)}}function Gi(){if(this.viewport){var T=this.viewport.getRotation();this.viewport.flipped?T-=this.rotationIncrement:T+=this.rotationIncrement,this.viewport.setRotation(T)}}function Mi(){this.viewport.toggleFlip()}i.determineDrawer=function(T){for(let O in p){const I=p[O],le=I.prototype;if(le&&le instanceof p.DrawerBase&&i.isFunction(le.getType)&&le.getType.call(I)===T)return I}return null}}(p),function(i){i.Navigator=function(c){var g=c.viewer,v=this,y,w;c.element||c.id?(c.element?(c.id&&i.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),c.element.id?c.id=c.element.id:c.id="navigator-"+i.now(),this.element=c.element):this.element=document.getElementById(c.id),c.controlOptions={anchor:i.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(c.id="navigator-"+i.now(),this.element=i.makeNeutralElement("div"),c.controlOptions={anchor:i.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:c.autoFade},c.position&&(c.position==="BOTTOM_RIGHT"?c.controlOptions.anchor=i.ControlAnchor.BOTTOM_RIGHT:c.position==="BOTTOM_LEFT"?c.controlOptions.anchor=i.ControlAnchor.BOTTOM_LEFT:c.position==="TOP_RIGHT"?c.controlOptions.anchor=i.ControlAnchor.TOP_RIGHT:c.position==="TOP_LEFT"?c.controlOptions.anchor=i.ControlAnchor.TOP_LEFT:c.position==="ABSOLUTE"&&(c.controlOptions.anchor=i.ControlAnchor.ABSOLUTE,c.controlOptions.top=c.top,c.controlOptions.left=c.left,c.controlOptions.height=c.height,c.controlOptions.width=c.width))),this.element.id=c.id,this.element.className+=" navigator",c=i.extend(!0,{sizeRatio:i.DEFAULT_SETTINGS.navigatorSizeRatio},c,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:c.animationTime,autoResize:!1,minZoomImageRatio:1,background:c.background,opacity:c.opacity,borderColor:c.borderColor,displayRegionColor:c.displayRegionColor}),c.minPixelRatio=this.minPixelRatio=g.minPixelRatio,i.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new i.Point(1,1),this.totalBorderWidths=new i.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),c.controlOptions.anchor!==i.ControlAnchor.NONE&&function(C,A){C.margin="0px",C.border=A+"px solid "+c.borderColor,C.padding="0px",C.background=c.background,C.opacity=c.opacity,C.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=i.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(C,A){C.position="relative",C.top="0px",C.left="0px",C.fontSize="0px",C.overflow="hidden",C.border=A+"px solid "+c.displayRegionColor,C.margin="0px",C.padding="0px",C.background="transparent",C.float="left",C.cssFloat="left",C.zIndex=999999999,C.cursor="default",C.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),i.setElementPointerEventsNone(this.displayRegion),i.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=i.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",i.setElementPointerEventsNone(this.displayRegionContainer),i.setElementTouchActionNone(this.displayRegionContainer),g.addControl(this.element,c.controlOptions),this._resizeWithViewer=c.controlOptions.anchor!==i.ControlAnchor.ABSOLUTE&&c.controlOptions.anchor!==i.ControlAnchor.NONE,c.width&&c.height?(this.setWidth(c.width),this.setHeight(c.height)):this._resizeWithViewer&&(y=i.getElementSize(g.element),this.element.style.height=Math.round(y.y*c.sizeRatio)+"px",this.element.style.width=Math.round(y.x*c.sizeRatio)+"px",this.oldViewerSize=y,w=i.getElementSize(this.element),this.elementArea=w.x*w.y),this.oldContainerSize=new i.Point(0,0),i.Viewer.apply(this,[c]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function _(C,A){d(v.displayRegionContainer,C),d(v.displayRegion,-C),v.viewport.setRotation(C,A)}if(c.navigatorRotate){var b=c.viewer.viewport?c.viewer.viewport.getRotation():c.viewer.degrees||0;_(b,!0),c.viewer.addHandler("rotate",function(C){_(C.degrees,C.immediately)})}this.innerTracker.destroy(),this.innerTracker=new i.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:i.delegate(this,s),clickHandler:i.delegate(this,a),releaseHandler:i.delegate(this,l),scrollHandler:i.delegate(this,u),preProcessEventHandler:function(C){C.eventType==="wheel"&&(C.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",i.setElementPointerEventsNone(this.canvas),i.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){v.viewport&&v.viewport.goHome(!0)}),g.world.addHandler("item-index-change",function(C){window.setTimeout(function(){var A=v.world.getItemAt(C.previousIndex);v.world.setItemIndex(A,C.newIndex)},1)}),g.world.addHandler("remove-item",function(C){var A=C.item,z=v._getMatchingItem(A);z&&v.world.removeItem(z)}),this.update(g.viewport)},i.extend(i.Navigator.prototype,i.EventSource.prototype,i.Viewer.prototype,{updateSize:function(){if(this.viewport){var c=new i.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);c.equals(this.oldContainerSize)||(this.viewport.resize(c,!0),this.viewport.goHome(!0),this.oldContainerSize=c,this.world.update(),this.world.draw(),this.update(this.viewer.viewport))}},setWidth:function(c){this.width=c,this.element.style.width=typeof c=="number"?c+"px":c,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(c){this.height=c,this.element.style.height=typeof c=="number"?c+"px":c,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(c){return this.viewport.setFlip(c),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(c){h(this.canvas,c),h(this.element,c)},update:function(c){var g,v,y,w,_,b;if(c||(c=this.viewer.viewport),g=i.getElementSize(this.viewer.element),this._resizeWithViewer&&g.x&&g.y&&!g.equals(this.oldViewerSize)&&(this.oldViewerSize=g,this.maintainSizeRatio||!this.elementArea?(v=g.x*this.sizeRatio,y=g.y*this.sizeRatio):(v=Math.sqrt(this.elementArea*(g.x/g.y)),y=this.elementArea/v),this.element.style.width=Math.round(v)+"px",this.element.style.height=Math.round(y)+"px",this.elementArea||(this.elementArea=v*y),this.updateSize()),c&&this.viewport){if(w=c.getBoundsNoRotate(!0),_=this.viewport.pixelFromPointNoRotate(w.getTopLeft(),!1),b=this.viewport.pixelFromPointNoRotate(w.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var C=c.getRotation(!0);d(this.displayRegion,-C)}var A=this.displayRegion.style;A.display=this.world.getItemCount()?"block":"none",A.top=_.y.toFixed(2)+"px",A.left=_.x.toFixed(2)+"px";var z=b.x-_.x,H=b.y-_.y;A.width=Math.round(Math.max(z,0))+"px",A.height=Math.round(Math.max(H,0))+"px"}},addTiledImage:function(c){var g=this,v=c.originalTiledImage;delete c.original;var y=i.extend({},c,{success:function(w){var _=w.item;_._originalForNavigator=v,g._matchBounds(_,v,!0),g._matchOpacity(_,v),g._matchCompositeOperation(_,v);function b(){g._matchBounds(_,v)}function C(){g._matchOpacity(_,v)}function A(){g._matchCompositeOperation(_,v)}v.addHandler("bounds-change",b),v.addHandler("clip-change",b),v.addHandler("opacity-change",C),v.addHandler("composite-operation-change",A)}});return i.Viewer.prototype.addTiledImage.apply(this,[y])},destroy:function(){return i.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(c){for(var g=this.world.getItemCount(),v,y=0;y<g;y++)if(v=this.world.getItemAt(y),v._originalForNavigator===c)return v;return null},_matchBounds:function(c,g,v){var y=g.getBoundsNoRotate();c.setPosition(y.getTopLeft(),v),c.setWidth(y.width,v),c.setRotation(g.getRotation(),v),c.setClip(g.getClip()),c.setFlip(g.getFlip())},_matchOpacity:function(c,g){c.setOpacity(g.opacity)},_matchCompositeOperation:function(c,g){c.setCompositeOperation(g.compositeOperation)}});function a(c){var g={tracker:c.eventSource,position:c.position,quick:c.quick,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",g),!g.preventDefaultAction&&c.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(c.position.x=this.viewport.getContainerSize().x-c.position.x);var v=this.viewport.pointFromPixel(c.position);this.panVertical?this.panHorizontal||(v.x=this.viewer.viewport.getCenter(!0).x):v.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(v),this.viewer.viewport.applyConstraints()}}function s(c){var g={tracker:c.eventSource,position:c.position,delta:c.delta,speed:c.speed,direction:c.direction,shift:c.shift,originalEvent:c.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",g),!g.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(c.delta.x=0),this.panVertical||(c.delta.y=0),this.viewer.viewport.flipped&&(c.delta.x=-c.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(c.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function l(c){c.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function u(c){var g={tracker:c.eventSource,position:c.position,scroll:c.scroll,shift:c.shift,originalEvent:c.originalEvent,preventDefault:c.preventDefault};this.viewer.raiseEvent("navigator-scroll",g),c.preventDefault=g.preventDefault}function d(c,g){h(c,"rotate("+g+"deg)")}function h(c,g){c.style.webkitTransform=g,c.style.mozTransform=g,c.style.msTransform=g,c.style.oTransform=g,c.style.transform=g}}(p),function(i){var a={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};i.extend(i,{getString:function(s){var l=s.split("."),u=null,d=arguments,h=a,c;for(c=0;c<l.length-1;c++)h=h[l[c]]||{};return u=h[l[c]],typeof u!="string"&&(i.console.error("Untranslated source string:",s),u=""),u.replace(/\{\d+\}/g,function(g){var v=parseInt(g.match(/\d+/),10)+1;return v<d.length?d[v]:""})},setString:function(s,l){var u=s.split("."),d=a,h;for(h=0;h<u.length-1;h++)d[u[h]]||(d[u[h]]={}),d=d[u[h]];d[u[h]]=l}})}(p),function(i){i.Point=function(a,s){this.x=typeof a=="number"?a:0,this.y=typeof s=="number"?s:0},i.Point.prototype={clone:function(){return new i.Point(this.x,this.y)},plus:function(a){return new i.Point(this.x+a.x,this.y+a.y)},minus:function(a){return new i.Point(this.x-a.x,this.y-a.y)},times:function(a){return new i.Point(this.x*a,this.y*a)},divide:function(a){return new i.Point(this.x/a,this.y/a)},negate:function(){return new i.Point(-this.x,-this.y)},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},squaredDistanceTo:function(a){return Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2)},apply:function(a){return new i.Point(a(this.x),a(this.y))},equals:function(a){return a instanceof i.Point&&this.x===a.x&&this.y===a.y},rotate:function(a,s){s=s||new i.Point(0,0);var l,u;if(a%90===0){var d=i.positiveModulo(a,360);switch(d){case 0:l=1,u=0;break;case 90:l=0,u=1;break;case 180:l=-1,u=0;break;case 270:l=0,u=-1;break}}else{var h=a*Math.PI/180;l=Math.cos(h),u=Math.sin(h)}var c=l*(this.x-s.x)-u*(this.y-s.y)+s.x,g=u*(this.x-s.x)+l*(this.y-s.y)+s.y;return new i.Point(c,g)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(p),function(i){i.TileSource=function(s,l,u,d,h,c){var g=this,v=arguments,y,w;if(i.isPlainObject(s)?y=s:y={width:v[0],height:v[1],tileSize:v[2],tileOverlap:v[3],minLevel:v[4],maxLevel:v[5]},i.EventSource.call(this),i.extend(!0,this,y),!this.success){for(w=0;w<arguments.length;w++)if(i.isFunction(arguments[w])){this.success=arguments[w];break}}this.success&&this.addHandler("ready",function(_){g.success(_)}),i.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new i.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=y.width&&y.height?y.width/y.height:1,this.dimensions=new i.Point(y.width,y.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=y.tileOverlap?y.tileOverlap:0,this.minLevel=y.minLevel?y.minLevel:0,this.maxLevel=y.maxLevel!==void 0&&y.maxLevel!==null?y.maxLevel:y.width&&y.height?Math.ceil(Math.log(Math.max(y.width,y.height))/Math.log(2)):0,this.success&&i.isFunction(this.success)&&this.success(this))},i.TileSource.prototype={getTileSize:function(s){return i.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(s){return this._tileWidth?this._tileWidth:this.getTileSize(s)},getTileHeight:function(s){return this._tileHeight?this._tileHeight:this.getTileSize(s)},setMaxLevel:function(s){this.maxLevel=s,this._memoizeLevelScale()},getLevelScale:function(s){return this._memoizeLevelScale(),this.getLevelScale(s)},_memoizeLevelScale:function(){var s={},l;for(l=0;l<=this.maxLevel;l++)s[l]=1/Math.pow(2,this.maxLevel-l);this.getLevelScale=function(u){return s[u]}},getNumTiles:function(s){var l=this.getLevelScale(s),u=Math.ceil(l*this.dimensions.x/this.getTileWidth(s)),d=Math.ceil(l*this.dimensions.y/this.getTileHeight(s));return new i.Point(u,d)},getPixelRatio:function(s){var l=this.dimensions.times(this.getLevelScale(s)),u=1/l.x*i.pixelDensityRatio,d=1/l.y*i.pixelDensityRatio;return new i.Point(u,d)},getClosestLevel:function(){var s,l;for(s=this.minLevel+1;s<=this.maxLevel&&(l=this.getNumTiles(s),!(l.x>1||l.y>1));s++);return s-1},getTileAtPoint:function(s,l){var u=l.x>=0&&l.x<=1&&l.y>=0&&l.y<=1/this.aspectRatio;i.console.assert(u,"[TileSource.getTileAtPoint] must be called with a valid point.");var d=this.dimensions.x*this.getLevelScale(s),h=l.x*d,c=l.y*d,g=Math.floor(h/this.getTileWidth(s)),v=Math.floor(c/this.getTileHeight(s));l.x>=1&&(g=this.getNumTiles(s).x-1);var y=1e-15;return l.y>=1/this.aspectRatio-y&&(v=this.getNumTiles(s).y-1),new i.Point(g,v)},getTileBounds:function(s,l,u,d){var h=this.dimensions.times(this.getLevelScale(s)),c=this.getTileWidth(s),g=this.getTileHeight(s),v=l===0?0:c*l-this.tileOverlap,y=u===0?0:g*u-this.tileOverlap,w=c+(l===0?1:2)*this.tileOverlap,_=g+(u===0?1:2)*this.tileOverlap,b=1/h.x;return w=Math.min(w,h.x-v),_=Math.min(_,h.y-y),d?new i.Rect(0,0,w,_):new i.Rect(v*b,y*b,w*b,_*b)},getImageInfo:function(s){var l=this,u,d,h,c,g,v,y;s&&(g=s.split("/"),v=g[g.length-1],y=v.lastIndexOf("."),y>-1&&(g[g.length-1]=v.slice(0,y)));var w=null;if(this.splitHashDataForPost){var _=s.indexOf("#");_!==-1&&(w=s.substring(_+1),s=s.substr(0,_))}d=function(b){typeof b=="string"&&(b=i.parseXml(b));var C=i.TileSource.determineType(l,b,s);if(!C){l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:s});return}c=C.prototype.configure.apply(l,[b,s,w]),c.ajaxWithCredentials===void 0&&(c.ajaxWithCredentials=l.ajaxWithCredentials),h=new C(c),l.ready=!0,l.raiseEvent("ready",{tileSource:h})},s.match(/\.js$/)?(u=s.split("/").pop().replace(".js",""),i.jsonp({url:s,async:!1,callbackName:u,callback:d})):i.makeAjaxRequest({url:s,postData:w,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(b){var C=a(b);d(C)},error:function(b,C){var A;try{A="HTTP "+b.status+" attempting to load TileSource: "+s}catch{var z;typeof C>"u"||!C.toString?z="Unknown error":z=C.toString(),A=z+" attempting to load TileSource: "+s}i.console.error(A),l.raiseEvent("open-failed",{message:A,source:s,postData:w})}})},supports:function(s,l){return!1},configure:function(s,l,u){throw new Error("Method not implemented.")},getTileUrl:function(s,l,u){throw new Error("Method not implemented.")},getTilePostData:function(s,l,u){return null},getTileAjaxHeaders:function(s,l,u){return{}},getTileHashKey:function(s,l,u,d,h,c){function g(v){return h?v+"+"+JSON.stringify(h):v}return g(typeof d!="string"?s+"/"+l+"_"+u:d)},tileExists:function(s,l,u){var d=this.getNumTiles(s);return s>=this.minLevel&&s<=this.maxLevel&&l>=0&&u>=0&&l<d.x&&u<d.y},hasTransparency:function(s,l,u,d){return!!s||l.match(".png")},downloadTileStart:function(s){var l=s.userData,u=new Image;l.image=u,l.request=null;var d=function(h){if(!u){s.finish(null,l.request,"Image load failed: undefined Image instance.");return}u.onload=u.onerror=u.onabort=null,s.finish(h?null:u,l.request,h)};u.onload=function(){d()},u.onabort=u.onerror=function(){d("Image load aborted.")},s.loadWithAjax?l.request=i.makeAjaxRequest({url:s.src,withCredentials:s.ajaxWithCredentials,headers:s.ajaxHeaders,responseType:"arraybuffer",postData:s.postData,success:function(h){var c;try{c=new window.Blob([h.response])}catch(y){var g=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(y.name==="TypeError"&&g){var v=new g;v.append(h.response),c=v.getBlob()}}c.size===0?d("Empty image response."):u.src=(window.URL||window.webkitURL).createObjectURL(c)},error:function(h){d("Image load aborted - XHR error")}}):(s.crossOriginPolicy!==!1&&(u.crossOrigin=s.crossOriginPolicy),u.src=s.src)},downloadTileAbort:function(s){s.userData.request&&s.userData.request.abort();var l=s.userData.image;s.userData.image&&(l.onload=l.onerror=l.onabort=null)},createTileCache:function(s,l,u){s._data=l},destroyTileCache:function(s){s._data=null,s._renderedContext=null},getTileCacheData:function(s){return s._data},getTileCacheDataAsImage:function(s){return s._data},getTileCacheDataAsContext2D:function(s){if(!s._renderedContext){var l=document.createElement("canvas");l.width=s._data.width,l.height=s._data.height,s._renderedContext=l.getContext("2d"),s._renderedContext.drawImage(s._data,0,0),s._data=null}return s._renderedContext}},i.extend(!0,i.TileSource.prototype,i.EventSource.prototype);function a(s){var l=s.responseText,u=s.status,d,h;if(s){if(s.status!==200&&s.status!==0)throw u=s.status,d=u===404?"Not Found":s.statusText,new Error(i.getString("Errors.Status",u,d))}else throw new Error(i.getString("Errors.Security"));if(l.match(/^\s*<.*/))try{h=s.responseXML&&s.responseXML.documentElement?s.responseXML:i.parseXml(l)}catch{h=s.responseText}else if(l.match(/\s*[{[].*/))try{h=i.parseJSON(l)}catch{h=l}else h=l;return h}i.TileSource.determineType=function(s,l,u){var d;for(d in p)if(d.match(/.+TileSource$/)&&i.isFunction(p[d])&&i.isFunction(p[d].prototype.supports)&&p[d].prototype.supports.call(s,l,u))return p[d];return i.console.error("No TileSource was able to open %s %s",u,l),null}}(p),function(i){i.DziTileSource=function(l,u,d,h,c,g,v,y,w){var _,b,C,A;if(i.isPlainObject(l)?A=l:A={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=A.tilesUrl,this.fileFormat=A.fileFormat,this.displayRects=A.displayRects,this.displayRects)for(_=this.displayRects.length-1;_>=0;_--)for(b=this.displayRects[_],C=b.minLevel;C<=b.maxLevel;C++)this._levelRects[C]||(this._levelRects[C]=[]),this._levelRects[C].push(b);i.TileSource.apply(this,[A])},i.extend(i.DziTileSource.prototype,i.TileSource.prototype,{supports:function(l,u){var d;return l.Image?d=l.Image.xmlns:l.documentElement&&(l.documentElement.localName==="Image"||l.documentElement.tagName==="Image")&&(d=l.documentElement.namespaceURI),d=(d||"").toLowerCase(),d.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||d.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(l,u,d){var h;return i.isPlainObject(l)?h=s(this,l):h=a(this,l),u&&!h.tilesUrl&&(h.tilesUrl=u.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),u.search(/\.(dzi|xml|js)\?/)!==-1?h.queryParams=u.match(/\?.*/):h.queryParams=""),h},getTileUrl:function(l,u,d){return[this.tilesUrl,l,"/",u,"_",d,".",this.fileFormat,this.queryParams].join("")},tileExists:function(l,u,d){var h=this._levelRects[l],c,g,v,y,w,_,b;if(this.minLevel&&l<this.minLevel||this.maxLevel&&l>this.maxLevel)return!1;if(!h||!h.length)return!0;for(b=h.length-1;b>=0;b--)if(c=h[b],!(l<c.minLevel||l>c.maxLevel)&&(g=this.getLevelScale(l),v=c.x*g,y=c.y*g,w=v+c.width*g,_=y+c.height*g,v=Math.floor(v/this._tileWidth),y=Math.floor(y/this._tileWidth),w=Math.ceil(w/this._tileWidth),_=Math.ceil(_/this._tileWidth),v<=u&&u<w&&y<=d&&d<_))return!0;return!1}});function a(l,u){if(!u||!u.documentElement)throw new Error(i.getString("Errors.Xml"));var d=u.documentElement,h=d.localName||d.tagName,c=u.documentElement.namespaceURI,g=null,v=[],y,w,_,b,C;if(h==="Image")try{if(b=d.getElementsByTagName("Size")[0],b===void 0&&(b=d.getElementsByTagNameNS(c,"Size")[0]),g={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:d.getAttribute("Url"),Format:d.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(d.getAttribute("Overlap"),10),TileSize:parseInt(d.getAttribute("TileSize"),10),Size:{Height:parseInt(b.getAttribute("Height"),10),Width:parseInt(b.getAttribute("Width"),10)}}},!i.imageFormatSupported(g.Image.Format))throw new Error(i.getString("Errors.ImageFormat",g.Image.Format.toUpperCase()));for(y=d.getElementsByTagName("DisplayRect"),y===void 0&&(y=d.getElementsByTagNameNS(c,"DisplayRect")[0]),C=0;C<y.length;C++)w=y[C],_=w.getElementsByTagName("Rect")[0],_===void 0&&(_=w.getElementsByTagNameNS(c,"Rect")[0]),v.push({Rect:{X:parseInt(_.getAttribute("X"),10),Y:parseInt(_.getAttribute("Y"),10),Width:parseInt(_.getAttribute("Width"),10),Height:parseInt(_.getAttribute("Height"),10),MinLevel:parseInt(w.getAttribute("MinLevel"),10),MaxLevel:parseInt(w.getAttribute("MaxLevel"),10)}});return v.length&&(g.Image.DisplayRect=v),s(l,g)}catch(H){throw H instanceof Error?H:new Error(i.getString("Errors.Dzi"))}else{if(h==="Collection")throw new Error(i.getString("Errors.Dzc"));if(h==="Error"){var A=d.getElementsByTagName("Message")[0],z=A.firstChild.nodeValue;throw new Error(z)}}throw new Error(i.getString("Errors.Dzi"))}function s(l,u){var d=u.Image,h=d.Url,c=d.Format,g=d.Size,v=d.DisplayRect||[],y=parseInt(g.Width,10),w=parseInt(g.Height,10),_=parseInt(d.TileSize,10),b=parseInt(d.Overlap,10),C=[],A,z;for(z=0;z<v.length;z++)A=v[z].Rect,C.push(new i.DisplayRect(parseInt(A.X,10),parseInt(A.Y,10),parseInt(A.Width,10),parseInt(A.Height,10),parseInt(A.MinLevel,10),parseInt(A.MaxLevel,10)));return i.extend(!0,{width:y,height:w,tileSize:_,tileOverlap:b,minLevel:null,maxLevel:null,tilesUrl:h,fileFormat:c,displayRects:C},u)}}(p),function(i){i.IIIFTileSource=function(d){if(i.extend(!0,this,d),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(d.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=d.version,this.tile_width&&this.tile_height)d.tileWidth=this.tile_width,d.tileHeight=this.tile_height;else if(this.tile_width)d.tileSize=this.tile_width;else if(this.tile_height)d.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)d.tileWidth=this.tiles[0].width,d.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var h=0;h<this.tiles.length;h++)for(var c=0;c<this.tiles[h].scaleFactors.length;c++){var g=this.tiles[h].scaleFactors[c];this.scale_factors.push(g),d.tileSizePerScaleFactor[g]={width:this.tiles[h].width,height:this.tiles[h].height||this.tiles[h].width}}}else if(a(d)){for(var v=Math.min(this.height,this.width),y=[256,512,1024],w=[],_=0;_<y.length;_++)y[_]<=v&&w.push(y[_]);w.length>0?d.tileSize=Math.max.apply(null,w):d.tileSize=v}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,d.levels=s(this),i.extend(!0,d,{width:d.levels[d.levels.length-1].width,height:d.levels[d.levels.length-1].height,tileSize:Math.max(d.height,d.width),tileOverlap:0,minLevel:0,maxLevel:d.levels.length-1}),this.levels=d.levels):i.console.error("Nothing in the info.json to construct image pyramids from");if(!d.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)d.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));else{var b=Math.max.apply(null,this.scale_factors);d.maxLevel=Math.round(Math.log(b)*Math.LOG2E)}if(this.sizes){var C=this.sizes.length;(C===d.maxLevel||C===d.maxLevel+1)&&(this.levelSizes=this.sizes.slice().sort((A,z)=>A.width-z.width),C===d.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}i.TileSource.apply(this,[d])},i.extend(i.IIIFTileSource.prototype,i.TileSource.prototype,{supports:function(d,h){return d.protocol&&d.protocol==="http://iiif.io/api/image"||d["@context"]&&(d["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||d["@context"]==="http://iiif.io/api/image/1/context.json")||d.profile&&d.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||d.identifier&&d.width&&d.height?!0:!!(d.documentElement&&d.documentElement.tagName==="info"&&d.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(d,h,c){if(i.isPlainObject(d)){if(!d["@context"])d["@context"]="http://iiif.io/api/image/1.0/context.json",d["@id"]=h.replace("/info.json",""),d.version=1;else{var v=d["@context"];if(Array.isArray(v)){for(var y=0;y<v.length;y++)if(typeof v[y]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(v[y])||v[y]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){v=v[y];break}}switch(v){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":d.version=1;break;case"http://iiif.io/api/image/2/context.json":d.version=2;break;case"http://iiif.io/api/image/3/context.json":d.version=3;break;default:i.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(d.preferredFormats){for(var w=0;w<d.preferredFormats.length;w++)if(p.imageFormatSupported(d.preferredFormats[w])){d.tileFormat=d.preferredFormats[w];break}}return d}else{var g=l(d);return g["@context"]="http://iiif.io/api/image/1.0/context.json",g["@id"]=h.replace("/info.xml",""),g.version=1,g}},getTileWidth:function(d){if(this.emulateLegacyImagePyramid)return i.TileSource.prototype.getTileWidth.call(this,d);var h=Math.pow(2,this.maxLevel-d);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[h]?this.tileSizePerScaleFactor[h].width:this._tileWidth},getTileHeight:function(d){if(this.emulateLegacyImagePyramid)return i.TileSource.prototype.getTileHeight.call(this,d);var h=Math.pow(2,this.maxLevel-d);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[h]?this.tileSizePerScaleFactor[h].height:this._tileHeight},getLevelScale:function(d){if(this.emulateLegacyImagePyramid){var h=NaN;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(h=this.levels[d].width/this.levels[this.maxLevel].width),h}return i.TileSource.prototype.getLevelScale.call(this,d)},getNumTiles:function(d){if(this.emulateLegacyImagePyramid){var h=this.getLevelScale(d);return h?new i.Point(1,1):new i.Point(0,0)}if(this.levelSizes){var c=this.levelSizes[d],g=Math.ceil(c.width/this.getTileWidth(d)),v=Math.ceil(c.height/this.getTileHeight(d));return new i.Point(g,v)}else return i.TileSource.prototype.getNumTiles.call(this,d)},getTileAtPoint:function(d,h){if(this.emulateLegacyImagePyramid)return new i.Point(0,0);if(this.levelSizes){var c=h.x>=0&&h.x<=1&&h.y>=0&&h.y<=1/this.aspectRatio;i.console.assert(c,"[TileSource.getTileAtPoint] must be called with a valid point.");var g=this.levelSizes[d].width,v=h.x*g,y=h.y*g,w=Math.floor(v/this.getTileWidth(d)),_=Math.floor(y/this.getTileHeight(d));h.x>=1&&(w=this.getNumTiles(d).x-1);var b=1e-15;return h.y>=1/this.aspectRatio-b&&(_=this.getNumTiles(d).y-1),new i.Point(w,_)}return i.TileSource.prototype.getTileAtPoint.call(this,d,h)},getTileUrl:function(d,h,c){if(this.emulateLegacyImagePyramid){var g=null;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(g=this.levels[d].url),g}var v="0",y=Math.pow(.5,this.maxLevel-d),w,_,b,C,A,z,H,ae,Q,U,pe,ye,ge,Ge,ce,ue;return this.levelSizes?(w=this.levelSizes[d].width,_=this.levelSizes[d].height):(w=Math.ceil(this.width*y),_=Math.ceil(this.height*y)),b=this.getTileWidth(d),C=this.getTileHeight(d),A=Math.round(b/y),z=Math.round(C/y),this.version===1?ce="native."+this.tileFormat:ce="default."+this.tileFormat,w<b&&_<C?(this.version===2&&w===this.width?ye="full":this.version===3&&w===this.width&&_===this.height?ye="max":this.version===3?ye=w+","+_:ye=w+",",H="full"):(ae=h*A,Q=c*z,U=Math.min(A,this.width-ae),pe=Math.min(z,this.height-Q),h===0&&c===0&&U===this.width&&pe===this.height?H="full":H=[ae,Q,U,pe].join(","),ge=Math.min(b,w-h*b),Ge=Math.min(C,_-c*C),this.version===2&&ge===this.width?ye="full":this.version===3&&ge===this.width&&Ge===this.height?ye="max":this.version===3?ye=ge+","+Ge:ye=ge+","),ue=[this._id,H,ye,v,ce].join("/"),ue},__testonly__:{canBeTiled:a,constructLevels:s}});function a(d){var h=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],c=Array.isArray(d.profile)?d.profile[0]:d.profile,g=h.indexOf(c)!==-1,v=!1;return d.version===2&&d.profile.length>1&&d.profile[1].supports&&(v=d.profile[1].supports.indexOf("sizeByW")!==-1),d.version===3&&d.extraFeatures&&(v=d.extraFeatures.indexOf("sizeByWh")!==-1),!g||v}function s(d){for(var h=[],c=0;c<d.sizes.length;c++)h.push({url:d._id+"/full/"+d.sizes[c].width+","+(d.version===3?d.sizes[c].height:"")+"/0/default."+d.tileFormat,width:d.sizes[c].width,height:d.sizes[c].height});return h.sort(function(g,v){return g.width-v.width})}function l(d){if(!d||!d.documentElement)throw new Error(i.getString("Errors.Xml"));var h=d.documentElement,c=h.tagName,g=null;if(c==="info")try{return g={},u(h,g),g}catch(v){throw v instanceof Error?v:new Error(i.getString("Errors.IIIF"))}throw new Error(i.getString("Errors.IIIF"))}function u(d,h,c){var g,v;if(d.nodeType===3&&c)v=d.nodeValue.trim(),v.match(/^\d*$/)&&(v=Number(v)),h[c]?(i.isArray(h[c])||(h[c]=[h[c]]),h[c].push(v)):h[c]=v;else if(d.nodeType===1)for(g=0;g<d.childNodes.length;g++)u(d.childNodes[g],h,d.nodeName)}}(p),function(i){i.OsmTileSource=function(a,s,l,u,d){var h;i.isPlainObject(a)?h=a:h={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!h.width||!h.height)&&(h.width=65572864,h.height=65572864),h.tileSize||(h.tileSize=256,h.tileOverlap=0),h.tilesUrl||(h.tilesUrl="http://tile.openstreetmap.org/"),h.minLevel=8,i.TileSource.apply(this,[h])},i.extend(i.OsmTileSource.prototype,i.TileSource.prototype,{supports:function(a,s){return a.type&&a.type==="openstreetmaps"},configure:function(a,s,l){return a},getTileUrl:function(a,s,l){return this.tilesUrl+(a-8)+"/"+s+"/"+l+".png"}})}(p),function(i){i.TmsTileSource=function(a,s,l,u,d){var h;i.isPlainObject(a)?h=a:h={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var c=Math.ceil(h.width/256)*256,g=Math.ceil(h.height/256)*256,v;c>g?v=c/256:v=g/256,h.maxLevel=Math.ceil(Math.log(v)/Math.log(2))-1,h.tileSize=256,h.width=c,h.height=g,i.TileSource.apply(this,[h])},i.extend(i.TmsTileSource.prototype,i.TileSource.prototype,{supports:function(a,s){return a.type&&a.type==="tiledmapservice"},configure:function(a,s,l){return a},getTileUrl:function(a,s,l){var u=this.getNumTiles(a).y-1;return this.tilesUrl+a+"/"+s+"/"+(u-l)+".png"}})}(p),function(i){i.ZoomifyTileSource=function(a){typeof a.tileSize>"u"&&(a.tileSize=256),typeof a.fileFormat>"u"&&(a.fileFormat="jpg",this.fileFormat=a.fileFormat);var s={x:a.width,y:a.height};for(a.imageSizes=[{x:a.width,y:a.height}],a.gridSize=[this._getGridSize(a.width,a.height,a.tileSize)];parseInt(s.x,10)>a.tileSize||parseInt(s.y,10)>a.tileSize;)s.x=Math.floor(s.x/2),s.y=Math.floor(s.y/2),a.imageSizes.push({x:s.x,y:s.y}),a.gridSize.push(this._getGridSize(s.x,s.y,a.tileSize));a.imageSizes.reverse(),a.gridSize.reverse(),a.minLevel=0,a.maxLevel=a.gridSize.length-1,p.TileSource.apply(this,[a])},i.extend(i.ZoomifyTileSource.prototype,i.TileSource.prototype,{_getGridSize:function(a,s,l){return{x:Math.ceil(a/l),y:Math.ceil(s/l)}},_calculateAbsoluteTileNumber:function(a,s,l){for(var u=0,d={},h=0;h<a;h++)d=this.gridSize[h],u+=d.x*d.y;return d=this.gridSize[a],u+=d.x*l+s,u},supports:function(a,s){return a.type&&a.type==="zoomifytileservice"},configure:function(a,s,l){return a},getTileUrl:function(a,s,l){var u=0,d=this._calculateAbsoluteTileNumber(a,s,l);return u=Math.floor(d/256),this.tilesUrl+"TileGroup"+u+"/"+a+"-"+s+"-"+l+"."+this.fileFormat}})}(p),function(i){i.LegacyTileSource=function(u){var d,h,c;i.isArray(u)&&(d={type:"legacy-image-pyramid",levels:u}),d.levels=a(d.levels),d.levels.length>0?(h=d.levels[d.levels.length-1].width,c=d.levels[d.levels.length-1].height):(h=0,c=0,i.console.error("No supported image formats found")),i.extend(!0,d,{width:h,height:c,tileSize:Math.max(c,h),tileOverlap:0,minLevel:0,maxLevel:d.levels.length>0?d.levels.length-1:0}),i.TileSource.apply(this,[d]),this.levels=d.levels},i.extend(i.LegacyTileSource.prototype,i.TileSource.prototype,{supports:function(u,d){return u.type&&u.type==="legacy-image-pyramid"||u.documentElement&&u.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(u,d,h){var c;return i.isPlainObject(u)?c=l(this,u):c=s(this,u),c},getLevelScale:function(u){var d=NaN;return this.levels.length>0&&u>=this.minLevel&&u<=this.maxLevel&&(d=this.levels[u].width/this.levels[this.maxLevel].width),d},getNumTiles:function(u){var d=this.getLevelScale(u);return d?new i.Point(1,1):new i.Point(0,0)},getTileUrl:function(u,d,h){var c=null;return this.levels.length>0&&u>=this.minLevel&&u<=this.maxLevel&&(c=this.levels[u].url),c}});function a(u){var d=[],h,c;for(c=0;c<u.length;c++)h=u[c],h.height&&h.width&&h.url?d.push({url:h.url,width:Number(h.width),height:Number(h.height)}):i.console.error("Unsupported image format: %s",h.url?h.url:"<no URL>");return d.sort(function(g,v){return g.height-v.height})}function s(u,d){if(!d||!d.documentElement)throw new Error(i.getString("Errors.Xml"));var h=d.documentElement,c=h.tagName,g=null,v=[],y,w;if(c==="image")try{for(g={type:h.getAttribute("type"),levels:[]},v=h.getElementsByTagName("level"),w=0;w<v.length;w++)y=v[w],g.levels.push({url:y.getAttribute("url"),width:parseInt(y.getAttribute("width"),10),height:parseInt(y.getAttribute("height"),10)});return l(u,g)}catch(_){throw _ instanceof Error?_:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(c==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(c==="error")throw new Error("Error: "+d)}throw new Error("Unknown element "+c)}function l(u,d){return d.levels}}(p),function(i){i.ImageTileSource=function(a){a=i.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1},a),i.TileSource.apply(this,[a])},i.extend(i.ImageTileSource.prototype,i.TileSource.prototype,{supports:function(a,s){return a.type&&a.type==="image"},configure:function(a,s,l){return a},getImageInfo:function(a){var s=this._image=new Image,l=this;this.crossOriginPolicy&&(s.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(s.useCredentials=this.ajaxWithCredentials),i.addEvent(s,"load",function(){l.width=s.naturalWidth,l.height=s.naturalHeight,l.aspectRatio=l.width/l.height,l.dimensions=new i.Point(l.width,l.height),l._tileWidth=l.width,l._tileHeight=l.height,l.tileOverlap=0,l.minLevel=0,l.levels=l._buildLevels(),l.maxLevel=l.levels.length-1,l.ready=!0,l.raiseEvent("ready",{tileSource:l})}),i.addEvent(s,"error",function(){l.raiseEvent("open-failed",{message:"Error loading image at "+a,source:a})}),s.src=a},getLevelScale:function(a){var s=NaN;return a>=this.minLevel&&a<=this.maxLevel&&(s=this.levels[a].width/this.levels[this.maxLevel].width),s},getNumTiles:function(a){var s=this.getLevelScale(a);return s?new i.Point(1,1):new i.Point(0,0)},getTileUrl:function(a,s,l){var u=null;return a>=this.minLevel&&a<=this.maxLevel&&(u=this.levels[a].url),u},getContext2D:function(a,s,l){var u=null;return a>=this.minLevel&&a<=this.maxLevel&&(u=this.levels[a].context2D),u},destroy:function(a){this._freeupCanvasMemory(a)},_buildLevels:function(){var a=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!i.supportsCanvas)return delete this._image,a;var s=this._image.naturalWidth,l=this._image.naturalHeight,u=document.createElement("canvas"),d=u.getContext("2d");if(u.width=s,u.height=l,d.drawImage(this._image,0,0,s,l),a[0].context2D=d,delete this._image,i.isCanvasTainted(u))return a;for(;s>=2&&l>=2;){s=Math.floor(s/2),l=Math.floor(l/2);var h=document.createElement("canvas"),c=h.getContext("2d");h.width=s,h.height=l,c.drawImage(u,0,0,s,l),a.splice(0,0,{context2D:c,width:s,height:l}),u=h,d=c}return a},_freeupCanvasMemory:function(a){for(var s=0;s<this.levels.length;s++)this.levels[s].context2D&&(this.levels[s].context2D.canvas.height=0,this.levels[s].context2D.canvas.width=0,a&&a.raiseEvent("image-unloaded",{context2D:this.levels[s].context2D}))}})}(p),function(i){i.TileSourceCollection=function(a,s,l,u){i.console.error("TileSourceCollection is deprecated; use World instead")}}(p),function(i){i.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},i.Button=function(c){var g=this;i.EventSource.call(this),i.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:i.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:i.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},c),this.element=c.element||i.makeNeutralElement("div"),c.element||(this.imgRest=i.makeTransparentImage(this.srcRest),this.imgGroup=i.makeTransparentImage(this.srcGroup),this.imgHover=i.makeTransparentImage(this.srcHover),this.imgDown=i.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,i.setElementPointerEventsNone(this.imgRest),i.setElementPointerEventsNone(this.imgGroup),i.setElementPointerEventsNone(this.imgHover),i.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",i.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=i.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new i.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(v){v.insideElementPressed?(d(g,i.ButtonState.DOWN),g.raiseEvent("enter",{originalEvent:v.originalEvent})):v.buttonDownAny||d(g,i.ButtonState.HOVER)},focusHandler:function(v){g.tracker.enterHandler(v),g.raiseEvent("focus",{originalEvent:v.originalEvent})},leaveHandler:function(v){h(g,i.ButtonState.GROUP),v.insideElementPressed&&g.raiseEvent("exit",{originalEvent:v.originalEvent})},blurHandler:function(v){g.tracker.leaveHandler(v),g.raiseEvent("blur",{originalEvent:v.originalEvent})},pressHandler:function(v){d(g,i.ButtonState.DOWN),g.raiseEvent("press",{originalEvent:v.originalEvent})},releaseHandler:function(v){v.insideElementPressed&&v.insideElementReleased?(h(g,i.ButtonState.HOVER),g.raiseEvent("release",{originalEvent:v.originalEvent})):v.insideElementPressed?h(g,i.ButtonState.GROUP):d(g,i.ButtonState.HOVER)},clickHandler:function(v){v.quick&&g.raiseEvent("click",{originalEvent:v.originalEvent})},keyHandler:function(v){v.keyCode===13?(g.raiseEvent("click",{originalEvent:v.originalEvent}),g.raiseEvent("release",{originalEvent:v.originalEvent}),v.preventDefault=!0):v.preventDefault=!1}}),h(this,i.ButtonState.REST)},i.extend(i.Button.prototype,i.EventSource.prototype,{notifyGroupEnter:function(){d(this,i.ButtonState.GROUP)},notifyGroupExit:function(){h(this,i.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),i.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),i.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function a(c){i.requestAnimationFrame(function(){s(c)})}function s(c){var g,v,y;c.shouldFade&&(g=i.now(),v=g-c.fadeBeginTime,y=1-v/c.fadeLength,y=Math.min(1,y),y=Math.max(0,y),c.imgGroup&&i.setElementOpacity(c.imgGroup,y,!0),y>0&&a(c))}function l(c){c.shouldFade=!0,c.fadeBeginTime=i.now()+c.fadeDelay,window.setTimeout(function(){a(c)},c.fadeDelay)}function u(c){c.shouldFade=!1,c.imgGroup&&i.setElementOpacity(c.imgGroup,1,!0)}function d(c,g){c.element.disabled||(g>=i.ButtonState.GROUP&&c.currentState===i.ButtonState.REST&&(u(c),c.currentState=i.ButtonState.GROUP),g>=i.ButtonState.HOVER&&c.currentState===i.ButtonState.GROUP&&(c.imgHover&&(c.imgHover.style.visibility=""),c.currentState=i.ButtonState.HOVER),g>=i.ButtonState.DOWN&&c.currentState===i.ButtonState.HOVER&&(c.imgDown&&(c.imgDown.style.visibility=""),c.currentState=i.ButtonState.DOWN))}function h(c,g){c.element.disabled||(g<=i.ButtonState.HOVER&&c.currentState===i.ButtonState.DOWN&&(c.imgDown&&(c.imgDown.style.visibility="hidden"),c.currentState=i.ButtonState.HOVER),g<=i.ButtonState.GROUP&&c.currentState===i.ButtonState.HOVER&&(c.imgHover&&(c.imgHover.style.visibility="hidden"),c.currentState=i.ButtonState.GROUP),g<=i.ButtonState.REST&&c.currentState===i.ButtonState.GROUP&&(l(c),c.currentState=i.ButtonState.REST))}}(p),function(i){i.ButtonGroup=function(a){i.extend(!0,this,{buttons:[],clickTimeThreshold:i.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:i.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},a);var s=this.buttons.concat([]),l=this,u;if(this.element=a.element||i.makeNeutralElement("div"),!a.group)for(this.element.style.display="inline-block",u=0;u<s.length;u++)this.element.appendChild(s[u].element);i.setElementTouchActionNone(this.element),this.tracker=new i.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(d){var h;for(h=0;h<l.buttons.length;h++)l.buttons[h].notifyGroupEnter()},leaveHandler:function(d){var h;if(!d.insideElementPressed)for(h=0;h<l.buttons.length;h++)l.buttons[h].notifyGroupExit()}})},i.ButtonGroup.prototype={addButton:function(a){this.buttons.push(a),this.element.appendChild(a.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var a=this.buttons.pop();this.element.removeChild(a.element),a.destroy()}this.tracker.destroy(),this.element=null}}}(p),function(i){i.Rect=function(a,s,l,u,d){this.x=typeof a=="number"?a:0,this.y=typeof s=="number"?s:0,this.width=typeof l=="number"?l:0,this.height=typeof u=="number"?u:0,this.degrees=typeof d=="number"?d:0,this.degrees=i.positiveModulo(this.degrees,360);var h,c;this.degrees>=270?(h=this.getTopRight(),this.x=h.x,this.y=h.y,c=this.height,this.height=this.width,this.width=c,this.degrees-=270):this.degrees>=180?(h=this.getBottomRight(),this.x=h.x,this.y=h.y,this.degrees-=180):this.degrees>=90&&(h=this.getBottomLeft(),this.x=h.x,this.y=h.y,c=this.height,this.height=this.width,this.width=c,this.degrees-=90)},i.Rect.fromSummits=function(a,s,l){var u=a.distanceTo(s),d=a.distanceTo(l),h=s.minus(a),c=Math.atan(h.y/h.x);return h.x<0?c+=Math.PI:h.y<0&&(c+=2*Math.PI),new i.Rect(a.x,a.y,u,d,c/Math.PI*180)},i.Rect.prototype={clone:function(){return new i.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new i.Point(this.x,this.y)},getBottomRight:function(){return new i.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new i.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new i.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new i.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new i.Point(this.width,this.height)},equals:function(a){return a instanceof i.Rect&&this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height&&this.degrees===a.degrees},times:function(a){return new i.Rect(this.x*a,this.y*a,this.width*a,this.height*a,this.degrees)},translate:function(a){return new i.Rect(this.x+a.x,this.y+a.y,this.width,this.height,this.degrees)},union:function(a){var s=this.getBoundingBox(),l=a.getBoundingBox(),u=Math.min(s.x,l.x),d=Math.min(s.y,l.y),h=Math.max(s.x+s.width,l.x+l.width),c=Math.max(s.y+s.height,l.y+l.height);return new i.Rect(u,d,h-u,c-d)},intersection:function(a){var s=1e-10,l=[],u=this.getTopLeft();a.containsPoint(u,s)&&l.push(u);var d=this.getTopRight();a.containsPoint(d,s)&&l.push(d);var h=this.getBottomLeft();a.containsPoint(h,s)&&l.push(h);var c=this.getBottomRight();a.containsPoint(c,s)&&l.push(c);var g=a.getTopLeft();this.containsPoint(g,s)&&l.push(g);var v=a.getTopRight();this.containsPoint(v,s)&&l.push(v);var y=a.getBottomLeft();this.containsPoint(y,s)&&l.push(y);var w=a.getBottomRight();this.containsPoint(w,s)&&l.push(w);for(var _=this._getSegments(),b=a._getSegments(),C=0;C<_.length;C++)for(var A=_[C],z=0;z<b.length;z++){var H=b[z],ae=Q(A[0],A[1],H[0],H[1]);ae&&l.push(ae)}function Q(ue,de,Pe,ze){var k=de.minus(ue),oe=ze.minus(Pe),me=-oe.x*k.y+k.x*oe.y;if(me===0)return null;var Le=(k.x*(ue.y-Pe.y)-k.y*(ue.x-Pe.x))/me,L=(oe.x*(ue.y-Pe.y)-oe.y*(ue.x-Pe.x))/me;return-1e-10<=Le&&Le<=1-s&&-1e-10<=L&&L<=1-s?new i.Point(ue.x+L*k.x,ue.y+L*k.y):null}if(l.length===0)return null;for(var U=l[0].x,pe=l[0].x,ye=l[0].y,ge=l[0].y,Ge=1;Ge<l.length;Ge++){var ce=l[Ge];ce.x<U&&(U=ce.x),ce.x>pe&&(pe=ce.x),ce.y<ye&&(ye=ce.y),ce.y>ge&&(ge=ce.y)}return new i.Rect(U,ye,pe-U,ge-ye)},_getSegments:function(){var a=this.getTopLeft(),s=this.getTopRight(),l=this.getBottomLeft(),u=this.getBottomRight();return[[a,s],[s,u],[u,l],[l,a]]},rotate:function(a,s){if(a=i.positiveModulo(a,360),a===0)return this.clone();s=s||this.getCenter();var l=this.getTopLeft().rotate(a,s),u=this.getTopRight().rotate(a,s),d=u.minus(l);d=d.apply(function(c){var g=1e-15;return Math.abs(c)<g?0:c});var h=Math.atan(d.y/d.x);return d.x<0?h+=Math.PI:d.y<0&&(h+=2*Math.PI),new i.Rect(l.x,l.y,this.width,this.height,h/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var a=this.getTopLeft(),s=this.getTopRight(),l=this.getBottomLeft(),u=this.getBottomRight(),d=Math.min(a.x,s.x,l.x,u.x),h=Math.max(a.x,s.x,l.x,u.x),c=Math.min(a.y,s.y,l.y,u.y),g=Math.max(a.y,s.y,l.y,u.y);return new i.Rect(d,c,h-d,g-c)},getIntegerBoundingBox:function(){var a=this.getBoundingBox(),s=Math.floor(a.x),l=Math.floor(a.y),u=Math.ceil(a.width+a.x-s),d=Math.ceil(a.height+a.y-l);return new i.Rect(s,l,u,d)},containsPoint:function(a,s){s=s||0;var l=this.getTopLeft(),u=this.getTopRight(),d=this.getBottomLeft(),h=u.minus(l),c=d.minus(l);return(a.x-l.x)*h.x+(a.y-l.y)*h.y>=-s&&(a.x-u.x)*h.x+(a.y-u.y)*h.y<=s&&(a.x-l.x)*c.x+(a.y-l.y)*c.y>=-s&&(a.x-d.x)*c.x+(a.y-d.y)*c.y<=s},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(p),function(i){var a={};i.ReferenceStrip=function(y){var w=this,_=y.viewer,b=i.getElementSize(_.element),C,A,z;for(y.id||(y.id="referencestrip-"+i.now(),this.element=i.makeNeutralElement("div"),this.element.id=y.id,this.element.className="referencestrip"),y=i.extend(!0,{sizeRatio:i.DEFAULT_SETTINGS.referenceStripSizeRatio,position:i.DEFAULT_SETTINGS.referenceStripPosition,scroll:i.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:i.DEFAULT_SETTINGS.clickTimeThreshold},y,{element:this.element}),i.extend(this,y),a[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,A=this.element.style,A.marginTop="0px",A.marginRight="0px",A.marginBottom="0px",A.marginLeft="0px",A.left="0px",A.bottom="0px",A.border="0px",A.background="#000",A.position="relative",i.setElementTouchActionNone(this.element),i.setElementOpacity(this.element,.8),this.viewer=_,this.tracker=new i.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:i.delegate(this,s),dragHandler:i.delegate(this,l),scrollHandler:i.delegate(this,u),enterHandler:i.delegate(this,h),leaveHandler:i.delegate(this,c),keyDownHandler:i.delegate(this,g),keyHandler:i.delegate(this,v),preProcessEventHandler:function(H){H.eventType==="wheel"&&(H.preventDefault=!0)}}),y.width&&y.height?(this.element.style.width=y.width+"px",this.element.style.height=y.height+"px",_.addControl(this.element,{anchor:i.ControlAnchor.BOTTOM_LEFT})):y.scroll==="horizontal"?(this.element.style.width=b.x*y.sizeRatio*_.tileSources.length+12*_.tileSources.length+"px",this.element.style.height=b.y*y.sizeRatio+"px",_.addControl(this.element,{anchor:i.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=b.y*y.sizeRatio*_.tileSources.length+12*_.tileSources.length+"px",this.element.style.width=b.x*y.sizeRatio+"px",_.addControl(this.element,{anchor:i.ControlAnchor.TOP_LEFT})),this.panelWidth=b.x*this.sizeRatio+8,this.panelHeight=b.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},z=0;z<_.tileSources.length;z++)C=i.makeNeutralElement("div"),C.id=this.element.id+"-"+z,C.style.width=w.panelWidth+"px",C.style.height=w.panelHeight+"px",C.style.display="inline",C.style.float="left",C.style.cssFloat="left",C.style.padding="2px",i.setElementTouchActionNone(C),i.setElementPointerEventsNone(C),this.element.appendChild(C),C.activePanel=!1,this.panels.push(C);d(this,this.scroll==="vertical"?b.y:b.x,0),this.setFocus(0)},i.ReferenceStrip.prototype={setFocus:function(y){var w=this.element.querySelector("#"+this.element.id+"-"+y),_=i.getElementSize(this.viewer.canvas),b=Number(this.element.style.width.replace("px","")),C=Number(this.element.style.height.replace("px","")),A=-Number(this.element.style.marginLeft.replace("px","")),z=-Number(this.element.style.marginTop.replace("px","")),H;this.currentSelected!==w&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=w,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(H=Number(y)*(this.panelWidth+3),H>A+_.x-this.panelWidth?(H=Math.min(H,b-_.x),this.element.style.marginLeft=-H+"px",d(this,_.x,-H)):H<A&&(H=Math.max(0,H-_.x/2),this.element.style.marginLeft=-H+"px",d(this,_.x,-H))):(H=Number(y)*(this.panelHeight+3),H>z+_.y-this.panelHeight?(H=Math.min(H,C-_.y),this.element.style.marginTop=-H+"px",d(this,_.y,-H)):H<z&&(H=Math.max(0,H-_.y/2),this.element.style.marginTop=-H+"px",d(this,_.y,-H))),this.currentPage=y,h.call(this,{eventSource:this.tracker}))},update:function(){return!!a[this.id].animating},destroy:function(){if(this.miniViewers)for(var y in this.miniViewers)this.miniViewers[y].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function s(y){if(y.quick){var w;this.scroll==="horizontal"?w=Math.floor(y.position.x/(this.panelWidth+4)):w=Math.floor(y.position.y/this.panelHeight),this.viewer.goToPage(w)}this.element.focus()}function l(y){if(this.dragging=!0,this.element){var w=Number(this.element.style.marginLeft.replace("px","")),_=Number(this.element.style.marginTop.replace("px","")),b=Number(this.element.style.width.replace("px","")),C=Number(this.element.style.height.replace("px","")),A=i.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-y.delta.x>0?w>-(b-A.x)&&(this.element.style.marginLeft=w+y.delta.x*2+"px",d(this,A.x,w+y.delta.x*2)):-y.delta.x<0&&w<0&&(this.element.style.marginLeft=w+y.delta.x*2+"px",d(this,A.x,w+y.delta.x*2)):-y.delta.y>0?_>-(C-A.y)&&(this.element.style.marginTop=_+y.delta.y*2+"px",d(this,A.y,_+y.delta.y*2)):-y.delta.y<0&&_<0&&(this.element.style.marginTop=_+y.delta.y*2+"px",d(this,A.y,_+y.delta.y*2))}}function u(y){if(this.element){var w=Number(this.element.style.marginLeft.replace("px","")),_=Number(this.element.style.marginTop.replace("px","")),b=Number(this.element.style.width.replace("px","")),C=Number(this.element.style.height.replace("px","")),A=i.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?y.scroll>0?w>-(b-A.x)&&(this.element.style.marginLeft=w-y.scroll*60+"px",d(this,A.x,w-y.scroll*60)):y.scroll<0&&w<0&&(this.element.style.marginLeft=w-y.scroll*60+"px",d(this,A.x,w-y.scroll*60)):y.scroll<0?_>A.y-C&&(this.element.style.marginTop=_+y.scroll*60+"px",d(this,A.y,_+y.scroll*60)):y.scroll>0&&_<0&&(this.element.style.marginTop=_+y.scroll*60+"px",d(this,A.y,_+y.scroll*60)),y.preventDefault=!0}}function d(y,w,_){var b,C,A,z,H,ae;for(y.scroll==="horizontal"?b=y.panelWidth:b=y.panelHeight,C=Math.ceil(w/b)+5,A=Math.ceil((Math.abs(_)+w)/b)+1,C=A-C,C=C<0?0:C,H=C;H<A&&H<y.panels.length;H++)if(ae=y.panels[H],!ae.activePanel){var Q,U=y.viewer.tileSources[H];U.referenceStripThumbnailUrl?Q={type:"image",url:U.referenceStripThumbnailUrl}:Q=U,z=new i.Viewer({id:ae.id,tileSources:[Q],element:ae,navigatorSizeRatio:y.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:y.viewer.loadTilesWithAjax,ajaxHeaders:y.viewer.ajaxHeaders,drawer:"canvas"}),i.setElementPointerEventsNone(z.canvas),i.setElementPointerEventsNone(z.container),z.innerTracker.setTracking(!1),z.outerTracker.setTracking(!1),y.miniViewers[ae.id]=z,ae.activePanel=!0}}function h(y){var w=y.eventSource.element;this.scroll==="horizontal"?w.style.marginBottom="0px":w.style.marginLeft="0px"}function c(y){var w=y.eventSource.element;this.scroll==="horizontal"?w.style.marginBottom="-"+i.getElementSize(w).y/2+"px":w.style.marginLeft="-"+i.getElementSize(w).x/2+"px"}function g(y){if(!y.ctrl&&!y.alt&&!y.meta)switch(y.keyCode){case 38:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),y.preventDefault=!0;break;case 40:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),y.preventDefault=!0;break;case 37:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),y.preventDefault=!0;break;case 39:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),y.preventDefault=!0;break;default:y.preventDefault=!1;break}else y.preventDefault=!1}function v(y){if(!y.ctrl&&!y.alt&&!y.meta)switch(y.keyCode){case 61:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),y.preventDefault=!0;break;case 45:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),y.preventDefault=!0;break;case 48:case 119:case 87:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),y.preventDefault=!0;break;case 115:case 83:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),y.preventDefault=!0;break;case 97:u.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),y.preventDefault=!0;break;case 100:u.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),y.preventDefault=!0;break;default:y.preventDefault=!1;break}else y.preventDefault=!1}}(p),function(i){i.DisplayRect=function(a,s,l,u,d,h){i.Rect.apply(this,[a,s,l,u]),this.minLevel=d,this.maxLevel=h},i.extend(i.DisplayRect.prototype,i.Rect.prototype)}(p),function(i){i.Spring=function(s){var l=arguments;typeof s!="object"&&(s={initial:l.length&&typeof l[0]=="number"?l[0]:void 0,springStiffness:l.length>1?l[1].springStiffness:5,animationTime:l.length>1?l[1].animationTime:1.5}),i.console.assert(typeof s.springStiffness=="number"&&s.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),i.console.assert(typeof s.animationTime=="number"&&s.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),s.exponential&&(this._exponential=!0,delete s.exponential),i.extend(!0,this,s),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:i.now()},i.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},i.Spring.prototype={resetTo:function(s){i.console.assert(!this._exponential||s!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=s,this.start.time=this.target.time=this.current.time=i.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(s){i.console.assert(!this._exponential||s!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=s,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(s){this.start.value+=s,this.target.value+=s,this._exponential&&(i.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(s){this._exponential=s,this._exponential&&(i.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=i.now();let s,l;if(this._exponential?(s=this.start._logValue,l=this.target._logValue):(s=this.start.value,l=this.target.value),this.current.time>=this.target.time)this.current.value=this.target.value;else{let u=s+(l-s)*a(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time));this._exponential?this.current.value=Math.exp(u):this.current.value=u}return this.current.value!==this.target.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function a(s,l){return(1-Math.exp(s*-l))/(1-Math.exp(-s))}}(p),function(i){i.ImageJob=function(s){i.extend(!0,this,{timeout:i.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},s),this.data=null,this.userData={},this.errorMsg=null},i.ImageJob.prototype={start:function(){this.tries++;var s=this,l=this.abort;this.jobId=window.setTimeout(function(){s.finish(null,null,"Image load exceeded timeout ("+s.timeout+" ms)")},this.timeout),this.abort=function(){s.source.downloadTileAbort(s),typeof l=="function"&&l()},this.source.downloadTileStart(this)},finish:function(s,l,u){this.data=s,this.request=l,this.errorMsg=u,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},i.ImageLoader=function(s){i.extend(!0,this,{jobLimit:i.DEFAULT_SETTINGS.imageLoaderLimit,timeout:i.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},s)},i.ImageLoader.prototype={addJob:function(s){if(!s.source){i.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var l=i.TileSource.prototype;s.source={downloadTileStart:l.downloadTileStart,downloadTileAbort:l.downloadTileAbort}}var u=this,d=function(g){a(u,g,s.callback)},h={src:s.src,tile:s.tile||{},source:s.source,loadWithAjax:s.loadWithAjax,ajaxHeaders:s.loadWithAjax?s.ajaxHeaders:null,crossOriginPolicy:s.crossOriginPolicy,ajaxWithCredentials:s.ajaxWithCredentials,postData:s.postData,callback:d,abort:s.abort,timeout:this.timeout},c=new i.ImageJob(h);!this.jobLimit||this.jobsInProgress<this.jobLimit?(c.start(),this.jobsInProgress++):this.jobQueue.push(c)},clear:function(){for(var s=0;s<this.jobQueue.length;s++){var l=this.jobQueue[s];typeof l.abort=="function"&&l.abort()}this.jobQueue=[]}};function a(s,l,u){l.errorMsg!==""&&(l.data===null||l.data===void 0)&&l.tries<1+s.tileRetryMax&&s.failedTiles.push(l);var d;s.jobsInProgress--,(!s.jobLimit||s.jobsInProgress<s.jobLimit)&&s.jobQueue.length>0&&(d=s.jobQueue.shift(),d.start(),s.jobsInProgress++),s.tileRetryMax>0&&s.jobQueue.length===0&&(!s.jobLimit||s.jobsInProgress<s.jobLimit)&&s.failedTiles.length>0&&(d=s.failedTiles.shift(),setTimeout(function(){d.start()},s.tileRetryDelay),s.jobsInProgress++),u(l.data,l.errorMsg,l.request)}}(p),function(i){i.Tile=function(a,s,l,u,d,h,c,g,v,y,w,_){this.level=a,this.x=s,this.y=l,this.bounds=u,this.positionedBounds=new p.Rect(u.x,u.y,u.width,u.height),this.sourceBounds=y,this.exists=d,this._url=h,this.postData=w,this.context2D=c,this.loadWithAjax=g,this.ajaxHeaders=v,_===void 0&&(i.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),_=i.TileSource.prototype.getTileHashKey(a,s,l,h,v,w)),this.cacheKey=_,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},i.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},get image(){return i.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return i.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord&&this.cacheImageRecord.getRenderedContext()},getScaleForEdgeSmoothing:function(){var a;if(this.cacheImageRecord)a=this.cacheImageRecord.getRenderedContext();else if(this.context2D)a=this.context2D;else return i.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return a.canvas.width/(this.size.x*i.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(a,s,l){var u=Math.max(1,Math.ceil((l.x-s.x)/2)),d=Math.max(1,Math.ceil((l.y-s.y)/2));return new i.Point(u,d).minus(this.position.times(i.pixelDensityRatio).times(a||1).apply(function(h){return h%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(p),function(i){i.OverlayPlacement=i.Placement,i.OverlayRotationMode=i.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),i.Overlay=function(a,s,l){var u;i.isPlainObject(a)?u=a:u={element:a,location:s,placement:l},this.elementWrapper=document.createElement("div"),this.element=u.element,this.elementWrapper.appendChild(this.element),this.element.id?this.elementWrapper.id="overlay-wrapper-"+this.element.id:this.elementWrapper.id="overlay-wrapper",this.style=this.elementWrapper.style,this._init(u)},i.Overlay.prototype={_init:function(a){this.location=a.location,this.placement=a.placement===void 0?i.Placement.TOP_LEFT:a.placement,this.onDraw=a.onDraw,this.checkResize=a.checkResize===void 0?!0:a.checkResize,this.width=a.width===void 0?null:a.width,this.height=a.height===void 0?null:a.height,this.rotationMode=a.rotationMode||i.OverlayRotationMode.EXACT,this.location instanceof i.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=i.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new i.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(a,s){var l=i.Placement.properties[this.placement];l&&(l.isHorizontallyCentered?a.x-=s.x/2:l.isRight&&(a.x-=s.x),l.isVerticallyCentered?a.y-=s.y/2:l.isBottom&&(a.y-=s.y))},destroy:function(){var a=this.elementWrapper,s=this.style;a.parentNode&&(a.parentNode.removeChild(a),a.prevElementParent&&(s.display="none",document.body.appendChild(a))),this.onDraw=null,s.top="",s.left="",s.position="",this.width!==null&&(s.width=""),this.height!==null&&(s.height="");var l=i.getCssPropertyWithVendorPrefix("transformOrigin"),u=i.getCssPropertyWithVendorPrefix("transform");l&&u&&(s[l]="",s[u]="")},drawHTML:function(a,s){var l=this.elementWrapper;l.parentNode!==a&&(l.prevElementParent=l.parentNode,l.prevNextSibling=l.nextSibling,a.appendChild(l),this.style.position="absolute",this.size=i.getElementSize(this.elementWrapper));var u=this._getOverlayPositionAndSize(s),d=u.position,h=this.size=u.size,c="";s.overlayPreserveContentDirection&&(c=s.flipped?" scaleX(-1)":" scaleX(1)");var g=s.flipped?-u.rotate:u.rotate,v=s.flipped?" scaleX(-1)":"";if(this.onDraw)this.onDraw(d,h,this.element);else{var y=this.style,w=this.element.style;w.display="block",y.left=d.x+"px",y.top=d.y+"px",this.width!==null&&(w.width=h.x+"px"),this.height!==null&&(w.height=h.y+"px");var _=i.getCssPropertyWithVendorPrefix("transformOrigin"),b=i.getCssPropertyWithVendorPrefix("transform");_&&b&&(g&&!s.flipped?(w[b]="",y[_]=this._getTransformOrigin(),y[b]="rotate("+g+"deg)"):!g&&s.flipped?(w[b]=c,y[_]=this._getTransformOrigin(),y[b]=v):g&&s.flipped?(w[b]=c,y[_]=this._getTransformOrigin(),y[b]="rotate("+g+"deg)"+v):(w[b]="",y[_]="",y[b]="")),y.display="flex"}},_getOverlayPositionAndSize:function(a){var s=a.pixelFromPoint(this.location,!0),l=this._getSizeInPixels(a);this.adjust(s,l);var u=0;if(a.getRotation(!0)&&this.rotationMode!==i.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===i.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var d=new i.Rect(s.x,s.y,l.x,l.y),h=this._getBoundingBox(d,a.getRotation(!0));s=h.getTopLeft(),l=h.getSize()}else u=a.getRotation(!0);return a.flipped&&(s.x=a.getContainerSize().x-s.x),{position:s,size:l,rotate:u}},_getSizeInPixels:function(a){var s=this.size.x,l=this.size.y;if(this.width!==null||this.height!==null){var u=a.deltaPixelsFromPointsNoRotate(new i.Point(this.width||0,this.height||0),!0);this.width!==null&&(s=u.x),this.height!==null&&(l=u.y)}if(this.checkResize&&(this.width===null||this.height===null)){var d=this.size=i.getElementSize(this.elementWrapper);this.width===null&&(s=d.x),this.height===null&&(l=d.y)}return new i.Point(s,l)},_getBoundingBox:function(a,s){var l=this._getPlacementPoint(a);return a.rotate(s,l).getBoundingBox()},_getPlacementPoint:function(a){var s=new i.Point(a.x,a.y),l=i.Placement.properties[this.placement];return l&&(l.isHorizontallyCentered?s.x+=a.width/2:l.isRight&&(s.x+=a.width),l.isVerticallyCentered?s.y+=a.height/2:l.isBottom&&(s.y+=a.height)),s},_getTransformOrigin:function(){var a="",s=i.Placement.properties[this.placement];return s&&(s.isLeft?a="left":s.isRight&&(a="right"),s.isTop?a+=" top":s.isBottom&&(a+=" bottom")),a},update:function(a,s){var l=i.isPlainObject(a)?a:{location:a,placement:s};this._init({location:l.location||this.location,placement:l.placement!==void 0?l.placement:this.placement,onDraw:l.onDraw||this.onDraw,checkResize:l.checkResize||this.checkResize,width:l.width!==void 0?l.width:this.width,height:l.height!==void 0?l.height:this.height,rotationMode:l.rotationMode||this.rotationMode})},getBounds:function(a){i.console.assert(a,"A viewport must now be passed to Overlay.getBounds.");var s=this.width,l=this.height;if(s===null||l===null){var u=a.deltaPointsFromPixelsNoRotate(this.size,!0);s===null&&(s=u.x),l===null&&(l=u.y)}var d=this.location.clone();return this.adjust(d,new i.Point(s,l)),this._adjustBoundsForRotation(a,new i.Rect(d.x,d.y,s,l))},_adjustBoundsForRotation:function(a,s){if(!a||a.getRotation(!0)===0||this.rotationMode===i.OverlayRotationMode.EXACT)return s;if(this.rotationMode===i.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return s;var l=this._getOverlayPositionAndSize(a);return a.viewerElementToViewportRectangle(new i.Rect(l.position.x,l.position.y,l.size.x,l.size.y))}return s.rotate(-a.getRotation(!0),this._getPlacementPoint(s))}}}(p),function(i){const a=i;a.DrawerBase=class{constructor(l){i.console.assert(l.viewer,"[Drawer] options.viewer is required"),i.console.assert(l.viewport,"[Drawer] options.viewport is required"),i.console.assert(l.element,"[Drawer] options.element is required"),this.viewer=l.viewer,this.viewport=l.viewport,this.debugGridColor=typeof l.debugGridColor=="string"?[l.debugGridColor]:l.debugGridColor||i.DEFAULT_SETTINGS.debugGridColor,this.options=l.options||{},this.container=i.getElement(l.element),this._renderingTarget=this._createDrawingElement(),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",this.canvas.style.left="0",i.setElementOpacity(this.canvas,this.viewer.opacity,!0),i.setElementPointerEventsNone(this.canvas),i.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._checkForAPIOverrides()}get canvas(){return this._renderingTarget}get element(){return i.console.error("Drawer.element is deprecated. Use Drawer.container instead."),this.container}getType(){i.console.error("Drawer.getType must be implemented by child class")}static isSupported(){i.console.error("Drawer.isSupported must be implemented by child class")}_createDrawingElement(){return i.console.error("Drawer._createDrawingElement must be implemented by child class"),null}draw(l){i.console.error("Drawer.draw must be implemented by child class")}canRotate(){i.console.error("Drawer.canRotate must be implemented by child class")}destroy(){i.console.error("Drawer.destroy must be implemented by child class")}minimumOverlapRequired(l){return!1}setImageSmoothingEnabled(l){i.console.error("Drawer.setImageSmoothingEnabled must be implemented by child class")}drawDebuggingRect(l){i.console.warn("[drawer].drawDebuggingRect is not implemented by this drawer")}clear(){i.console.warn("[drawer].clear() is deprecated. The drawer is responsible for clearing itself as needed before drawing tiles.")}_checkForAPIOverrides(){if(this._createDrawingElement===i.DrawerBase.prototype._createDrawingElement)throw new Error("[drawer]._createDrawingElement must be implemented by child class");if(this.draw===i.DrawerBase.prototype.draw)throw new Error("[drawer].draw must be implemented by child class");if(this.canRotate===i.DrawerBase.prototype.canRotate)throw new Error("[drawer].canRotate must be implemented by child class");if(this.destroy===i.DrawerBase.prototype.destroy)throw new Error("[drawer].destroy must be implemented by child class");if(this.setImageSmoothingEnabled===i.DrawerBase.prototype.setImageSmoothingEnabled)throw new Error("[drawer].setImageSmoothingEnabled must be implemented by child class")}viewportToDrawerRectangle(l){var u=this.viewport.pixelFromPointNoRotate(l.getTopLeft(),!0),d=this.viewport.deltaPixelsFromPointsNoRotate(l.getSize(),!0);return new i.Rect(u.x*i.pixelDensityRatio,u.y*i.pixelDensityRatio,d.x*i.pixelDensityRatio,d.y*i.pixelDensityRatio)}viewportCoordToDrawerCoord(l){var u=this.viewport.pixelFromPointNoRotate(l,!0);return new i.Point(u.x*i.pixelDensityRatio,u.y*i.pixelDensityRatio)}_calculateCanvasSize(){var l=i.pixelDensityRatio,u=this.viewport.getContainerSize();return new a.Point(Math.round(u.x*l),Math.round(u.y*l))}_raiseTiledImageDrawnEvent(l,u){this.viewer&&this.viewer.raiseEvent("tiled-image-drawn",{tiledImage:l,tiles:u})}_raiseDrawerErrorEvent(l,u){this.viewer&&this.viewer.raiseEvent("drawer-error",{tiledImage:l,drawer:this,error:u})}}}(p),function(i){const a=i;class s extends a.DrawerBase{constructor(u){super(u),this.viewer.rejectEventHandler("tile-drawing","The HTMLDrawer does not raise the tile-drawing event"),this.viewer.allowEventHandler("tile-drawn")}static isSupported(){return!0}getType(){return"html"}minimumOverlapRequired(u){return!0}_createDrawingElement(){return i.makeNeutralElement("div")}draw(u){var d=this;this._prepareNewFrame(),u.forEach(function(h){h.opacity!==0&&d._drawTiles(h)})}canRotate(){return!1}destroy(){this.container.removeChild(this.canvas)}setImageSmoothingEnabled(){}_prepareNewFrame(){this.canvas.innerHTML=""}_drawTiles(u){var d=u.getTilesToDraw().map(g=>g.tile);if(!(u.opacity===0||d.length===0&&!u.placeholderFillStyle))for(var h=d.length-1;h>=0;h--){var c=d[h];this._drawTile(c),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:u,tile:c})}}_drawTile(u){i.console.assert(u,"[Drawer._drawTile] tile is required");let d=this.canvas;if(!u.cacheImageRecord){i.console.warn("[Drawer._drawTileToHTML] attempting to draw tile %s when it's not cached",u.toString());return}if(!u.loaded){i.console.warn("Attempting to draw tile %s when it's not yet loaded.",u.toString());return}if(!u.element){var h=u.getImage();if(!h)return;u.element=i.makeNeutralElement("div"),u.imgElement=h.cloneNode(),u.imgElement.style.msInterpolationMode="nearest-neighbor",u.imgElement.style.width="100%",u.imgElement.style.height="100%",u.style=u.element.style,u.style.position="absolute"}u.element.parentNode!==d&&d.appendChild(u.element),u.imgElement.parentNode!==u.element&&u.element.appendChild(u.imgElement),u.style.top=u.position.y+"px",u.style.left=u.position.x+"px",u.style.height=u.size.y+"px",u.style.width=u.size.x+"px",u.flipped&&(u.style.transform="scaleX(-1)"),i.setElementOpacity(u.element,u.opacity)}}i.HTMLDrawer=s}(p),function(i){const a=i;class s extends a.DrawerBase{constructor(g){super(g),this.context=this.canvas.getContext("2d"),this.sketchCanvas=null,this.sketchContext=null,this._imageSmoothingEnabled=!0,this.viewer.allowEventHandler("tile-drawn"),this.viewer.allowEventHandler("tile-drawing")}static isSupported(){return i.supportsCanvas}getType(){return"canvas"}_createDrawingElement(){let g=i.makeNeutralElement("canvas"),v=this._calculateCanvasSize();return g.width=v.x,g.height=v.y,g}draw(g){this._prepareNewFrame(),this.viewer.viewport.getFlip()!==this._viewportFlipped&&this._flip();for(const v of g)v.opacity!==0&&this._drawTiles(v)}canRotate(){return!0}destroy(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null,this.container.removeChild(this.canvas)}minimumOverlapRequired(g){return!0}setImageSmoothingEnabled(g){this._imageSmoothingEnabled=!!g,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw()}drawDebuggingRect(g){var v=this.context;v.save(),v.lineWidth=2*i.pixelDensityRatio,v.strokeStyle=this.debugGridColor[0],v.fillStyle=this.debugGridColor[0],v.strokeRect(g.x*i.pixelDensityRatio,g.y*i.pixelDensityRatio,g.width*i.pixelDensityRatio,g.height*i.pixelDensityRatio),v.restore()}get _viewportFlipped(){return this.context.getTransform().a<0}_raiseTileDrawingEvent(g,v,y,w){this.viewer.raiseEvent("tile-drawing",{tiledImage:g,context:v,tile:y,rendered:w})}_prepareNewFrame(){var g=this._calculateCanvasSize();if((this.canvas.width!==g.x||this.canvas.height!==g.y)&&(this.canvas.width=g.x,this.canvas.height=g.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var v=this._calculateSketchCanvasSize();this.sketchCanvas.width=v.x,this.sketchCanvas.height=v.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}_clear(g,v){var y=this._getContext(g);if(v)y.clearRect(v.x,v.y,v.width,v.height);else{var w=y.canvas;y.clearRect(0,0,w.width,w.height)}}_drawTiles(g){var v=g.getTilesToDraw().map(ue=>ue.tile);if(!(g.opacity===0||v.length===0&&!g.placeholderFillStyle)){var y=v[0],w;y&&(w=g.opacity<1||g.compositeOperation&&g.compositeOperation!=="source-over"||!g._isBottomItem()&&g.source.hasTransparency(y.context2D,y.getUrl(),y.ajaxHeaders,y.postData));var _,b,C=this.viewport.getZoom(!0),A=g.viewportToImageZoom(C);v.length>1&&A>g.smoothTileEdgesMinZoom&&!g.iOSDevice&&g.getRotation(!0)%360===0&&(w=!0,_=y.getScaleForEdgeSmoothing(),b=y.getTranslationForEdgeSmoothing(_,this._getCanvasSize(!1),this._getCanvasSize(!0)));var z;w&&(_||(z=this.viewport.viewportToViewerElementRectangle(g.getClippedBounds(!0)).getIntegerBoundingBox(),z=z.times(i.pixelDensityRatio)),this._clear(!0,z)),_||this._setRotations(g,w);var H=!1;if(g._clip){this._saveContext(w);var ae=g.imageToViewportRectangle(g._clip,!0);ae=ae.rotate(-g.getRotation(!0),g._getRotationPoint(!0));var Q=this.viewportToDrawerRectangle(ae);_&&(Q=Q.times(_)),b&&(Q=Q.translate(b)),this._setClip(Q,w),H=!0}if(g._croppingPolygons){var U=this;H||this._saveContext(w);try{var pe=g._croppingPolygons.map(function(ue){return ue.map(function(de){var Pe=g.imageToViewportCoordinates(de.x,de.y,!0).rotate(-g.getRotation(!0),g._getRotationPoint(!0)),ze=U.viewportCoordToDrawerCoord(Pe);return _&&(ze=ze.times(_)),b&&(ze=ze.plus(b)),ze})});this._clipWithPolygons(pe,w)}catch(ue){i.console.error(ue)}H=!0}if(g._hasOpaqueTile=!1,g.placeholderFillStyle&&g._hasOpaqueTile===!1){let ue=this.viewportToDrawerRectangle(g.getBoundsNoRotate(!0));_&&(ue=ue.times(_)),b&&(ue=ue.translate(b));let de=null;typeof g.placeholderFillStyle=="function"?de=g.placeholderFillStyle(g,this.context):de=g.placeholderFillStyle,this._drawRectangle(ue,de,w)}var ye=h(g.subPixelRoundingForTransparency),ge=!1;if(ye===i.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)ge=!0;else if(ye===i.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){var Ge=this.viewer&&this.viewer.isAnimating();ge=!Ge}for(var ce=0;ce<v.length;ce++)y=v[ce],this._drawTile(y,g,w,_,b,ge,g.source),this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:g,tile:y});H&&this._restoreContext(w),_||(g.getRotation(!0)%360!==0&&this._restoreRotationChanges(w),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(w)),w&&(_&&this._setRotations(g),this.blendSketch({opacity:g.opacity,scale:_,translate:b,compositeOperation:g.compositeOperation,bounds:z}),_&&(g.getRotation(!0)%360!==0&&this._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(!1))),this._drawDebugInfo(g,v),this._raiseTiledImageDrawnEvent(g,v)}}_drawDebugInfo(g,v){if(g.debugMode)for(var y=v.length-1;y>=0;y--){var w=v[y];try{this._drawDebugInfoOnTile(w,v.length,y,g)}catch(_){i.console.error(_)}}}_clipWithPolygons(g,v){var y=this._getContext(v);y.beginPath();for(const w of g)for(const[_,b]of w.entries())y[_===0?"moveTo":"lineTo"](b.x,b.y);y.clip()}_drawTile(g,v,y,w,_,b,C){i.console.assert(g,"[Drawer._drawTile] tile is required"),i.console.assert(v,"[Drawer._drawTile] drawingHandler is required");var A=this._getContext(y);w=w||1,this._drawTileToCanvas(g,A,v,w,_,b,C)}_drawTileToCanvas(g,v,y,w,_,b,C){var A=g.position.times(i.pixelDensityRatio),z=g.size.times(i.pixelDensityRatio),H;if(!g.context2D&&!g.cacheImageRecord){i.console.warn("[Drawer._drawTileToCanvas] attempting to draw tile %s when it's not cached",g.toString());return}if(H=g.getCanvasContext(),!g.loaded||!H){i.console.warn("Attempting to draw tile %s when it's not yet loaded.",g.toString());return}v.save(),typeof w=="number"&&w!==1&&(A=A.times(w),z=z.times(w)),_ instanceof i.Point&&(A=A.plus(_)),v.globalAlpha===1&&g.hasTransparency&&(b&&(A.x=Math.round(A.x),A.y=Math.round(A.y),z.x=Math.round(z.x),z.y=Math.round(z.y)),v.clearRect(A.x,A.y,z.x,z.y)),this._raiseTileDrawingEvent(y,v,g,H);var ae,Q;g.sourceBounds?(ae=Math.min(g.sourceBounds.width,H.canvas.width),Q=Math.min(g.sourceBounds.height,H.canvas.height)):(ae=H.canvas.width,Q=H.canvas.height),v.translate(A.x+z.x/2,0),g.flipped&&v.scale(-1,1),v.drawImage(H.canvas,0,0,ae,Q,-z.x/2,A.y,z.x,z.y),v.restore()}_getContext(g){var v=this.context;if(g){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var y=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=y.x,this.sketchCanvas.height=y.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var w=this;this.viewer.addHandler("rotate",function _(){if(w.viewport.getRotation()!==0){w.viewer.removeHandler("rotate",_);var b=w._calculateSketchCanvasSize();w.sketchCanvas.width=b.x,w.sketchCanvas.height=b.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}v=this.sketchContext}return v}_saveContext(g){this._getContext(g).save()}_restoreContext(g){this._getContext(g).restore()}_setClip(g,v){var y=this._getContext(v);y.beginPath(),y.rect(g.x,g.y,g.width,g.height),y.clip()}_drawRectangle(g,v,y){var w=this._getContext(y);w.save(),w.fillStyle=v,w.fillRect(g.x,g.y,g.width,g.height),w.restore()}blendSketch(g,v,y,w){var _=g;i.isPlainObject(_)||(_={opacity:g,scale:v,translate:y,compositeOperation:w}),g=_.opacity,w=_.compositeOperation;var b=_.bounds;if(this.context.save(),this.context.globalAlpha=g,w&&(this.context.globalCompositeOperation=w),b)b.x<0&&(b.width+=b.x,b.x=0),b.x+b.width>this.canvas.width&&(b.width=this.canvas.width-b.x),b.y<0&&(b.height+=b.y,b.y=0),b.y+b.height>this.canvas.height&&(b.height=this.canvas.height-b.y),this.context.drawImage(this.sketchCanvas,b.x,b.y,b.width,b.height,b.x,b.y,b.width,b.height);else{v=_.scale||1,y=_.translate;var C=y instanceof i.Point?y:new i.Point(0,0),A=0,z=0;if(y){var H=this.sketchCanvas.width-this.canvas.width,ae=this.sketchCanvas.height-this.canvas.height;A=Math.round(H/2),z=Math.round(ae/2)}this.context.drawImage(this.sketchCanvas,C.x-A*v,C.y-z*v,(this.canvas.width+2*A)*v,(this.canvas.height+2*z)*v,-A,-z,this.canvas.width+2*A,this.canvas.height+2*z)}this.context.restore()}_drawDebugInfoOnTile(g,v,y,w){var _=this.viewer.world.getIndexOfItem(w)%this.debugGridColor.length,b=this.context;b.save(),b.lineWidth=2*i.pixelDensityRatio,b.font="small-caps bold "+13*i.pixelDensityRatio+"px arial",b.strokeStyle=this.debugGridColor[_],b.fillStyle=this.debugGridColor[_],this._setRotations(w),this._viewportFlipped&&this._flip({point:g.position.plus(g.size.divide(2))}),b.strokeRect(g.position.x*i.pixelDensityRatio,g.position.y*i.pixelDensityRatio,g.size.x*i.pixelDensityRatio,g.size.y*i.pixelDensityRatio);var C=(g.position.x+g.size.x/2)*i.pixelDensityRatio,A=(g.position.y+g.size.y/2)*i.pixelDensityRatio;b.translate(C,A);const z=this.viewport.getRotation(!0);b.rotate(Math.PI/180*-z),b.translate(-C,-A),g.x===0&&g.y===0&&(b.fillText("Zoom: "+this.viewport.getZoom(),g.position.x*i.pixelDensityRatio,(g.position.y-30)*i.pixelDensityRatio),b.fillText("Pan: "+this.viewport.getBounds().toString(),g.position.x*i.pixelDensityRatio,(g.position.y-20)*i.pixelDensityRatio)),b.fillText("Level: "+g.level,(g.position.x+10)*i.pixelDensityRatio,(g.position.y+20)*i.pixelDensityRatio),b.fillText("Column: "+g.x,(g.position.x+10)*i.pixelDensityRatio,(g.position.y+30)*i.pixelDensityRatio),b.fillText("Row: "+g.y,(g.position.x+10)*i.pixelDensityRatio,(g.position.y+40)*i.pixelDensityRatio),b.fillText("Order: "+y+" of "+v,(g.position.x+10)*i.pixelDensityRatio,(g.position.y+50)*i.pixelDensityRatio),b.fillText("Size: "+g.size.toString(),(g.position.x+10)*i.pixelDensityRatio,(g.position.y+60)*i.pixelDensityRatio),b.fillText("Position: "+g.position.toString(),(g.position.x+10)*i.pixelDensityRatio,(g.position.y+70)*i.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),w.getRotation(!0)%360!==0&&this._restoreRotationChanges(),b.restore()}_updateImageSmoothingEnabled(g){g.msImageSmoothingEnabled=this._imageSmoothingEnabled,g.imageSmoothingEnabled=this._imageSmoothingEnabled}_getCanvasSize(g){var v=this._getContext(g).canvas;return new i.Point(v.width,v.height)}_getCanvasCenter(){return new i.Point(this.canvas.width/2,this.canvas.height/2)}_setRotations(g,v=!1){var y=!1;this.viewport.getRotation(!0)%360!==0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:v,saveContext:y}),y=!1),g.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:g.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(g._getRotationPoint(!0),!0),useSketch:v,saveContext:y})}_offsetForRotation(g){var v=g.point?g.point.times(i.pixelDensityRatio):this._getCanvasCenter(),y=this._getContext(g.useSketch);y.save(),y.translate(v.x,v.y),y.rotate(Math.PI/180*g.degrees),y.translate(-v.x,-v.y)}_flip(g){g=g||{};var v=g.point?g.point.times(i.pixelDensityRatio):this._getCanvasCenter(),y=this._getContext(g.useSketch);y.translate(v.x,0),y.scale(-1,1),y.translate(-v.x,0)}_restoreRotationChanges(g){var v=this._getContext(g);v.restore()}_calculateCanvasSize(){var g=i.pixelDensityRatio,v=this.viewport.getContainerSize();return{x:Math.round(v.x*g),y:Math.round(v.y*g)}}_calculateSketchCanvasSize(){var g=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return g;var v=Math.ceil(Math.sqrt(g.x*g.x+g.y*g.y));return{x:v,y:v}}}i.CanvasDrawer=s;var l=i.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function u(c){return c!==i.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&c!==i.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&c!==i.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function d(c){return u(c)?l:c}function h(c){if(typeof c=="number")return d(c);if(!c||!i.Browser)return l;var g=c[i.Browser.vendor];return u(g)&&(g=c["*"]),d(g)}}(p),function(i){const a=i;a.WebGLDrawer=class extends a.DrawerBase{constructor(l){super(l),this._destroyed=!1,this._TextureMap=new Map,this._TileMap=new Map,this._gl=null,this._firstPass=null,this._secondPass=null,this._glFrameBuffer=null,this._renderToTexture=null,this._glFramebufferToCanvasTransform=null,this._outputCanvas=null,this._outputContext=null,this._clippingCanvas=null,this._clippingContext=null,this._renderingCanvas=null,this._backupCanvasDrawer=null,this._imageSmoothingEnabled=!0,this._boundToTileReady=u=>this._tileReadyHandler(u),this._boundToImageUnloaded=u=>this._imageUnloadedHandler(u),this.viewer.addHandler("tile-ready",this._boundToTileReady),this.viewer.addHandler("image-unloaded",this._boundToImageUnloaded),this.viewer.rejectEventHandler("tile-drawn","The WebGLDrawer does not raise the tile-drawn event"),this.viewer.rejectEventHandler("tile-drawing","The WebGLDrawer does not raise the tile-drawing event"),this._setupCanvases(),this._setupRenderer(),this.context=this._outputContext}destroy(){if(this._destroyed)return;let l=this._gl;var u=l.getParameter(l.MAX_TEXTURE_IMAGE_UNITS);for(let h=0;h<u;++h)l.activeTexture(l.TEXTURE0+h),l.bindTexture(l.TEXTURE_2D,null),l.bindTexture(l.TEXTURE_CUBE_MAP,null);l.bindBuffer(l.ARRAY_BUFFER,null),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null),l.bindRenderbuffer(l.RENDERBUFFER,null),l.bindFramebuffer(l.FRAMEBUFFER,null),this._unloadTextures(),l.deleteBuffer(this._secondPass.bufferOutputPosition),l.deleteFramebuffer(this._glFrameBuffer),this._renderingCanvas.width=this._renderingCanvas.height=1,this._clippingCanvas.width=this._clippingCanvas.height=1,this._outputCanvas.width=this._outputCanvas.height=1,this._renderingCanvas=null,this._clippingCanvas=this._clippingContext=null,this._outputCanvas=this._outputContext=null;let d=l.getExtension("WEBGL_lose_context");d&&d.loseContext(),this.viewer.removeHandler("tile-ready",this._boundToTileReady),this.viewer.removeHandler("image-unloaded",this._boundToImageUnloaded),this.viewer.removeHandler("resize",this._resizeHandler),this._gl=null,this._backupCanvasDrawer&&(this._backupCanvasDrawer.destroy(),this._backupCanvasDrawer=null),this.container.removeChild(this.canvas),this.viewer.drawer===this&&(this.viewer.drawer=null),this._destroyed=!0}canRotate(){return!0}static isSupported(){let l=document.createElement("canvas"),u=i.isFunction(l.getContext)&&l.getContext("webgl"),d=u&&u.getExtension("WEBGL_lose_context");return d&&d.loseContext(),!!u}getType(){return"webgl"}minimumOverlapRequired(l){return l.isTainted()}_createDrawingElement(){let l=i.makeNeutralElement("canvas"),u=this._calculateCanvasSize();return l.width=u.x,l.height=u.y,l}_getBackupCanvasDrawer(){return this._backupCanvasDrawer||(this._backupCanvasDrawer=this.viewer.requestDrawer("canvas",{mainDrawer:!1}),this._backupCanvasDrawer.canvas.style.setProperty("visibility","hidden")),this._backupCanvasDrawer}draw(l){let u=this._gl;const d=this.viewport.getBoundsNoRotateWithMargins(!0);let h={bounds:d,center:new a.Point(d.x+d.width/2,d.y+d.height/2),rotation:this.viewport.getRotation(!0)*Math.PI/180},c=this.viewport.flipped?-1:1,g=i.Mat3.makeTranslation(-h.center.x,-h.center.y),v=i.Mat3.makeScaling(2/h.bounds.width*c,-2/h.bounds.height),y=i.Mat3.makeRotation(-h.rotation),w=v.multiply(y).multiply(g);u.bindFramebuffer(u.FRAMEBUFFER,null),u.clear(u.COLOR_BUFFER_BIT),this._outputContext.clearRect(0,0,this._outputCanvas.width,this._outputCanvas.height);let _=!1;l.forEach((b,C)=>{if(b.isTainted()){_&&(this._outputContext.drawImage(this._renderingCanvas,0,0),u.bindFramebuffer(u.FRAMEBUFFER,null),u.clear(u.COLOR_BUFFER_BIT),_=!1);const A=this._getBackupCanvasDrawer();A.draw([b]),this._outputContext.drawImage(A.canvas,0,0)}else{let A=b.getTilesToDraw();if(b.placeholderFillStyle&&b._hasOpaqueTile===!1&&this._drawPlaceholder(b),A.length===0||b.getOpacity()===0)return;let z=A[0],H=b.compositeOperation||this.viewer.compositeOperation||b._clip||b._croppingPolygons||b.debugMode,ae=H||b.opacity<1||z.hasTransparency;H&&(_&&this._outputContext.drawImage(this._renderingCanvas,0,0),u.bindFramebuffer(u.FRAMEBUFFER,null),u.clear(u.COLOR_BUFFER_BIT)),u.useProgram(this._firstPass.shaderProgram),ae?(u.bindFramebuffer(u.FRAMEBUFFER,this._glFrameBuffer),u.clear(u.COLOR_BUFFER_BIT)):u.bindFramebuffer(u.FRAMEBUFFER,null);let Q=w,U=b.getRotation(!0);if(U%360!==0){let ue=i.Mat3.makeRotation(-U*Math.PI/180),de=b.getBoundsNoRotate(!0).getCenter(),Pe=i.Mat3.makeTranslation(de.x,de.y),ze=i.Mat3.makeTranslation(-de.x,-de.y),k=Pe.multiply(ue).multiply(ze);Q=w.multiply(k)}let pe=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS);if(pe<=0)throw new Error(`WegGL error: bad value for gl parameter MAX_TEXTURE_IMAGE_UNITS (${pe}). This could happen
                        if too many contexts have been created and not released, or there is another problem with the graphics card.`);let ye=new Float32Array(pe*12),ge=new Array(pe),Ge=new Array(pe),ce=new Array(pe);for(let ue=0;ue<A.length;ue++){let de=A[ue].tile,Pe=ue%pe,ze=Pe+1,k=de.getCanvasContext(),oe=k?this._TextureMap.get(k.canvas):null;if(oe||(this._tileReadyHandler({tile:de,tiledImage:b}),oe=k?this._TextureMap.get(k.canvas):null),oe&&this._getTileData(de,b,oe,Q,Pe,ye,ge,Ge,ce),ze===pe||ue===A.length-1){for(let me=0;me<=ze;me++)u.activeTexture(u.TEXTURE0+me),u.bindTexture(u.TEXTURE_2D,ge[me]);u.bindBuffer(u.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),u.bufferData(u.ARRAY_BUFFER,ye,u.DYNAMIC_DRAW),Ge.forEach((me,Le)=>{u.uniformMatrix3fv(this._firstPass.uTransformMatrices[Le],!1,me)}),u.uniform1fv(this._firstPass.uOpacities,new Float32Array(ce)),u.bindBuffer(u.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),u.vertexAttribPointer(this._firstPass.aOutputPosition,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),u.vertexAttribPointer(this._firstPass.aTexturePosition,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,this._firstPass.bufferIndex),u.vertexAttribPointer(this._firstPass.aIndex,1,u.FLOAT,!1,0,0),u.drawArrays(u.TRIANGLES,0,6*ze)}}ae&&(u.useProgram(this._secondPass.shaderProgram),u.bindFramebuffer(u.FRAMEBUFFER,null),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,this._renderToTexture),this._gl.uniform1f(this._secondPass.uOpacityMultiplier,b.opacity),u.bindBuffer(u.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),u.vertexAttribPointer(this._secondPass.aTexturePosition,2,u.FLOAT,!1,0,0),u.bindBuffer(u.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),u.vertexAttribPointer(this._secondPass.aOutputPosition,2,u.FLOAT,!1,0,0),u.drawArrays(u.TRIANGLES,0,6)),_=!0,H&&(this._applyContext2dPipeline(b,A,C),_=!1,u.bindFramebuffer(u.FRAMEBUFFER,null),u.clear(u.COLOR_BUFFER_BIT)),C===0&&this._raiseTiledImageDrawnEvent(b,A.map(ue=>ue.tile))}}),_&&this._outputContext.drawImage(this._renderingCanvas,0,0)}setImageSmoothingEnabled(l){this._imageSmoothingEnabled!==l&&(this._imageSmoothingEnabled=l,this._unloadTextures(),this.viewer.world.draw())}drawDebuggingRect(l){let u=this._outputContext;u.save(),u.lineWidth=2*i.pixelDensityRatio,u.strokeStyle=this.debugGridColor[0],u.fillStyle=this.debugGridColor[0],u.strokeRect(l.x*i.pixelDensityRatio,l.y*i.pixelDensityRatio,l.width*i.pixelDensityRatio,l.height*i.pixelDensityRatio),u.restore()}_getTextureDataFromTile(l){return l.getCanvasContext().canvas}_applyContext2dPipeline(l,u,d){if(this._outputContext.save(),this._outputContext.globalCompositeOperation=d===0?null:l.compositeOperation||this.viewer.compositeOperation,l._croppingPolygons||l._clip?(this._renderToClippingCanvas(l),this._outputContext.drawImage(this._clippingCanvas,0,0)):this._outputContext.drawImage(this._renderingCanvas,0,0),this._outputContext.restore(),l.debugMode){const h=this.viewer.viewport.getFlip();h&&this._flip(),this._drawDebugInfo(u,l,h),h&&this._flip()}}_getTileData(l,u,d,h,c,g,v,y,w){let _=d.texture,b=d.position;g.set(b,c*12);let C=this._calculateOverlapFraction(l,u),A=l.positionedBounds.width*C.x,z=l.positionedBounds.height*C.y,H=l.positionedBounds.x+(l.x===0?0:A),ae=l.positionedBounds.y+(l.y===0?0:z),Q=l.positionedBounds.x+l.positionedBounds.width-(l.isRightMost?0:A),U=l.positionedBounds.y+l.positionedBounds.height-(l.isBottomMost?0:z),pe=Q-H,ye=U-ae,ge=new i.Mat3([pe,0,0,0,ye,0,H,ae,1]);if(l.flipped){let ce=i.Mat3.makeTranslation(.5,0),ue=i.Mat3.makeTranslation(-.5,0),de=ce.multiply(i.Mat3.makeScaling(-1,1)).multiply(ue);ge=ge.multiply(de)}let Ge=h.multiply(ge);w[c]=l.opacity,v[c]=_,y[c]=Ge.values}_textureFilter(){return this._imageSmoothingEnabled?this._gl.LINEAR:this._gl.NEAREST}_setupRenderer(){let l=this._gl;l||i.console.error("_setupCanvases must be called before _setupRenderer"),this._unitQuad=this._makeQuadVertexBuffer(0,1,0,1),this._makeFirstPassShaderProgram(),this._makeSecondPassShaderProgram(),this._renderToTexture=l.createTexture(),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,this._renderToTexture),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,this._renderingCanvas.width,this._renderingCanvas.height,0,l.RGBA,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this._textureFilter()),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),this._glFrameBuffer=l.createFramebuffer(),l.bindFramebuffer(l.FRAMEBUFFER,this._glFrameBuffer),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,this._renderToTexture,0),l.enable(l.BLEND),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA)}_makeFirstPassShaderProgram(){let l=this._glNumTextures=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),u=()=>[...Array(l).keys()].map(_=>`uniform mat3 u_matrix_${_};`).join(`
`),d=()=>[...Array(l).keys()].map(_=>`${_>0?"else ":""}if(int(a_index) == ${_}) { transform_matrix = u_matrix_${_}; }`).join(`
`);const h=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;
            attribute float a_index;

            ${u()} // create a uniform mat3 for each potential tile to draw

            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {

                mat3 transform_matrix; // value will be set by the if/elses in makeConditional()

                ${d()}

                gl_Position = vec4(transform_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
                v_image_index = a_index;
            }
            `,c=`
            precision mediump float;

            // our textures
            uniform sampler2D u_images[${l}];
            // our opacities
            uniform float u_opacities[${l}];

            // the varyings passed in from the vertex shader.
            varying vec2 v_texture_position;
            varying float v_image_index;

            void main() {
                // can't index directly with a variable, need to use a loop iterator hack
                for(int i = 0; i < ${l}; ++i){
                    if(i == int(v_image_index)){
                        gl_FragColor = texture2D(u_images[i], v_texture_position) * u_opacities[i];
                    }
                }
            }
            `;let g=this._gl,v=this.constructor.initShaderProgram(g,h,c);g.useProgram(v),this._firstPass={shaderProgram:v,aOutputPosition:g.getAttribLocation(v,"a_output_position"),aTexturePosition:g.getAttribLocation(v,"a_texture_position"),aIndex:g.getAttribLocation(v,"a_index"),uTransformMatrices:[...Array(this._glNumTextures).keys()].map(_=>g.getUniformLocation(v,`u_matrix_${_}`)),uImages:g.getUniformLocation(v,"u_images"),uOpacities:g.getUniformLocation(v,"u_opacities"),bufferOutputPosition:g.createBuffer(),bufferTexturePosition:g.createBuffer(),bufferIndex:g.createBuffer()},g.uniform1iv(this._firstPass.uImages,[...Array(l).keys()]);let y=new Float32Array(l*12);for(let _=0;_<l;++_)y.set(Float32Array.from(this._unitQuad),_*12);g.bindBuffer(g.ARRAY_BUFFER,this._firstPass.bufferOutputPosition),g.bufferData(g.ARRAY_BUFFER,y,g.STATIC_DRAW),g.enableVertexAttribArray(this._firstPass.aOutputPosition),g.bindBuffer(g.ARRAY_BUFFER,this._firstPass.bufferTexturePosition),g.enableVertexAttribArray(this._firstPass.aTexturePosition),g.bindBuffer(g.ARRAY_BUFFER,this._firstPass.bufferIndex);let w=[...Array(this._glNumTextures).keys()].map(_=>Array(6).fill(_)).flat();g.bufferData(g.ARRAY_BUFFER,new Float32Array(w),g.STATIC_DRAW),g.enableVertexAttribArray(this._firstPass.aIndex)}_makeSecondPassShaderProgram(){const l=`
            attribute vec2 a_output_position;
            attribute vec2 a_texture_position;

            uniform mat3 u_matrix;

            varying vec2 v_texture_position;

            void main() {
                gl_Position = vec4(u_matrix * vec3(a_output_position, 1), 1);

                v_texture_position = a_texture_position;
            }
            `,u=`
            precision mediump float;

            // our texture
            uniform sampler2D u_image;

            // the texCoords passed in from the vertex shader.
            varying vec2 v_texture_position;

            // the opacity multiplier for the image
            uniform float u_opacity_multiplier;

            void main() {
                gl_FragColor = texture2D(u_image, v_texture_position);
                gl_FragColor *= u_opacity_multiplier;
            }
            `;let d=this._gl,h=this.constructor.initShaderProgram(d,l,u);d.useProgram(h),this._secondPass={shaderProgram:h,aOutputPosition:d.getAttribLocation(h,"a_output_position"),aTexturePosition:d.getAttribLocation(h,"a_texture_position"),uMatrix:d.getUniformLocation(h,"u_matrix"),uImage:d.getUniformLocation(h,"u_image"),uOpacityMultiplier:d.getUniformLocation(h,"u_opacity_multiplier"),bufferOutputPosition:d.createBuffer(),bufferTexturePosition:d.createBuffer()},d.bindBuffer(d.ARRAY_BUFFER,this._secondPass.bufferOutputPosition),d.bufferData(d.ARRAY_BUFFER,this._unitQuad,d.STATIC_DRAW),d.enableVertexAttribArray(this._secondPass.aOutputPosition),d.bindBuffer(d.ARRAY_BUFFER,this._secondPass.bufferTexturePosition),d.bufferData(d.ARRAY_BUFFER,this._unitQuad,d.DYNAMIC_DRAW),d.enableVertexAttribArray(this._secondPass.aTexturePosition);let c=i.Mat3.makeScaling(2,2).multiply(i.Mat3.makeTranslation(-.5,-.5));d.uniformMatrix3fv(this._secondPass.uMatrix,!1,c.values)}_resizeRenderer(){let l=this._gl,u=this._renderingCanvas.width,d=this._renderingCanvas.height;l.viewport(0,0,u,d),l.deleteTexture(this._renderToTexture),this._renderToTexture=l.createTexture(),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,this._renderToTexture),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,u,d,0,l.RGBA,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,this._textureFilter()),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.bindFramebuffer(l.FRAMEBUFFER,this._glFrameBuffer),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,this._renderToTexture,0)}_setupCanvases(){let l=this;this._outputCanvas=this.canvas,this._outputContext=this._outputCanvas.getContext("2d"),this._renderingCanvas=document.createElement("canvas"),this._clippingCanvas=document.createElement("canvas"),this._clippingContext=this._clippingCanvas.getContext("2d"),this._renderingCanvas.width=this._clippingCanvas.width=this._outputCanvas.width,this._renderingCanvas.height=this._clippingCanvas.height=this._outputCanvas.height,this._gl=this._renderingCanvas.getContext("webgl"),this._resizeHandler=function(){l._outputCanvas!==l.viewer.drawer.canvas&&(l._outputCanvas.style.width=l.viewer.drawer.canvas.clientWidth+"px",l._outputCanvas.style.height=l.viewer.drawer.canvas.clientHeight+"px");let u=l._calculateCanvasSize();(l._outputCanvas.width!==u.x||l._outputCanvas.height!==u.y)&&(l._outputCanvas.width=u.x,l._outputCanvas.height=u.y),l._renderingCanvas.style.width=l._outputCanvas.clientWidth+"px",l._renderingCanvas.style.height=l._outputCanvas.clientHeight+"px",l._renderingCanvas.width=l._clippingCanvas.width=l._outputCanvas.width,l._renderingCanvas.height=l._clippingCanvas.height=l._outputCanvas.height,l._resizeRenderer()},this.viewer.addHandler("resize",this._resizeHandler)}_makeQuadVertexBuffer(l,u,d,h){return new Float32Array([l,h,u,h,l,d,l,d,u,h,u,d])}_tileReadyHandler(l){let u=l.tile,d=l.tiledImage;if(d.isTainted())return;let h=u.getCanvasContext(),c=h&&h.canvas;if(!c||i.isCanvasTainted(c)){d.isTainted()||(d.setTainted(!0),i.console.warn("WebGL cannot be used to draw this TiledImage because it has tainted data. Does crossOriginPolicy need to be set?"),this._raiseDrawerErrorEvent(d,"Tainted data cannot be used by the WebGLDrawer. Falling back to CanvasDrawer for this TiledImage."));return}if(!this._TextureMap.get(c)){let v=this._gl,y=v.createTexture(),w,_=d.source.tileOverlap,b,C;if(u.sourceBounds?(b=Math.min(u.sourceBounds.width,c.width)/c.width,C=Math.min(u.sourceBounds.height,c.height)/c.height):(b=1,C=1),_>0){let z=this._calculateOverlapFraction(u,d),H=(u.x===0?0:z.x)*b,ae=(u.y===0?0:z.y)*C,Q=(u.isRightMost?1:1-z.x)*b,U=(u.isBottomMost?1:1-z.y)*C;w=this._makeQuadVertexBuffer(H,Q,ae,U)}else b===1&&C===1?w=this._unitQuad:w=this._makeQuadVertexBuffer(0,b,0,C);let A={texture:y,position:w};this._TextureMap.set(c,A),v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,y),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this._textureFilter()),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,this._textureFilter()),this._uploadImageData(h)}}_calculateOverlapFraction(l,u){let d=u.source.tileOverlap,h=l.sourceBounds.width,c=l.sourceBounds.height,g=(l.x===0?0:d)+(l.isRightMost?0:d),v=(l.y===0?0:d)+(l.isBottomMost?0:d),y=d/(h+g),w=d/(c+v);return{x:y,y:w}}_unloadTextures(){Array.from(this._TextureMap.keys()).forEach(u=>{this._cleanupImageData(u)})}_uploadImageData(l){let u=this._gl,d=l.canvas;try{if(!d)throw l;u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,d)}catch(h){i.console.error("Error uploading image data to WebGL",h)}}_imageUnloadedHandler(l){let u=l.context2D.canvas;this._cleanupImageData(u)}_cleanupImageData(l){let u=this._TextureMap.get(l);this._TextureMap.delete(l),u&&this._gl.deleteTexture(u.texture)}_setClip(){}_renderToClippingCanvas(l){if(this._clippingContext.clearRect(0,0,this._clippingCanvas.width,this._clippingCanvas.height),this._clippingContext.save(),this.viewer.viewport.getFlip()){const u=new i.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(u.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-u.x,0)}if(l._clip){let d=[{x:l._clip.x,y:l._clip.y},{x:l._clip.x+l._clip.width,y:l._clip.y},{x:l._clip.x+l._clip.width,y:l._clip.y+l._clip.height},{x:l._clip.x,y:l._clip.y+l._clip.height}].map(h=>{let c=l.imageToViewportCoordinates(h.x,h.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(c)});this._clippingContext.beginPath(),d.forEach((h,c)=>{this._clippingContext[c===0?"moveTo":"lineTo"](h.x,h.y)}),this._clippingContext.clip(),this._setClip()}if(l._croppingPolygons){let u=l._croppingPolygons.map(d=>d.map(h=>{let c=l.imageToViewportCoordinates(h.x,h.y,!0).rotate(this.viewer.viewport.getRotation(!0),this.viewer.viewport.getCenter(!0));return this.viewportCoordToDrawerCoord(c)}));this._clippingContext.beginPath(),u.forEach(d=>{d.forEach((h,c)=>{this._clippingContext[c===0?"moveTo":"lineTo"](h.x,h.y)})}),this._clippingContext.clip()}if(this.viewer.viewport.getFlip()){const u=new i.Point(this.canvas.width/2,this.canvas.height/2);this._clippingContext.translate(u.x,0),this._clippingContext.scale(-1,1),this._clippingContext.translate(-u.x,0)}this._clippingContext.drawImage(this._renderingCanvas,0,0),this._clippingContext.restore()}_setRotations(l){var u=!1;this.viewport.getRotation(!0)%360!==0&&(this._offsetForRotation({degrees:this.viewport.getRotation(!0),saveContext:u}),u=!1),l.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:l.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(l._getRotationPoint(!0),!0),saveContext:u})}_offsetForRotation(l){var u=l.point?l.point.times(i.pixelDensityRatio):this._getCanvasCenter(),d=this._outputContext;d.save(),d.translate(u.x,u.y),d.rotate(Math.PI/180*l.degrees),d.translate(-u.x,-u.y)}_flip(l){l=l||{};var u=l.point?l.point.times(i.pixelDensityRatio):this._getCanvasCenter(),d=this._outputContext;d.translate(u.x,0),d.scale(-1,1),d.translate(-u.x,0)}_drawDebugInfo(l,u,d){for(var h=l.length-1;h>=0;h--){var c=l[h].tile;try{this._drawDebugInfoOnTile(c,l.length,h,u,d)}catch(g){i.console.error(g)}}}_drawDebugInfoOnTile(l,u,d,h,c){var g=this.viewer.world.getIndexOfItem(h)%this.debugGridColor.length,v=this.context;v.save(),v.lineWidth=2*i.pixelDensityRatio,v.font="small-caps bold "+13*i.pixelDensityRatio+"px arial",v.strokeStyle=this.debugGridColor[g],v.fillStyle=this.debugGridColor[g],this._setRotations(h),c&&this._flip({point:l.position.plus(l.size.divide(2))}),v.strokeRect(l.position.x*i.pixelDensityRatio,l.position.y*i.pixelDensityRatio,l.size.x*i.pixelDensityRatio,l.size.y*i.pixelDensityRatio);var y=(l.position.x+l.size.x/2)*i.pixelDensityRatio,w=(l.position.y+l.size.y/2)*i.pixelDensityRatio;v.translate(y,w);const _=this.viewport.getRotation(!0);v.rotate(Math.PI/180*-_),v.translate(-y,-w),l.x===0&&l.y===0&&(v.fillText("Zoom: "+this.viewport.getZoom(),l.position.x*i.pixelDensityRatio,(l.position.y-30)*i.pixelDensityRatio),v.fillText("Pan: "+this.viewport.getBounds().toString(),l.position.x*i.pixelDensityRatio,(l.position.y-20)*i.pixelDensityRatio)),v.fillText("Level: "+l.level,(l.position.x+10)*i.pixelDensityRatio,(l.position.y+20)*i.pixelDensityRatio),v.fillText("Column: "+l.x,(l.position.x+10)*i.pixelDensityRatio,(l.position.y+30)*i.pixelDensityRatio),v.fillText("Row: "+l.y,(l.position.x+10)*i.pixelDensityRatio,(l.position.y+40)*i.pixelDensityRatio),v.fillText("Order: "+d+" of "+u,(l.position.x+10)*i.pixelDensityRatio,(l.position.y+50)*i.pixelDensityRatio),v.fillText("Size: "+l.size.toString(),(l.position.x+10)*i.pixelDensityRatio,(l.position.y+60)*i.pixelDensityRatio),v.fillText("Position: "+l.position.toString(),(l.position.x+10)*i.pixelDensityRatio,(l.position.y+70)*i.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),h.getRotation(!0)%360!==0&&this._restoreRotationChanges(),v.restore()}_drawPlaceholder(l){const u=l.getBounds(!0),d=this.viewportToDrawerRectangle(l.getBounds(!0)),h=this._outputContext;let c;typeof l.placeholderFillStyle=="function"?c=l.placeholderFillStyle(l,h):c=l.placeholderFillStyle,this._offsetForRotation({degrees:this.viewer.viewport.getRotation(!0)}),h.fillStyle=c,h.translate(d.x,d.y),h.rotate(Math.PI/180*u.degrees),h.translate(-d.x,-d.y),h.fillRect(d.x,d.y,d.width,d.height),this._restoreRotationChanges()}_getCanvasCenter(){return new i.Point(this.canvas.width/2,this.canvas.height/2)}_restoreRotationChanges(){var l=this._outputContext;l.restore()}static initShaderProgram(l,u,d){function h(y,w,_){const b=y.createShader(w);return y.shaderSource(b,_),y.compileShader(b),y.getShaderParameter(b,y.COMPILE_STATUS)?b:(i.console.error(`An error occurred compiling the shaders: ${y.getShaderInfoLog(b)}`),y.deleteShader(b),null)}const c=h(l,l.VERTEX_SHADER,u),g=h(l,l.FRAGMENT_SHADER,d),v=l.createProgram();return l.attachShader(v,c),l.attachShader(v,g),l.linkProgram(v),l.getProgramParameter(v,l.LINK_STATUS)?v:(i.console.error(`Unable to initialize the shader program: ${l.getProgramInfoLog(v)}`),null)}}}(p),function(i){i.Viewport=function(a){var s=arguments;s.length&&s[0]instanceof i.Point&&(a={containerSize:s[0],contentSize:s[1],config:s[2]}),a.config&&(i.extend(!0,a,a.config),delete a.config),this._margins=i.extend({left:0,top:0,right:0,bottom:0},a.margins||{}),delete a.margins,a.initialDegrees=a.degrees,delete a.degrees,i.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:i.DEFAULT_SETTINGS.springStiffness,animationTime:i.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:i.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:i.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:i.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:i.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:i.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:i.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:i.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:i.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:i.DEFAULT_SETTINGS.degrees,flipped:i.DEFAULT_SETTINGS.flipped,homeFillsViewer:i.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:i.DEFAULT_SETTINGS.silenceMultiImageWarnings},a),this._updateContainerInnerSize(),this.centerSpringX=new i.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new i.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new i.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new i.Spring({initial:a.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new i.Rect(0,0,1,1),1),this.goHome(!0),this.update()},i.Viewport.prototype={get degrees(){return i.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(a){i.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(a)},resetContentSize:function(a){return i.console.assert(a,"[Viewport.resetContentSize] contentSize is required"),i.console.assert(a instanceof i.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),i.console.assert(a.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),i.console.assert(a.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new i.Rect(0,0,1,a.y/a.x),a.x),this},setHomeBounds:function(a,s){i.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(a,s)},_setContentBounds:function(a,s){i.console.assert(a,"[Viewport._setContentBounds] bounds is required"),i.console.assert(a instanceof i.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),i.console.assert(a.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),i.console.assert(a.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=a.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(s),this._contentBounds=a.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(s),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:s,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var a=this._contentAspectRatio/this.getAspectRatio(),s;return this.homeFillsViewer?s=a>=1?a:1:s=a>=1?1:a,s/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var a=this._contentBounds.getCenter(),s=1/this.getHomeZoom(),l=s/this.getAspectRatio();return new i.Rect(a.x-s/2,a.y-l/2,s,l)},goHome:function(a){return this.viewer&&this.viewer.raiseEvent("home",{immediately:a}),this.fitBounds(this.getHomeBounds(),a)},getMinZoom:function(){var a=this.getHomeZoom(),s=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*a;return s},getMaxZoom:function(){var a=this.maxZoomLevel;return a||(a=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,a/=this._contentBounds.width),Math.max(a,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new i.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return i.extend({},this._margins)},setMargins:function(a){i.console.assert(i.type(a)==="object","[Viewport.setMargins] margins must be an object"),this._margins=i.extend({left:0,top:0,right:0,bottom:0},a),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(a){return this.getBoundsNoRotate(a).rotate(-this.getRotation(a))},getBoundsNoRotate:function(a){var s=this.getCenter(a),l=1/this.getZoom(a),u=l/this.getAspectRatio();return new i.Rect(s.x-l/2,s.y-u/2,l,u)},getBoundsWithMargins:function(a){return this.getBoundsNoRotateWithMargins(a).rotate(-this.getRotation(a),this.getCenter(a))},getBoundsNoRotateWithMargins:function(a){var s=this.getBoundsNoRotate(a),l=this._containerInnerSize.x*this.getZoom(a);return s.x-=this._margins.left/l,s.y-=this._margins.top/l,s.width+=(this._margins.left+this._margins.right)/l,s.height+=(this._margins.top+this._margins.bottom)/l,s},getCenter:function(a){var s=new i.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),l=new i.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),u,d,h,c,g,v,y,w;return a?s:this.zoomPoint?(u=this.pixelFromPoint(this.zoomPoint,!0),d=this.getZoom(),h=1/d,c=h/this.getAspectRatio(),g=new i.Rect(s.x-h/2,s.y-c/2,h,c),v=this._pixelFromPoint(this.zoomPoint,g),y=v.minus(u).rotate(-this.getRotation(!0)),w=y.divide(this._containerInnerSize.x*d),l.plus(w)):l},getZoom:function(a){return a?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(a){return Math.max(Math.min(a,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(a){var s=this.viewportToViewerElementRectangle(a).getBoundingBox(),l=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),u=!1,d=!1;if(!this.wrapHorizontal){var h=s.x+s.width,c=l.x+l.width,g,v,y;s.width>l.width?g=this.visibilityRatio*l.width:g=this.visibilityRatio*s.width,v=l.x-h+g,y=c-s.x-g,g>l.width?(s.x+=(v+y)/2,u=!0):y<0?(s.x+=y,u=!0):v>0&&(s.x+=v,u=!0)}if(!this.wrapVertical){var w=s.y+s.height,_=l.y+l.height,b,C,A;s.height>l.height?b=this.visibilityRatio*l.height:b=this.visibilityRatio*s.height,C=l.y-w+b,A=_-s.y-b,b>l.height?(s.y+=(C+A)/2,d=!0):A<0?(s.y+=A,d=!0):C>0&&(s.y+=C,d=!0)}var z=u||d,H=z?this.viewerElementToViewportRectangle(s):a.clone();return H.xConstrained=u,H.yConstrained=d,H.constraintApplied=z,H},_raiseConstraintsEvent:function(a){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:a})},applyConstraints:function(a){var s=this.getZoom(),l=this._applyZoomConstraints(s);s!==l&&this.zoomTo(l,this.zoomPoint,a);var u=this.getConstrainedBounds(!1);return u.constraintApplied&&(this.fitBounds(u,a),this._raiseConstraintsEvent(a)),this},ensureVisible:function(a){return this.applyConstraints(a)},_fitBounds:function(a,s){s=s||{};var l=s.immediately||!1,u=s.constraints||!1,d=this.getAspectRatio(),h=a.getCenter(),c=new i.Rect(a.x,a.y,a.width,a.height,a.degrees+this.getRotation()).getBoundingBox();c.getAspectRatio()>=d?c.height=c.width/d:c.width=c.height*d,c.x=h.x-c.width/2,c.y=h.y-c.height/2;var g=1/c.width;if(l)return this.panTo(h,!0),this.zoomTo(g,null,!0),u&&this.applyConstraints(!0),this;var v=this.getCenter(!0),y=this.getZoom(!0);this.panTo(v,!0),this.zoomTo(y,null,!0);var w=this.getBounds(),_=this.getZoom();if(_===0||Math.abs(g/_-1)<1e-8)return this.zoomTo(g,null,!0),this.panTo(h,l),u&&this.applyConstraints(!1),this;if(u){this.panTo(h,!1),g=this._applyZoomConstraints(g),this.zoomTo(g,null,!1);var b=this.getConstrainedBounds();this.panTo(v,!0),this.zoomTo(y,null,!0),this.fitBounds(b)}else{var C=c.rotate(-this.getRotation()),A=C.getTopLeft().times(g).minus(w.getTopLeft().times(_)).divide(g-_);this.zoomTo(g,A,l)}return this},fitBounds:function(a,s){return this._fitBounds(a,{immediately:s,constraints:!1})},fitBoundsWithConstraints:function(a,s){return this._fitBounds(a,{immediately:s,constraints:!0})},fitVertically:function(a){var s=new i.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(s,a)},fitHorizontally:function(a){var s=new i.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(s,a)},getConstrainedBounds:function(a){var s,l;return s=this.getBounds(a),l=this._applyBoundaryConstraints(s),l},panBy:function(a,s){var l=new i.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(l.plus(a),s)},panTo:function(a,s){return s?(this.centerSpringX.resetTo(a.x),this.centerSpringY.resetTo(a.y)):(this.centerSpringX.springTo(a.x),this.centerSpringY.springTo(a.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:a,immediately:s}),this},zoomBy:function(a,s,l){return this.zoomTo(this.zoomSpring.target.value*a,s,l)},zoomTo:function(a,s,l){var u=this;return this.zoomPoint=s instanceof i.Point&&!isNaN(s.x)&&!isNaN(s.y)?s:null,l?this._adjustCenterSpringsForZoomPoint(function(){u.zoomSpring.resetTo(a)}):this.zoomSpring.springTo(a),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:a,refPoint:s,immediately:l}),this},setRotation:function(a,s){return this.rotateTo(a,null,s)},getRotation:function(a){return a?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(a,s,l){return this.rotateTo(a,s,l)},rotateTo:function(a,s,l){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===a&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=s instanceof i.Point&&!isNaN(s.x)&&!isNaN(s.y)?s:null,l)if(this.rotationPivot){var u=a-this._oldDegrees;if(!u)return this.rotationPivot=null,this;this._rotateAboutPivot(a)}else this.degreesSpring.resetTo(a);else{var d=i.positiveModulo(this.degreesSpring.current.value,360),h=i.positiveModulo(a,360),c=h-d;c>180?h-=360:c<-180&&(h+=360);var g=d-h;this.degreesSpring.resetTo(a+g),this.degreesSpring.springTo(a)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:a,immediately:!!l,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(a,s,l){return this.rotateTo(this.degreesSpring.target.value+a,s,l)},resize:function(a,s){var l=this.getBoundsNoRotate(),u=l,d;this.containerSize.x=a.x,this.containerSize.y=a.y,this._updateContainerInnerSize(),s&&(d=a.x/this.containerSize.x,u.width=l.width*d,u.height=u.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:a,maintain:s});var h=this.fitBounds(u,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:a,maintain:s}),h},_updateContainerInnerSize:function(){this._containerInnerSize=new i.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var a=this;this._adjustCenterSpringsForZoomPoint(function(){a.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var s=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value;var l=s||!this.zoomSpring.isAtTargetValue()||!this.centerSpringX.isAtTargetValue()||!this.centerSpringY.isAtTargetValue()||!this.degreesSpring.isAtTargetValue();return l},_rotateAboutPivot:function(a){var s=a===!0,l=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(l.x),this.centerSpringY.shiftBy(l.y),s?this.degreesSpring.update():this.degreesSpring.resetTo(a);var u=this.degreesSpring.current.value-this._oldDegrees,d=l.rotate(u*-1).times(-1);this.centerSpringX.shiftBy(d.x),this.centerSpringY.shiftBy(d.y)},_adjustCenterSpringsForZoomPoint:function(a){if(this.zoomPoint){var s=this.pixelFromPoint(this.zoomPoint,!0);a();var l=this.pixelFromPoint(this.zoomPoint,!0),u=l.minus(s),d=this.deltaPointsFromPixels(u,!0);this.centerSpringX.shiftBy(d.x),this.centerSpringY.shiftBy(d.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else a()},deltaPixelsFromPointsNoRotate:function(a,s){return a.times(this._containerInnerSize.x*this.getZoom(s))},deltaPixelsFromPoints:function(a,s){return this.deltaPixelsFromPointsNoRotate(a.rotate(this.getRotation(s)),s)},deltaPointsFromPixelsNoRotate:function(a,s){return a.divide(this._containerInnerSize.x*this.getZoom(s))},deltaPointsFromPixels:function(a,s){return this.deltaPointsFromPixelsNoRotate(a,s).rotate(-this.getRotation(s))},pixelFromPointNoRotate:function(a,s){return this._pixelFromPointNoRotate(a,this.getBoundsNoRotate(s))},pixelFromPoint:function(a,s){return this._pixelFromPoint(a,this.getBoundsNoRotate(s))},_pixelFromPointNoRotate:function(a,s){return a.minus(s.getTopLeft()).times(this._containerInnerSize.x/s.width).plus(new i.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(a,s){return this._pixelFromPointNoRotate(a.rotate(this.getRotation(!0),this.getCenter(!0)),s)},pointFromPixelNoRotate:function(a,s){var l=this.getBoundsNoRotate(s);return a.minus(new i.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/l.width).plus(l.getTopLeft())},pointFromPixel:function(a,s){return this.pointFromPixelNoRotate(a,s).rotate(-this.getRotation(s),this.getCenter(s))},_viewportToImageDelta:function(a,s){var l=this._contentBoundsNoRotate.width;return new i.Point(a*this._contentSizeNoRotate.x/l,s*this._contentSizeNoRotate.x/l)},viewportToImageCoordinates:function(a,s){if(a instanceof i.Point)return this.viewportToImageCoordinates(a.x,a.y);if(this.viewer){var l=this.viewer.world.getItemCount();if(l>1)this.silenceMultiImageWarnings||i.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(l===1){var u=this.viewer.world.getItemAt(0);return u.viewportToImageCoordinates(a,s,!0)}}return this._viewportToImageDelta(a-this._contentBoundsNoRotate.x,s-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(a,s){var l=this._contentBoundsNoRotate.width;return new i.Point(a/this._contentSizeNoRotate.x*l,s/this._contentSizeNoRotate.x*l)},imageToViewportCoordinates:function(a,s){if(a instanceof i.Point)return this.imageToViewportCoordinates(a.x,a.y);if(this.viewer){var l=this.viewer.world.getItemCount();if(l>1)this.silenceMultiImageWarnings||i.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(l===1){var u=this.viewer.world.getItemAt(0);return u.imageToViewportCoordinates(a,s,!0)}}var d=this._imageToViewportDelta(a,s);return d.x+=this._contentBoundsNoRotate.x,d.y+=this._contentBoundsNoRotate.y,d},imageToViewportRectangle:function(a,s,l,u){var d=a;if(d instanceof i.Rect||(d=new i.Rect(a,s,l,u)),this.viewer){var h=this.viewer.world.getItemCount();if(h>1)this.silenceMultiImageWarnings||i.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(h===1){var c=this.viewer.world.getItemAt(0);return c.imageToViewportRectangle(a,s,l,u,!0)}}var g=this.imageToViewportCoordinates(d.x,d.y),v=this._imageToViewportDelta(d.width,d.height);return new i.Rect(g.x,g.y,v.x,v.y,d.degrees)},viewportToImageRectangle:function(a,s,l,u){var d=a;if(d instanceof i.Rect||(d=new i.Rect(a,s,l,u)),this.viewer){var h=this.viewer.world.getItemCount();if(h>1)this.silenceMultiImageWarnings||i.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(h===1){var c=this.viewer.world.getItemAt(0);return c.viewportToImageRectangle(a,s,l,u,!0)}}var g=this.viewportToImageCoordinates(d.x,d.y),v=this._viewportToImageDelta(d.width,d.height);return new i.Rect(g.x,g.y,v.x,v.y,d.degrees)},viewerElementToImageCoordinates:function(a){var s=this.pointFromPixel(a,!0);return this.viewportToImageCoordinates(s)},imageToViewerElementCoordinates:function(a){var s=this.imageToViewportCoordinates(a);return this.pixelFromPoint(s,!0)},windowToImageCoordinates:function(a){i.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var s=a.minus(i.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(s)},imageToWindowCoordinates:function(a){i.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var s=this.imageToViewerElementCoordinates(a);return s.plus(i.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(a){return this.pointFromPixel(a,!0)},viewportToViewerElementCoordinates:function(a){return this.pixelFromPoint(a,!0)},viewerElementToViewportRectangle:function(a){return i.Rect.fromSummits(this.pointFromPixel(a.getTopLeft(),!0),this.pointFromPixel(a.getTopRight(),!0),this.pointFromPixel(a.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(a){return i.Rect.fromSummits(this.pixelFromPoint(a.getTopLeft(),!0),this.pixelFromPoint(a.getTopRight(),!0),this.pixelFromPoint(a.getBottomLeft(),!0))},windowToViewportCoordinates:function(a){i.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var s=a.minus(i.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(s)},viewportToWindowCoordinates:function(a){i.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var s=this.viewportToViewerElementCoordinates(a);return s.plus(i.getElementPosition(this.viewer.element))},viewportToImageZoom:function(a){if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||i.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(s===1){var l=this.viewer.world.getItemAt(0);return l.viewportToImageZoom(a)}}var u=this._contentSizeNoRotate.x,d=this._containerInnerSize.x,h=this._contentBoundsNoRotate.width,c=d/u*h;return a*c},imageToViewportZoom:function(a){if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||i.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image. Instead, use [TiledImage.imageToViewportZoom] for the specific image of interest");else if(s===1){var l=this.viewer.world.getItemAt(0);return l.imageToViewportZoom(a)}}var u=this._contentSizeNoRotate.x,d=this._containerInnerSize.x,h=this._contentBoundsNoRotate.width,c=u/d/h;return a*c},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(a){return this.flipped===a?this:(this.flipped=a,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:a}),this)},getMaxZoomPixelRatio:function(){return this.maxZoomPixelRatio},setMaxZoomPixelRatio:function(a,s=!0,l=!1){i.console.assert(!isNaN(a),"[Viewport.setMaxZoomPixelRatio] ratio must be a number"),!isNaN(a)&&(this.maxZoomPixelRatio=a,s&&this.getZoom()>this.getMaxZoom()&&this.applyConstraints(l))}}}(p),function(i){i.TiledImage=function(a){this._initialized=!1,i.console.assert(a.tileCache,"[TiledImage] options.tileCache is required"),i.console.assert(a.drawer,"[TiledImage] options.drawer is required"),i.console.assert(a.viewer,"[TiledImage] options.viewer is required"),i.console.assert(a.imageLoader,"[TiledImage] options.imageLoader is required"),i.console.assert(a.source,"[TiledImage] options.source is required"),i.console.assert(!a.clip||a.clip instanceof i.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),i.EventSource.call(this),this._tileCache=a.tileCache,delete a.tileCache,this._drawer=a.drawer,delete a.drawer,this._imageLoader=a.imageLoader,delete a.imageLoader,a.clip instanceof i.Rect&&(this._clip=a.clip.clone()),delete a.clip;var s=a.x||0;delete a.x;var l=a.y||0;delete a.y,this.normHeight=a.source.dimensions.y/a.source.dimensions.x,this.contentAspectX=a.source.dimensions.x/a.source.dimensions.y;var u=1;a.width?(u=a.width,delete a.width,a.height&&(i.console.error("specifying both width and height to a tiledImage is not supported"),delete a.height)):a.height&&(u=a.height/this.normHeight,delete a.height);var d=a.fitBounds;delete a.fitBounds;var h=a.fitBoundsPlacement||p.Placement.CENTER;delete a.fitBoundsPlacement;var c=a.degrees||0;delete a.degrees;var g=a.ajaxHeaders;delete a.ajaxHeaders,i.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_needsDraw:!0,_needsUpdate:!0,_hasOpaqueTile:!1,_tilesLoading:0,_tilesToDraw:[],_lastDrawn:[],_isBlending:!1,_wasBlending:!1,_isTainted:!1,springStiffness:i.DEFAULT_SETTINGS.springStiffness,animationTime:i.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:i.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:i.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:i.DEFAULT_SETTINGS.wrapVertical,immediateRender:i.DEFAULT_SETTINGS.immediateRender,blendTime:i.DEFAULT_SETTINGS.blendTime,alwaysBlend:i.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:i.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:i.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:i.DEFAULT_SETTINGS.iOSDevice,debugMode:i.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:i.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:i.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:i.DEFAULT_SETTINGS.placeholderFillStyle,opacity:i.DEFAULT_SETTINGS.opacity,preload:i.DEFAULT_SETTINGS.preload,compositeOperation:i.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:i.DEFAULT_SETTINGS.subPixelRoundingForTransparency,maxTilesPerFrame:i.DEFAULT_SETTINGS.maxTilesPerFrame},a),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new i.Spring({initial:s,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new i.Spring({initial:l,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new i.Spring({initial:u,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new i.Spring({initial:c,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),d&&this.fitBounds(d,h,!0),this._ownAjaxHeaders={},this.setAjaxHeaders(g,!1),this._initialized=!0},i.extend(i.TiledImage.prototype,i.EventSource.prototype,{needsDraw:function(){return this._needsDraw},redraw:function(){this._needsDraw=!0},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(a){a!==this._fullyLoaded&&(this._fullyLoaded=a,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=i.now(),this._needsDraw=!0},update:function(a){let s=this._xSpring.update(),l=this._ySpring.update(),u=this._scaleSpring.update(),d=this._degreesSpring.update(),h=s||l||u||d||this._needsUpdate;if(h||a||!this._fullyLoaded){let c=this._updateLevelsForViewport();this._setFullyLoaded(c)}return this._needsUpdate=!1,h?(this._updateForScale(),this._raiseBoundsChange(),this._needsDraw=!0,!0):!1},setDrawn:function(){return this._needsDraw=this._isBlending||this._wasBlending,this._needsDraw},setTainted(a){this._isTainted=a},isTainted(){return this._isTainted},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy(this.viewer)},getBounds:function(a){return this.getBoundsNoRotate(a).rotate(this.getRotation(a),this._getRotationPoint(a))},getBoundsNoRotate:function(a){return a?new i.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new i.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return i.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(a){var s=this.getBoundsNoRotate(a);if(this._clip){var l=a?this._worldWidthCurrent:this._worldWidthTarget,u=l/this.source.dimensions.x,d=this._clip.times(u);s=new i.Rect(s.x+d.x,s.y+d.y,d.width,d.height)}return s.rotate(this.getRotation(a),this._getRotationPoint(a))},getTileBounds:function(a,s,l){var u=this.source.getNumTiles(a),d=(u.x+s%u.x)%u.x,h=(u.y+l%u.y)%u.y,c=this.source.getTileBounds(a,d,h);return this.getFlip()&&(c.x=Math.max(0,1-c.x-c.width)),c.x+=(s-d)/u.x,c.y+=this._worldHeightCurrent/this._worldWidthCurrent*((l-h)/u.y),c},getContentSize:function(){return new i.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var a=this.imageToWindowCoordinates(new i.Point(0,0)),s=this.imageToWindowCoordinates(this.getContentSize());return new i.Point(s.x-a.x,s.y-a.y)},_viewportToImageDelta:function(a,s,l){var u=l?this._scaleSpring.current.value:this._scaleSpring.target.value;return new i.Point(a*(this.source.dimensions.x/u),s*(this.source.dimensions.y*this.contentAspectX/u))},viewportToImageCoordinates:function(a,s,l){var u;return a instanceof i.Point?(l=s,u=a):u=new i.Point(a,s),u=u.rotate(-this.getRotation(l),this._getRotationPoint(l)),l?this._viewportToImageDelta(u.x-this._xSpring.current.value,u.y-this._ySpring.current.value):this._viewportToImageDelta(u.x-this._xSpring.target.value,u.y-this._ySpring.target.value)},_imageToViewportDelta:function(a,s,l){var u=l?this._scaleSpring.current.value:this._scaleSpring.target.value;return new i.Point(a/this.source.dimensions.x*u,s/this.source.dimensions.y/this.contentAspectX*u)},imageToViewportCoordinates:function(a,s,l){a instanceof i.Point&&(l=s,s=a.y,a=a.x);var u=this._imageToViewportDelta(a,s,l);return l?(u.x+=this._xSpring.current.value,u.y+=this._ySpring.current.value):(u.x+=this._xSpring.target.value,u.y+=this._ySpring.target.value),u.rotate(this.getRotation(l),this._getRotationPoint(l))},imageToViewportRectangle:function(a,s,l,u,d){var h=a;h instanceof i.Rect?d=s:h=new i.Rect(a,s,l,u);var c=this.imageToViewportCoordinates(h.getTopLeft(),d),g=this._imageToViewportDelta(h.width,h.height,d);return new i.Rect(c.x,c.y,g.x,g.y,h.degrees+this.getRotation(d))},viewportToImageRectangle:function(a,s,l,u,d){var h=a;a instanceof i.Rect?d=s:h=new i.Rect(a,s,l,u);var c=this.viewportToImageCoordinates(h.getTopLeft(),d),g=this._viewportToImageDelta(h.width,h.height,d);return new i.Rect(c.x,c.y,g.x,g.y,h.degrees-this.getRotation(d))},viewerElementToImageCoordinates:function(a){var s=this.viewport.pointFromPixel(a,!0);return this.viewportToImageCoordinates(s)},imageToViewerElementCoordinates:function(a){var s=this.imageToViewportCoordinates(a);return this.viewport.pixelFromPoint(s,!0)},windowToImageCoordinates:function(a){var s=a.minus(p.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(s)},imageToWindowCoordinates:function(a){var s=this.imageToViewerElementCoordinates(a);return s.plus(p.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(a){var s=this._scaleSpring.current.value;return a=a.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new i.Rect((a.x-this._xSpring.current.value)/s,(a.y-this._ySpring.current.value)/s,a.width/s,a.height/s,a.degrees)},viewportToImageZoom:function(a){var s=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return s*a},imageToViewportZoom:function(a){var s=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return a/s},setPosition:function(a,s){var l=this._xSpring.target.value===a.x&&this._ySpring.target.value===a.y;if(s){if(l&&this._xSpring.current.value===a.x&&this._ySpring.current.value===a.y)return;this._xSpring.resetTo(a.x),this._ySpring.resetTo(a.y),this._needsDraw=!0,this._needsUpdate=!0}else{if(l)return;this._xSpring.springTo(a.x),this._ySpring.springTo(a.y),this._needsDraw=!0,this._needsUpdate=!0}l||this._raiseBoundsChange()},setWidth:function(a,s){this._setScale(a,s)},setHeight:function(a,s){this._setScale(a/this.normHeight,s)},setCroppingPolygons:function(a){var s=function(u){return u instanceof i.Point||typeof u.x=="number"&&typeof u.y=="number"},l=function(u){return u.map(function(d){try{if(s(d))return{x:d.x,y:d.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!i.isArray(a))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=a.map(function(u){return l(u)}),this._needsDraw=!0}catch(u){i.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),i.console.error(u),this.resetCroppingPolygons()}},resetCroppingPolygons:function(){this._croppingPolygons=null,this._needsDraw=!0},fitBounds:function(a,s,l){s=s||i.Placement.CENTER;var u=i.Placement.properties[s],d=this.contentAspectX,h=0,c=0,g=1,v=1;if(this._clip&&(d=this._clip.getAspectRatio(),g=this._clip.width/this.source.dimensions.x,v=this._clip.height/this.source.dimensions.y,a.getAspectRatio()>d?(h=this._clip.x/this._clip.height*a.height,c=this._clip.y/this._clip.height*a.height):(h=this._clip.x/this._clip.width*a.width,c=this._clip.y/this._clip.width*a.width)),a.getAspectRatio()>d){var y=a.height/v,w=0;u.isHorizontallyCentered?w=(a.width-a.height*d)/2:u.isRight&&(w=a.width-a.height*d),this.setPosition(new i.Point(a.x-h+w,a.y-c),l),this.setHeight(y,l)}else{var _=a.width/g,b=0;u.isVerticallyCentered?b=(a.height-a.width/d)/2:u.isBottom&&(b=a.height-a.width/d),this.setPosition(new i.Point(a.x-h,a.y-c+b),l),this.setWidth(_,l)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(a){i.console.assert(!a||a instanceof i.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),a instanceof i.Rect?this._clip=a.clone():this._clip=null,this._needsUpdate=!0,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return this.flipped},setFlip:function(a){this.flipped=a},get flipped(){return this._flipped},set flipped(a){let s=this._flipped!==!!a;this._flipped=!!a,s&&(this.update(!0),this._needsDraw=!0,this._raiseBoundsChange())},get wrapHorizontal(){return this._wrapHorizontal},set wrapHorizontal(a){let s=this._wrapHorizontal!==!!a;this._wrapHorizontal=!!a,this._initialized&&s&&(this.update(!0),this._needsDraw=!0)},get wrapVertical(){return this._wrapVertical},set wrapVertical(a){let s=this._wrapVertical!==!!a;this._wrapVertical=!!a,this._initialized&&s&&(this.update(!0),this._needsDraw=!0)},get debugMode(){return this._debugMode},set debugMode(a){this._debugMode=!!a,this._needsDraw=!0},getOpacity:function(){return this.opacity},setOpacity:function(a){this.opacity=a},get opacity(){return this._opacity},set opacity(a){a!==this.opacity&&(this._opacity=a,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(a){this._preload=!!a,this._needsDraw=!0},getRotation:function(a){return a?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(a,s){this._degreesSpring.target.value===a&&this._degreesSpring.isAtTargetValue()||(s?this._degreesSpring.resetTo(a):this._degreesSpring.springTo(a),this._needsDraw=!0,this._needsUpdate=!0,this._raiseBoundsChange())},getDrawArea:function(){if(this._opacity===0&&!this._preload)return!1;var a=this._viewportToTiledImageRectangle(this.viewport.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var s=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));a=a.intersection(s)}return a},getTilesToDraw:function(){let a=this._tilesToDraw.flat();return this._updateTilesInViewport(a),a=this._tilesToDraw.flat(),a.forEach(s=>{s.tile.beingDrawn=!0}),this._lastDrawn=a,a},_getRotationPoint:function(a){return this.getBoundsNoRotate(a).getCenter()},get compositeOperation(){return this._compositeOperation},set compositeOperation(a){a!==this._compositeOperation&&(this._compositeOperation=a,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this._compositeOperation}))},getCompositeOperation:function(){return this._compositeOperation},setCompositeOperation:function(a){this.compositeOperation=a},setAjaxHeaders:function(a,s){if(a===null&&(a={}),!i.isPlainObject(a)){console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=a,this._updateAjaxHeaders(s)},_updateAjaxHeaders:function(a){if(a===void 0&&(a=!0),i.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=i.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,a){var s,l,u,d;for(var h in this.tilesMatrix){s=this.source.getNumTiles(h);for(var c in this.tilesMatrix[h]){l=(s.x+c%s.x)%s.x;for(var g in this.tilesMatrix[h][c])if(u=(s.y+g%s.y)%s.y,d=this.tilesMatrix[h][c][g],d.loadWithAjax=this.loadTilesWithAjax,d.loadWithAjax){var v=this.source.getTileAjaxHeaders(h,l,u);d.ajaxHeaders=i.extend({},this.ajaxHeaders,v)}else d.ajaxHeaders=null}}for(var y=0;y<this._imageLoader.jobQueue.length;y++){var w=this._imageLoader.jobQueue[y];w.loadWithAjax=w.tile.loadWithAjax,w.ajaxHeaders=w.tile.loadWithAjax?w.tile.ajaxHeaders:null}}},_setScale:function(a,s){var l=this._scaleSpring.target.value===a;if(s){if(l&&this._scaleSpring.current.value===a)return;this._scaleSpring.resetTo(a),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}else{if(l)return;this._scaleSpring.springTo(a),this._updateForScale(),this._needsDraw=!0,this._needsUpdate=!0}l||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var a=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),s=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,l=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(s/this.minPixelRatio)/Math.log(2))));return l=Math.max(l,this.source.minLevel||0),a=Math.min(a,l),{lowestLevel:a,highestLevel:l}},_updateLevelsForViewport:function(){var a=this._getLevelsInterval(),s=a.lowestLevel,l=a.highestLevel,u=[],d=this.getDrawArea(),h=i.now();if(this._lastDrawn.forEach(Q=>{Q.tile.beingDrawn=!1}),this._tilesToDraw=[],this._tilesLoading=0,this.loadingCoverage={},!d)return this._needsDraw=!1,this._fullyLoaded;var c=new Array(l-s+1);for(let Q=0,U=l;U>=s;U--,Q++)c[Q]=U;for(let Q=l+1;Q<=this.source.maxLevel;Q++){var g=this.tilesMatrix[Q]&&this.tilesMatrix[Q][0]&&this.tilesMatrix[Q][0][0];if(g&&g.isBottomMost&&g.isRightMost&&g.loaded){c.push(Q);break}}let v=!1;for(let Q=0;Q<c.length;Q++){let U=c[Q];var y=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(U),!0).x*this._scaleSpring.current.value;if(Q===c.length-1||y>=this.minPixelRatio)v=!0;else if(!v)continue;var w=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(U),!1).x*this._scaleSpring.current.value,_=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,b=this.immediateRender?1:_,C=Math.min(1,(y-.5)/.5),A=b/Math.abs(b-w),z=this._updateLevel(U,C,A,d,h,u);u=z.bestTiles;var H=z.updatedTiles.filter(pe=>pe.loaded),ae=function(pe,ye,ge){return function(Ge){return{tile:Ge,level:pe,levelOpacity:ye,currentTime:ge}}}(U,C,h);if(this._tilesToDraw[U]=H.map(ae),this._providesCoverage(this.coverage,U))break}return u&&u.length>0?(u.forEach(function(Q){Q&&!Q.context2D&&this._loadTile(Q,h)},this),this._needsDraw=!0,!1):this._tilesLoading===0},_updateTilesInViewport:function(a){let s=i.now(),l=this;this._tilesLoading=0,this._wasBlending=this._isBlending,this._isBlending=!1,this.loadingCoverage={};let u=a.length?a[0].level:0;if(!this.getDrawArea())return;function h(g){let v=g.tile;if(v&&v.loaded){let y=l._blendTile(v,v.x,v.y,g.level,g.levelOpacity,s,u);l._isBlending=l._isBlending||y,l._needsDraw=l._needsDraw||y||l._wasBlending}}let c=0;for(let g=0;g<a.length;g++){let v=a[g];h(v),this._providesCoverage(this.coverage,v.level)&&(c=Math.max(c,v.level))}if(c>0)for(let g in this._tilesToDraw)g<c&&delete this._tilesToDraw[g]},_blendTile:function(a,s,l,u,d,h,c){let g=1e3*this.blendTime,v,y;return a.blendStart||(a.blendStart=h),v=h-a.blendStart,y=g?Math.min(1,v/g):1,u===c&&(y=1,v=g),this.alwaysBlend&&(y*=d),a.opacity=y,y===1&&(this._setCoverage(this.coverage,u,s,l,!0),this._hasOpaqueTile=!0),v<g},_updateLevel:function(a,s,l,u,d,h){var c=u.getBoundingBox().getTopLeft(),g=u.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:!0,level:a,opacity:s,visibility:l,drawArea:u,topleft:c,bottomright:g,currenttime:d,best:h}),this._resetCoverage(this.coverage,a),this._resetCoverage(this.loadingCoverage,a);var v=this._getCornerTiles(a,c,g),y=v.topLeft,w=v.bottomRight,_=this.source.getNumTiles(a),b=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(w.x+=1,this.wrapHorizontal||(w.x=Math.min(w.x,_.x-1)));for(var C=Math.max(0,(w.x-y.x)*(w.y-y.y)),A=new Array(C),z=0,H=y.x;H<=w.x;H++)for(var ae=y.y;ae<=w.y;ae++){var Q;if(this.getFlip()){var U=(_.x+H%_.x)%_.x;Q=H+_.x-U-U-1}else Q=H;if(u.intersection(this.getTileBounds(a,Q,ae))!==null){var pe=this._updateTile(Q,ae,a,l,b,_,d,h);h=pe.bestTiles,A[z]=pe.tile,z+=1}}return{bestTiles:h,updatedTiles:A}},_positionTile:function(a,s,l,u,d){var h=a.bounds.getTopLeft();h.x*=this._scaleSpring.current.value,h.y*=this._scaleSpring.current.value,h.x+=this._xSpring.current.value,h.y+=this._ySpring.current.value;var c=a.bounds.getSize();c.x*=this._scaleSpring.current.value,c.y*=this._scaleSpring.current.value,a.positionedBounds.x=h.x,a.positionedBounds.y=h.y,a.positionedBounds.width=c.x,a.positionedBounds.height=c.y;var g=l.pixelFromPointNoRotate(h,!0),v=l.pixelFromPointNoRotate(h,!1),y=l.deltaPixelsFromPointsNoRotate(c,!0),w=l.deltaPixelsFromPointsNoRotate(c,!1),_=v.plus(w.divide(2)),b=u.squaredDistanceTo(_);this.viewer.drawer.minimumOverlapRequired(this)&&(s||(y=y.plus(new i.Point(1,1))),a.isRightMost&&this.wrapHorizontal&&(y.x+=.75),a.isBottomMost&&this.wrapVertical&&(y.y+=.75)),a.position=g,a.size=y,a.squaredDistance=b,a.visibility=d},_updateTile:function(a,s,l,u,d,h,c,g){var v=this._getTile(a,s,l,c,h);this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:v}),this._setCoverage(this.coverage,l,a,s,!1);var y=v.loaded||v.loading||this._isCovered(this.loadingCoverage,l,a,s);if(this._setCoverage(this.loadingCoverage,l,a,s,y),!v.exists)return{bestTiles:g,tile:v};if(v.loaded&&v.opacity===1&&this._setCoverage(this.coverage,l,a,s,!0),this._positionTile(v,this.source.tileOverlap,this.viewport,d,u),!v.loaded)if(v.context2D)this._setTileLoaded(v);else{var w=this._tileCache.getImageRecord(v.cacheKey);w&&this._setTileLoaded(v,w.getData())}return v.loading?this._tilesLoading++:y||(g=this._compareTiles(g,v,this.maxTilesPerFrame)),{bestTiles:g,tile:v}},_getCornerTiles:function(a,s,l){var u,d;this.wrapHorizontal?(u=i.positiveModulo(s.x,1),d=i.positiveModulo(l.x,1)):(u=Math.max(0,s.x),d=Math.min(1,l.x));var h,c,g=1/this.source.aspectRatio;this.wrapVertical?(h=i.positiveModulo(s.y,g),c=i.positiveModulo(l.y,g)):(h=Math.max(0,s.y),c=Math.min(g,l.y));var v=this.source.getTileAtPoint(a,new i.Point(u,h)),y=this.source.getTileAtPoint(a,new i.Point(d,c)),w=this.source.getNumTiles(a);return this.wrapHorizontal&&(v.x+=w.x*Math.floor(s.x),y.x+=w.x*Math.floor(l.x)),this.wrapVertical&&(v.y+=w.y*Math.floor(s.y/g),y.y+=w.y*Math.floor(l.y/g)),{topLeft:v,bottomRight:y}},_getTile:function(a,s,l,u,d){var h,c,g,v,y,w,_,b,C,A,z=this.tilesMatrix,H=this.source;return z[l]||(z[l]={}),z[l][a]||(z[l][a]={}),(!z[l][a][s]||!z[l][a][s].flipped!=!this.flipped)&&(h=(d.x+a%d.x)%d.x,c=(d.y+s%d.y)%d.y,g=this.getTileBounds(l,a,s),v=H.getTileBounds(l,h,c,!0),y=H.tileExists(l,h,c),w=H.getTileUrl(l,h,c),_=H.getTilePostData(l,h,c),this.loadTilesWithAjax?(b=H.getTileAjaxHeaders(l,h,c),i.isPlainObject(this.ajaxHeaders)&&(b=i.extend({},this.ajaxHeaders,b))):b=null,C=H.getContext2D?H.getContext2D(l,h,c):void 0,A=new i.Tile(l,a,s,g,y,w,C,this.loadTilesWithAjax,b,v,_,H.getTileHashKey(l,h,c,w,b,_)),this.getFlip()?h===0&&(A.isRightMost=!0):h===d.x-1&&(A.isRightMost=!0),c===d.y-1&&(A.isBottomMost=!0),A.flipped=this.flipped,z[l][a][s]=A),A=z[l][a][s],A.lastTouchTime=u,A},_loadTile:function(a,s){var l=this;a.loading=!0,this._imageLoader.addJob({src:a.getUrl(),tile:a,source:this.source,postData:a.postData,loadWithAjax:a.loadWithAjax,ajaxHeaders:a.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(u,d,h){l._onTileLoad(a,s,u,d,h)},abort:function(){a.loading=!1}})},_onTileLoad:function(a,s,l,u,d){if(l)a.exists=!0;else{i.console.error("Tile %s failed to load: %s - error: %s",a,a.getUrl(),u),this.viewer.raiseEvent("tile-load-failed",{tile:a,tiledImage:this,time:s,message:u,tileRequest:d}),a.loading=!1,a.exists=!1;return}if(s<this.lastResetTime){i.console.warn("Ignoring tile %s loaded before reset: %s",a,a.getUrl()),a.loading=!1;return}var h=this,c=function(){var g=h.source,v=g.getClosestLevel();h._setTileLoaded(a,l,v,d)};c()},_setTileLoaded:function(a,s,l,u){var d=0,h=!1,c=this;function g(){return h&&i.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),d++,v}function v(){d--,d===0&&(a.loading=!1,a.loaded=!0,a.hasTransparency=c.source.hasTransparency(a.context2D,a.getUrl(),a.ajaxHeaders,a.postData),a.context2D||c._tileCache.cacheTile({data:s,tile:a,cutoff:l,tiledImage:c}),c.viewer.raiseEvent("tile-ready",{tile:a,tiledImage:c,tileRequest:u}),c._needsDraw=!0)}var y=g();this.viewer.raiseEvent("tile-loaded",{tile:a,tiledImage:this,tileRequest:u,get image(){return i.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),s},data:s,getCompletionCallback:g}),h=!0,y()},_compareTiles:function(a,s,l){return a?(a.push(s),this._sortTiles(a),a.length>l&&a.pop(),a):[s]},_sortTiles:function(a){a.sort(function(s,l){return s===null?1:l===null?-1:s.visibility===l.visibility?s.squaredDistance-l.squaredDistance:l.visibility-s.visibility})},_providesCoverage:function(a,s,l,u){var d,h,c,g;if(!a[s])return!1;if(l===void 0||u===void 0){d=a[s];for(c in d)if(Object.prototype.hasOwnProperty.call(d,c)){h=d[c];for(g in h)if(Object.prototype.hasOwnProperty.call(h,g)&&!h[g])return!1}return!0}return a[s][l]===void 0||a[s][l][u]===void 0||a[s][l][u]===!0},_isCovered:function(a,s,l,u){return l===void 0||u===void 0?this._providesCoverage(a,s+1):this._providesCoverage(a,s+1,2*l,2*u)&&this._providesCoverage(a,s+1,2*l,2*u+1)&&this._providesCoverage(a,s+1,2*l+1,2*u)&&this._providesCoverage(a,s+1,2*l+1,2*u+1)},_setCoverage:function(a,s,l,u,d){if(!a[s]){i.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",s);return}a[s][l]||(a[s][l]={}),a[s][l][u]=d},_resetCoverage:function(a,s){a[s]={}}})}(p),function(i){var a=function(l){i.console.assert(l,"[TileCache.cacheTile] options is required"),i.console.assert(l.tile,"[TileCache.cacheTile] options.tile is required"),i.console.assert(l.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=l.tile,this.tiledImage=l.tiledImage},s=function(l){i.console.assert(l,"[ImageRecord] options is required"),i.console.assert(l.data,"[ImageRecord] options.data is required"),this._tiles=[],l.create.apply(null,[this,l.data,l.ownerTile]),this._destroyImplementation=l.destroy.bind(null,this),this.getImage=l.getImage.bind(null,this),this.getData=l.getData.bind(null,this),this.getRenderedContext=l.getRenderedContext.bind(null,this)};s.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(l){i.console.assert(l,"[ImageRecord.addTile] tile is required"),this._tiles.push(l)},removeTile:function(l){for(var u=0;u<this._tiles.length;u++)if(this._tiles[u]===l){this._tiles.splice(u,1);return}i.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",l)},getTileCount:function(){return this._tiles.length}},i.TileCache=function(l){l=l||{},this._maxImageCacheCount=l.maxImageCacheCount||i.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},i.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(l){i.console.assert(l,"[TileCache.cacheTile] options is required"),i.console.assert(l.tile,"[TileCache.cacheTile] options.tile is required"),i.console.assert(l.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),i.console.assert(l.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var u=l.cutoff||0,d=this._tilesLoaded.length,h=this._imagesLoaded[l.tile.cacheKey];if(h||(l.data||(i.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),l.data=l.image),i.console.assert(l.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),h=this._imagesLoaded[l.tile.cacheKey]=new s({data:l.data,ownerTile:l.tile,create:l.tiledImage.source.createTileCache,destroy:l.tiledImage.source.destroyTileCache,getImage:l.tiledImage.source.getTileCacheDataAsImage,getData:l.tiledImage.source.getTileCacheData,getRenderedContext:l.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),h.addTile(l.tile),l.tile.cacheImageRecord=h,this._imagesLoadedCount>this._maxImageCacheCount){for(var c=null,g=-1,v=null,y,w,_,b,C,A,z=this._tilesLoaded.length-1;z>=0;z--)if(A=this._tilesLoaded[z],y=A.tile,!(y.level<=u||y.beingDrawn)){if(!c){c=y,g=z,v=A;continue}b=y.lastTouchTime,w=c.lastTouchTime,C=y.level,_=c.level,(b<w||b===w&&C>_)&&(c=y,g=z,v=A)}c&&g>=0&&(this._unloadTile(v),d=g)}this._tilesLoaded[d]=new a({tile:l.tile,tiledImage:l.tiledImage})},clearTilesFor:function(l){i.console.assert(l,"[TileCache.clearTilesFor] tiledImage is required");for(var u,d=0;d<this._tilesLoaded.length;++d)u=this._tilesLoaded[d],u.tiledImage===l&&(this._unloadTile(u),this._tilesLoaded.splice(d,1),d--)},getImageRecord:function(l){return i.console.assert(l,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[l]},_unloadTile:function(l){i.console.assert(l,"[TileCache._unloadTile] tileRecord is required");var u=l.tile,d=l.tiledImage;let h=u.getCanvasContext&&u.getCanvasContext();u.unload(),u.cacheImageRecord=null;var c=this._imagesLoaded[u.cacheKey];c&&(c.removeTile(u),c.getTileCount()||(c.destroy(),delete this._imagesLoaded[u.cacheKey],this._imagesLoadedCount--,h&&(h.canvas.width=0,h.canvas.height=0,d.viewer.raiseEvent("image-unloaded",{context2D:h,tile:u}))),d.viewer.raiseEvent("tile-unloaded",{tile:u,tiledImage:d}))}}}(p),function(i){i.World=function(a){var s=this;i.console.assert(a.viewer,"[World] options.viewer is required"),i.EventSource.call(this),this.viewer=a.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(l){s._autoRefigureSizes?s._figureSizes():s._needsSizesFigured=!0},this._figureSizes()},i.extend(i.World.prototype,i.EventSource.prototype,{addItem:function(a,s){if(i.console.assert(a,"[World.addItem] item is required"),i.console.assert(a instanceof i.TiledImage,"[World.addItem] only TiledImages supported at this time"),s=s||{},s.index!==void 0){var l=Math.max(0,Math.min(this._items.length,s.index));this._items.splice(l,0,a)}else this._items.push(a);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,a.addHandler("bounds-change",this._delegatedFigureSizes),a.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:a})},getItemAt:function(a){return i.console.assert(a!==void 0,"[World.getItemAt] index is required"),this._items[a]},getIndexOfItem:function(a){return i.console.assert(a,"[World.getIndexOfItem] item is required"),i.indexOf(this._items,a)},getItemCount:function(){return this._items.length},setItemIndex:function(a,s){i.console.assert(a,"[World.setItemIndex] item is required"),i.console.assert(s!==void 0,"[World.setItemIndex] index is required");var l=this.getIndexOfItem(a);if(s>=this._items.length)throw new Error("Index bigger than number of layers.");s===l||l===-1||(this._items.splice(l,1),this._items.splice(s,0,a),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:a,previousIndex:l,newIndex:s}))},removeItem:function(a){i.console.assert(a,"[World.removeItem] item is required");var s=i.indexOf(this._items,a);s!==-1&&(a.removeHandler("bounds-change",this._delegatedFigureSizes),a.removeHandler("clip-change",this._delegatedFigureSizes),a.destroy(),this._items.splice(s,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(a))},removeAll:function(){this.viewer._cancelPendingImages();var a,s;for(s=0;s<this._items.length;s++)a=this._items[s],a.removeHandler("bounds-change",this._delegatedFigureSizes),a.removeHandler("clip-change",this._delegatedFigureSizes),a.destroy();var l=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,s=0;s<l.length;s++)a=l[s],this._raiseRemoveItem(a)},resetItems:function(){for(var a=0;a<this._items.length;a++)this._items[a].reset()},update:function(a){for(var s=!1,l=0;l<this._items.length;l++)s=this._items[l].update(a)||s;return s},draw:function(){this.viewer.drawer.draw(this._items),this._needsDraw=!1,this._items.forEach(a=>{this._needsDraw=a.setDrawn()||this._needsDraw})},needsDraw:function(){for(var a=0;a<this._items.length;a++)if(this._items[a].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(a){this._autoRefigureSizes=a,a&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(a){a=a||{};var s=a.immediately||!1,l=a.layout||i.DEFAULT_SETTINGS.collectionLayout,u=a.rows||i.DEFAULT_SETTINGS.collectionRows,d=a.columns||i.DEFAULT_SETTINGS.collectionColumns,h=a.tileSize||i.DEFAULT_SETTINGS.collectionTileSize,c=a.tileMargin||i.DEFAULT_SETTINGS.collectionTileMargin,g=h+c,v;!a.rows&&d?v=d:v=Math.ceil(this._items.length/u);var y=0,w=0,_,b,C,A,z;this.setAutoRefigureSizes(!1);for(var H=0;H<this._items.length;H++)H&&H%v===0&&(l==="horizontal"?(w+=g,y=0):(y+=g,w=0)),_=this._items[H],b=_.getBounds(),b.width>b.height?C=h:C=h*(b.width/b.height),A=C*(b.height/b.width),z=new i.Point(y+(h-C)/2,w+(h-A)/2),_.setPosition(z,s),_.setWidth(C,s),l==="horizontal"?y+=g:w+=g;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var a=this._homeBounds?this._homeBounds.clone():null,s=this._contentSize?this._contentSize.clone():null,l=this._contentFactor||0;if(!this._items.length)this._homeBounds=new i.Rect(0,0,1,1),this._contentSize=new i.Point(1,1),this._contentFactor=1;else{var u=this._items[0],d=u.getBounds();this._contentFactor=u.getContentSize().x/d.width;for(var h=u.getClippedBounds().getBoundingBox(),c=h.x,g=h.y,v=h.x+h.width,y=h.y+h.height,w=1;w<this._items.length;w++)u=this._items[w],d=u.getBounds(),this._contentFactor=Math.max(this._contentFactor,u.getContentSize().x/d.width),h=u.getClippedBounds().getBoundingBox(),c=Math.min(c,h.x),g=Math.min(g,h.y),v=Math.max(v,h.x+h.width),y=Math.max(y,h.y+h.height);this._homeBounds=new i.Rect(c,g,v-c,y-g),this._contentSize=new i.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==l||!this._homeBounds.equals(a)||!this._contentSize.equals(s))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(a){this.raiseEvent("remove-item",{item:a})}})}(p)}(ys)),ys.exports}var VT=kT();const qT=Gv(VT);function IT(o){j.useEffect(function(){let i=qT({id:"viewer",tileSources:{type:"image",url:`${Ft}/cards/${o.card}`},showNavigationControl:!1,maxZoomPixelRatio:3});return function(){i.destroy()}},[]);let p={width:`${o.width}px`,height:`${o.height}px`,touchAction:"none",border:`2px dashed ${o.dashes||"red"}`};return F.jsx("div",{id:"viewer",style:p})}var ZT=28e5,YT=2800001,WT=5508011,XT=5663016,QT=8078007,KT=8078011,JT=8078012;function Ap(o){return Array.isArray(o)?"%5B"+o.map(Ap).join("%2C%20")+"%5D":typeof o=="bigint"?`${o}n`:encodeURIComponent(String(o!=null&&Object.getPrototypeOf(o)===null?{...o}:o))}function $T([o,p]){return`${o}=${Ap(p)}`}function ew(o){const p=Object.entries(o).map($T).join("&");return btoa(p)}function tw(o,p={}){{let i=`Solana error #${o}; Decode this error by running \`npx @solana/errors decode -- ${o}`;return Object.keys(p).length&&(i+=` '${ew(p)}'`),`${i}\``}}var ra=class extends Error{constructor(...[p,i]){let a,s;if(i){const{cause:u,...d}=i;u&&(s={cause:u}),Object.keys(d).length>0&&(a=d)}const l=tw(p,a);super(l,s);Gu(this,"cause",this.cause);Gu(this,"context");this.context={__code:p,...a},this.name="SolanaError"}};function _s(o,p){return"fixedSize"in p?p.fixedSize:p.getSizeFromValue(o)}function Bn(o){return Object.freeze({...o,encode:p=>{const i=new Uint8Array(_s(p,o));return o.write(p,i,0),i}})}function wc(o){return"fixedSize"in o&&typeof o.fixedSize=="number"}function iw(o){return!wc(o)}function nw(o,p){return Bn({fixedSize:p,write:(i,a,s)=>{const l=o.encode(i),u=l.length>p?l.slice(0,p):l;return a.set(u,s),s+p}})}function aw(o,p){return Bn({...iw(o)?{...o,getSizeFromValue:i=>o.getSizeFromValue(p(i))}:o,write:(i,a,s)=>o.write(p(i),a,s)})}function rw(o,p,i=p){if(!p.match(new RegExp(`^[${o}]*$`)))throw new ra(JT,{alphabet:o,base:o.length,value:i})}var lw=o=>Bn({getSizeFromValue:p=>{const[i,a]=Vg(p,o[0]);if(!a)return p.length;const s=qg(a,o);return i.length+Math.ceil(s.toString(16).length/2)},write(p,i,a){if(rw(o,p),p==="")return a;const[s,l]=Vg(p,o[0]);if(!l)return i.set(new Uint8Array(s.length).fill(0),a),a+s.length;let u=qg(l,o);const d=[];for(;u>0n;)d.unshift(Number(u%256n)),u/=256n;const h=[...Array(s.length).fill(0),...d];return i.set(h,a),a+h.length}});function Vg(o,p){const[i,a]=o.split(new RegExp(`((?!${p}).*)`));return[i,a]}function qg(o,p){const i=BigInt(p.length);let a=0n;for(const s of o)a*=i,a+=BigInt(p.indexOf(s));return a}var sw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ow=()=>lw(sw),$u;function uw(){return $u||($u=ow()),$u}function cw(o){if(o.length<32||o.length>44)throw new ra(YT,{actualLength:o.length});const a=uw().encode(o).byteLength;if(a!==32)throw new ra(ZT,{actualLength:a})}function hw(o){return cw(o),o}function Op(o,p,i,a){if(a<p||a>i)throw new ra(KT,{codecDescription:o,max:i,min:p,value:a})}function fw(o){return(o==null?void 0:o.endian)!==1}function dw(o){return Bn({fixedSize:o.size,write(p,i,a){o.range&&Op(o.name,o.range[0],o.range[1],p);const s=new ArrayBuffer(o.size);return o.set(new DataView(s),p,fw(o.config)),i.set(new Uint8Array(s),a),a+o.size}})}var gw=()=>Bn({getSizeFromValue:o=>o<=127?1:o<=16383?2:3,maxSize:3,write:(o,p,i)=>{Op("shortU16",0,65535,o);const a=[0];for(let s=0;;s+=1){const l=Number(o)>>s*7;if(l===0)break;const u=127&l;a[s]=u,s>0&&(a[s-1]|=128)}return p.set(a,i),i+a.length}}),pw=(o={})=>dw({config:o,name:"u32",range:[0,+"0xffffffff"],set:(p,i,a)=>p.setUint32(0,Number(i),a),size:4});function mw(o,p,i){if(p!==i)throw new ra(QT,{actual:i,codecDescription:o,expected:p})}function Ig(o){return o.reduce((p,i)=>p===null||i===null?null:p+i,0)}function Mp(o){return wc(o)?o.fixedSize:null}function Pp(o){return wc(o)?o.fixedSize:o.maxSize??null}function vw(o,p={}){const i=p.size??pw(),a=Zg(i,Mp(o)),s=Zg(i,Pp(o))??void 0;return Bn({...a!==null?{fixedSize:a}:{getSizeFromValue:l=>(typeof i=="object"?_s(l.length,i):0)+[...l].reduce((d,h)=>d+_s(h,o),0),maxSize:s},write:(l,u,d)=>(typeof i=="number"&&mw("array",i,l.length),typeof i=="object"&&(d=i.write(l.length,u,d)),l.forEach(h=>{d=o.write(h,u,d)}),d)})}function Zg(o,p){return typeof o!="number"?null:o===0?0:p===null?null:p*o}function zp(){return Bn({getSizeFromValue:o=>o.length,write:(o,p,i)=>(p.set(o,i),i+o.length)})}function yw(o){const p=o.map(([,s])=>s),i=Ig(p.map(Mp)),a=Ig(p.map(Pp))??void 0;return Bn({...i===null?{getSizeFromValue:s=>o.map(([l,u])=>_s(s[l],u)).reduce((l,u)=>l+u,0),maxSize:a}:{fixedSize:i},write:(s,l,u)=>(o.forEach(([d,h])=>{u=h.write(s[d],l,u)}),u)})}function Yg(o){return o!==null&&(typeof o=="object"||typeof o=="function")}function Tw(o){const p=new Set,i={deferreds:p,settled:!1};return Promise.resolve(o).then(a=>{for(const{resolve:s}of p)s(a);p.clear(),i.settled=!0},a=>{for(const{reject:s}of p)s(a);p.clear(),i.settled=!0}),i}var ec=new WeakMap;async function ww(o){let p;return await new Promise((a,s)=>{p={reject:s,resolve:a};for(const l of o){if(!Yg(l)){Promise.resolve(l).then(a,s);continue}let u=ec.get(l);u===void 0?(u=Tw(l),u.deferreds.add(p),ec.set(l,u)):u.settled?Promise.resolve(l).then(a,s):u.deferreds.add(p)}}).finally(()=>{for(const a of o)Yg(a)&&ec.get(a).deferreds.delete(p)})}function xw(o,p){return p?ww([new Promise((i,a)=>{p.aborted?a(p.reason):p.addEventListener("abort",function(){a(this.reason)})}),o]):o}function Ew(o){const p=Object.values(o);if(p.length===0)throw new ra(XT);return p.map(i=>i||new Uint8Array(64).fill(0))}function Sw(){return aw(vw(nw(zp(),64),{size:gw()}),Ew)}function _w(){return yw([["signatures",Sw()],["messageBytes",zp()]])}function xc(o,p){const i=bw(o,p);return j.useCallback(async a=>{const[s]=await i(a);return s},[i])}function bw(o,p){if(!o.chains.includes(p))throw new qa(xp,{address:o.address,chain:p,featureName:lc,supportedChains:[...o.chains],supportedFeatures:[...o.features]});const i=zs(o,lc),a=Ms(o);return j.useCallback(async(...s)=>{const l=s.map(({options:d,...h})=>{const c=d==null?void 0:d.minContextSlot;return{...h,account:a,chain:p,...c!=null?{options:{minContextSlot:Number(c)}}:null}});return await i.signAndSendTransaction(...l)},[a,p,i])}function Rw(o,p){const i=Cw(o,p);return j.useCallback(async a=>{const[s]=await i(a);return s},[i])}function Cw(o,p){if(!o.chains.includes(p))throw new qa(xp,{address:o.address,chain:p,featureName:lc,supportedChains:[...o.chains],supportedFeatures:[...o.features]});const i=zs(o,NT),a=Ms(o);return j.useCallback(async(...s)=>{const l=s.map(({options:d,...h})=>{const c=d==null?void 0:d.minContextSlot;return{...h,account:a,chain:p,...c!=null?{options:{minContextSlot:Number(c)}}:null}});return await i.signTransaction(...l)},[i,a,p])}function Dw(o,p){const i=j.useRef(null),a=xc(o,p);return j.useMemo(()=>({address:hw(o.address),async signAndSendTransactions(s,l={}){const{abortSignal:u,...d}=l;u==null||u.throwIfAborted();const h=i.current||(i.current=_w());if(s.length>1)throw new ra(WT);if(s.length===0)return[];const[c]=s,g=h.encode(c),v={...d,transaction:g},{signature:y}=await xw(a(v),u);return Object.freeze([y])}}),[a,o.address])}const oc=j.createContext({B:!0,A:!0,MENU:!1});function Wg(){let{visible:o,setVisible:p}=j.useContext(oc);function i(a){p({...o,[a]:!o[a]})}return F.jsx("div",{id:"menu",style:{display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",top:0,left:0,height:"100%",background:Ui.color.menus},children:F.jsx("nav",{children:F.jsxs("ul",{style:{padding:0},children:[F.jsx("li",{style:{listStyleType:"none",padding:"7px"},children:F.jsx("button",{className:"button",onClick:function(){i("MENU")},children:"THE ZONE"})}),[{href:"/#tokens",text:"YOUR TOKENS"},{href:"/#help",text:"HELP & FAQ"},{href:"/#settings",text:"SETINGS"}].map(function(a){return F.jsx("li",{style:{listStyleType:"none"},children:F.jsx("button",{className:"button",children:F.jsx("a",{href:a.href,children:a.text})})},a)})]})})})}function Aw(o){let{style:p,value:i}=o,a;if(!i)return F.jsx("p",{children:"No card"});let[s,l]=j.useContext(Bs),d=Ns()[0],[h,c]=yc(d);Tc(d);async function g(_){let b=await c();l(b[0]),Dw(d.accounts[0],"solana:devnet"),a=xc(d.accounts[0],"solana:devnet")}async function v(_){await g();let b=Uint8Array.from(atob(_),function(C){return C.charCodeAt(0)});return await a({transaction:b})}async function y(_,b){let C=null;if(b=="rent"){let z=await(await fetch(`${Ft}/cards/${_}/rent`,{credentials:"include"})).json(),H=await v(z.txn_rent_fee);C=ps.encode(H.signature)}await fetch(`${Ft}/cards/pick`,{credentials:"include",method:"POST",body:JSON.stringify({card:_,sig:C}),headers:{"Content-type":"application/json"}})}let w=`https://explorer.solana.com/address/${i.address}?cluster=devnet`;return F.jsxs("div",{children:[F.jsx(Dp,{value:o.value}),F.jsx("button",{className:"button",children:F.jsx("a",{target:"_blank",href:w,children:"see on chain "})}),F.jsx("button",{disabled:i.spl.data.amount==0,className:"button",style:{background:i.spl.data.amount==0?"lightgrey":"#fff"},onClick:function(_){y(i.identifier,i.access)},children:i.access.toUpperCase()}),F.jsx("p",{children:"-"})]})}function Ow(){let o=j.useContext(As);j.useRef(null);let[p,i]=j.useState(!0),[a,s]=j.useState({}),[l,u]=j.useState({B:!0,A:!0,MENU:!1,RATE:!1});function d(c){u({...l,[c]:!l[c]})}async function h(){let c=await fetch(`${Ft}/cards/choices`,{credentials:"include"});s(await c.json())}return j.useEffect(function(){o&&i(!1)},[o]),j.useEffect(function(){a.picked||h()},[]),p?F.jsx("div",{children:"Loading..."}):o?a.picked?F.jsx("div",{id:"the-zone",style:{textTransform:"uppercase"},children:F.jsxs(oc.Provider,{value:{visible:l,setVisible:u},children:[l.MENU&&F.jsx(Wg,{}),F.jsx("h2",{children:"Welcome to The Zone!"}),F.jsx("p",{children:"THIS HERE IS THE CENTRAL POINT OF THE ENTIRE APPLICATION. NO MATTER WHAT YOU DO YOU ENTER THE ZONE AND EVERYTHING SHOULD BE READY FOR YOU"}),F.jsxs("div",{id:"the-zone-controls",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[F.jsx("button",{className:"button",style:{background:Ui.color.mentor},onClick:function(){d("B")},children:"TOGGLE SIDE B"}),F.jsx("button",{className:"button",style:{background:Ui.color.student},onClick:function(){d("A")},children:"TOGGLE SIDE A"}),F.jsx("button",{className:"button",onClick:function(){d("MENU")},children:"MENU"}),F.jsx("button",{className:"button",onClick:function(){d("RATE")},children:"DONE"})]}),F.jsxs("div",{style:{display:"flex",flexWrap:"wrap"},children:[!l.RATE&&l.B&&F.jsx("section",{className:"container",style:{flexGrow:1},children:F.jsx(IT,{id:"focusedB",dashes:Ui.color.mentor,card:a.picked,width:"500",height:"500"})}),!l.RATE&&l.A&&F.jsx("section",{className:"container",style:{flexGrow:1},children:F.jsx(jT,{id:"focusedA",dashes:Ui.color.student,width:"500",height:"500"})})]}),l.RATE&&F.jsxs(F.Fragment,{children:[F.jsx("p",{children:"-"}),F.jsx("p",{children:"GRADE CARD SUCCESS FOR (SM-2 ALGORITHM):"}),F.jsxs("div",{style:{display:"flex",justifyContent:"center"},children:[F.jsx("button",{className:"button",children:"AGAIN"}),F.jsx("button",{className:"button",children:"HARD"}),F.jsx("button",{className:"button",children:"GOOD"}),F.jsx("button",{className:"button",children:"EASY"})]}),F.jsx("p",{children:"-"}),F.jsx("p",{children:"RATE CARD DIFFICULTY"}),F.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[...Array(10).keys()].map(function(c){return F.jsx("button",{className:"button",children:c+1})})})]})]})}):F.jsxs(oc.Provider,{value:{visible:l,setVisible:u},children:[l.MENU&&F.jsx(Wg,{}),F.jsx("p",{children:"Studycard picker!"}),F.jsx("button",{className:"button",onClick:function(){d("MENU")},children:"MENU"}),F.jsx("div",{style:{display:"flex"},children:Object.entries(a).filter(function([c,g]){return["rent","free"].includes(c)}).map(function([c,g]){return F.jsx("div",{style:{margin:"1em"},children:F.jsx(Aw,{value:g},c)})})})]}):F.jsx(T0,{to:{pathname:"/"}})}const Mw=j.createContext({B:!0,A:!0,MENU:!1});function Pw({style:o}){let{visible:p,setVisible:i}=j.useContext(Mw);return F.jsx("div",{id:"menu",style:{...o,display:"flex",alignItems:"center",justifyContent:"center",top:0,left:0,height:"100%",background:Ui.color.menus},children:F.jsx("nav",{children:F.jsx("ul",{style:{padding:0},children:[{href:"/#zone",text:"THE ZONE"},{href:"/#tokens",text:"YOUR TOKENS"},{href:"/#help",text:"HELP & FAQ"},{href:"/#settings",text:"SETINGS"}].map(function(a){return F.jsx("li",{style:{listStyleType:"none"},children:F.jsx("button",{className:"button",children:F.jsx("a",{href:a.href,children:a.text})})},a.text)})})})})}function zw(){let o,[p,i]=j.useState([]),[a,s]=j.useState(null),[l,u]=j.useState([{raw:""}]),[d,h]=j.useState(!0),[c,g]=j.useState({CREATOR:!1,EDITOR:!1}),[v,y]=j.useContext(Bs),w=j.useContext(As),b=Ns()[0],[C,A]=yc(b);Tc(b);async function z(ce){let ue=await A();setSelected(ue[0]),signTransaction=Rw(b.accounts[0],"solana:devnet"),o=xc(b.accounts[0],"solana:devnet")}async function H(ce){await z();let ue=Uint8Array.from(atob(ce),function(de){return de.charCodeAt(0)});return await o({transaction:ue})}async function ae(){let ce=await fetch(`${Ft}/cards`,{credentials:"include"});i(await ce.json())}async function Q(ce){let ue=await fetch(`${Ft}/cards`,{method:"POST",credentials:"include",body:ce});s(await ue.json())}async function U(ce){let ue=Uint8Array.from(atob(ce),function(k){return k.charCodeAt(0)}),de=await signTransaction({transaction:ue}),Pe=String.fromCharCode.apply(null,de.signedTransaction);return btoa(Pe)}async function pe(ce){let de=await(await fetch(`${Ft}/token/escrow/tx?card_id=${ce}`,{credentials:"include"})).json();console.log(await H(de.txn_escrow_to))}async function ye(ce){let de=await(await fetch(`${Ft}/token/retrieval/tx?card_id=${ce}`,{credentials:"include"})).json();console.log(await H(de.txn_retrieval)),await fetch(`${Ft}/token/retrieve/tx?card_id=${ce}`,{credentials:"include"})}async function ge(ce){let ue,de;if(!ce)throw new Error(`Invalid card identifier ${ce}!`);ue=await fetch(`${Ft}/token/account/mint/tx`,{credentials:"include"}),de=await ue.json();let Pe=de.mint_account;await U(de.txn),ue=await fetch(`${Ft}/token/account/tx?mint_account=${Pe}`,{credentials:"include"}),de=await ue.json();let ze=de.token_account;await U(de.txn),await U(de.txn_escrows),ue=await fetch(`${Ft}/token/mint/tx?mint_account=${Pe}&token_account=${ze}&card_id=${ce}`,{credentials:"include"}),de=await ue.json(),console.log(await U(de.txn_mint_to))}function Ge(ce,ue){ce.preventDefault(),l[ue].raw||l.push({raw:""});try{l[ue]={raw:URL.createObjectURL(ce.target.files[0]),filename:ce.target.files[0].name}}catch{l[ue]={raw:""}}u([...l])}return j.useEffect(function(){ae()},[]),j.useEffect(function(){},[a,l]),j.useEffect(function(){w&&h(!1)},[w]),d?F.jsx("p",{children:"Loading!"}):F.jsx(F.Fragment,{children:F.jsxs("div",{id:"tokens",style:{width:"100%",minWidth:"50vw",display:"flex",flexWrap:"nowrap"},children:[F.jsx(Pw,{style:{width:"16%"}}),F.jsxs("div",{style:{width:"32%"},children:[p.some(Boolean)&&p.map(function(ce){let ue=`https://explorer.solana.com/address/${ce.address}?cluster=devnet`;return F.jsxs("div",{children:[F.jsx(Dp,{style:{maxWidth:"0px"},value:ce}),!ce.spl&&F.jsx("button",{className:"button",onClick:function(de){ge(ce.identifier)},children:"MINT TOKEN"}),ce.spl&&F.jsxs(F.Fragment,{children:[0<ce.spl.data.amount&&F.jsx("button",{className:"button",style:{cursor:"help",background:"lightgrey"},title:"FOR RENTING",onClick:function(de){pe(ce.identifier)},children:"ESCROW"}),ce.spl.data.amount==0&&F.jsx("button",{className:"button",style:{cursor:"help",background:"lightgrey"},title:"FROM RENTING",onClick:function(de){ye(ce.identifier)},children:"RETRIEVE"}),F.jsx("button",{className:"button",children:F.jsx("a",{target:"_blank",href:ue,children:"see on chain "})})]}),F.jsx("p",{children:"-"})]},ce.address)}),F.jsxs("div",{children:[!p.some(Boolean)&&F.jsx("div",{children:F.jsx("p",{children:"NO CARDS!"})}),F.jsx("button",{onClick:function(ce){g({...c,CREATOR:!0})},children:"MAKE ONE"})]})]}),F.jsxs("div",{className:"button",style:{width:"50%"},children:[c.CREATOR&&F.jsxs(F.Fragment,{children:[F.jsx("h2",{children:"CARD CREATOR"}),F.jsxs("form",{style:{},action:Q,encType:"multipart/form-data",children:[l.map(function(ce,ue){return F.jsx("input",{type:"file",name:"media",onChange:function(de){Ge(de,ue)}},ue)}),["media_front","media_back"].map(function(ce){return F.jsxs(F.Fragment,{children:[F.jsx("label",{for:ce,children:F.jsxs("p",{children:[ce,":"]})}),l.filter(function(ue){return ue.raw}).map(function(ue,de){return F.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-evenly"},children:[F.jsx("img",{width:"128px",src:ue.raw}),F.jsx("input",{style:{margin:"1em"},value:ue.filename,name:ce,type:"checkbox"},de),F.jsx("br",{})]})})]})}),F.jsx("label",{for:"card_name",children:F.jsx("p",{children:"card_name:"})}),F.jsx("input",{id:"card_mame",type:"text",name:"name",placeholder:"Card name"}),F.jsx("label",{for:"for-rent",children:"Rent"}),F.jsx("input",{id:"for-rent",type:"radio",name:"access",value:"rent",required:!0}),F.jsx("label",{for:"for-free",children:"Free"}),F.jsx("input",{id:"for-free",type:"radio",name:"access",value:"free"}),F.jsx("input",{type:"hidden",name:"owner",value:""}),F.jsx("input",{type:"hidden",name:"holder",value:""}),F.jsx("br",{}),F.jsx("input",{type:"submit"})]})]}),!Object.values(c).some(Boolean)&&F.jsx("h2",{children:"CARD MANAGER"})]})]})})}const Lw=q0([{path:"/",element:F.jsx(FT,{})},{path:"/zone",element:F.jsx(Ow,{})},{path:"/tokens",element:F.jsx(zw,{})}]);function Nw(){return F.jsx(nT,{router:Lw})}function Bw(){return F.jsx(HT,{children:F.jsx(rT,{children:F.jsx(Nw,{})})})}Qv.createRoot(document.getElementById("root")).render(F.jsx(j.StrictMode,{children:F.jsx(Bw,{})}));
